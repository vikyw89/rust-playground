{
	"title": "Behavior considered undefined - The Rust Reference",
	"url": "https://doc.rust-lang.org/stable/reference/behavior-considered-undefined.html",
	"markdown": "# Behavior considered undefined - The Rust Reference\n\nRust code is incorrect if it exhibits any of the behaviors in the following list. This includes code within `unsafe` blocks and `unsafe` functions. `unsafe` only means that avoiding undefined behavior is on the programmer; it does not change anything about the fact that Rust programs must never cause undefined behavior.\n\nIt is the programmer's responsibility when writing `unsafe` code to ensure that any safe code interacting with the `unsafe` code cannot trigger these behaviors. `unsafe` code that satisfies this property for any safe client is called _sound_; if `unsafe` code can be misused by safe code to exhibit undefined behavior, it is _unsound_.\n\n_**Warning:**_ The following list is not exhaustive; it may grow or shrink. There is no formal model of Rust's semantics for what is and is not allowed in unsafe code, so there may be more behavior considered unsafe. We also reserve the right to make some of the behavior in that list defined in the future. In other words, this list does not say that anything will _definitely_ always be undefined in all future Rust version (but we might make such commitments for some list items in the future).\n\nPlease read the [Rustonomicon](../nomicon/index.html) before writing unsafe code.\n\n-   Data races.\n    \n-   Accessing (loading from or storing to) a place that is [dangling](#dangling-pointers) or [based on a misaligned pointer](#places-based-on-misaligned-pointers).\n    \n-   Performing a place projection that violates the requirements of [in-bounds pointer arithmetic](about:blank/std/primitive.pointer.html#method.offset). A place projection is a [field expression](expressions/field-expr.html), a [tuple index expression](about:blank/expressions/tuple-expr.html#tuple-indexing-expressions), or an [array/slice index expression](about:blank/expressions/array-expr.html#array-and-slice-indexing-expressions).\n    \n-   Breaking the [pointer aliasing rules](http://llvm.org/docs/LangRef.html#pointer-aliasing-rules). `Box<T>`, `&mut T` and `&T` follow LLVM’s scoped [noalias](http://llvm.org/docs/LangRef.html#noalias) model, except if the `&T` contains an [`UnsafeCell<U>`](../std/cell/struct.UnsafeCell.html). References and boxes must not be [dangling](#dangling-pointers) while they are live. The exact liveness duration is not specified, but some bounds exist:\n    \n    -   For references, the liveness duration is upper-bounded by the syntactic lifetime assigned by the borrow checker; it cannot be live any _longer_ than that lifetime.\n    -   Each time a reference or box is passed to or returned from a function, it is considered live.\n    -   When a reference (but not a `Box`!) is passed to a function, it is live at least as long as that function call, again except if the `&T` contains an [`UnsafeCell<U>`](../std/cell/struct.UnsafeCell.html).\n    \n    All this also applies when values of these types are passed in a (nested) field of a compound type, but not behind pointer indirections.\n    \n-   Mutating immutable bytes. All bytes inside a [`const`](items/constant-items.html) item are immutable. The bytes owned by an immutable binding are immutable, unless those bytes are part of an [`UnsafeCell<U>`](../std/cell/struct.UnsafeCell.html).\n    \n    Moreover, the bytes [pointed to](#pointed-to-bytes) by a shared reference, including transitively through other references (both shared and mutable) and `Box`es, are immutable; transitivity includes those references stored in fields of compound types.\n    \n    A mutation is any write of more than 0 bytes which overlaps with any of the relevant bytes (even if that write does not change the memory contents).\n    \n-   Invoking undefined behavior via compiler intrinsics.\n    \n-   Executing code compiled with platform features that the current platform does not support (see [`target_feature`](about:blank/attributes/codegen.html#the-target_feature-attribute)), _except_ if the platform explicitly documents this to be safe.\n    \n-   Calling a function with the wrong call ABI or unwinding from a function with the wrong unwind ABI.\n    \n-   Producing an invalid value, even in private fields and locals. \"Producing\" a value happens any time a value is assigned to or read from a place, passed to a function/primitive operation or returned from a function/primitive operation. The following values are invalid (at their respective type):\n    \n    -   A value other than `false` (`0`) or `true` (`1`) in a [`bool`](types/boolean.html).\n        \n    -   A discriminant in an `enum` not included in the type definition.\n        \n    -   A null `fn` pointer.\n        \n    -   A value in a `char` which is a surrogate or above `char::MAX`.\n        \n    -   A `!` (all values are invalid for this type).\n        \n    -   An integer (`i*`/`u*`), floating point value (`f*`), or raw pointer obtained from [uninitialized memory](http://llvm.org/docs/LangRef.html#undefined-values), or uninitialized memory in a `str`.\n        \n    -   A reference or `Box<T>` that is [dangling](#dangling-pointers), misaligned, or points to an invalid value.\n        \n    -   Invalid metadata in a wide reference, `Box<T>`, or raw pointer:\n        \n        -   `dyn Trait` metadata is invalid if it is not a pointer to a vtable for `Trait` that matches the actual dynamic trait the pointer or reference points to.\n        -   Slice metadata is invalid if the length is not a valid `usize` (i.e., it must not be read from uninitialized memory).\n    -   Invalid values for a type with a custom definition of invalid values. In the standard library, this affects [`NonNull<T>`](../core/ptr/struct.NonNull.html) and [`NonZero*`](../core/num/index.html).\n        \n        > **Note**: `rustc` achieves this with the unstable `rustc_layout_scalar_valid_range_*` attributes.\n        \n-   Incorrect use of inline assembly. For more details, refer to the [rules](about:blank/inline-assembly.html#rules-for-inline-assembly) to follow when writing code that uses inline assembly.\n    \n-   **In [const context](about:blank/const_eval.html#const-context)**: transmuting or otherwise reinterpreting a pointer (reference, raw pointer, or function pointer) into some allocated object as a non-pointer type (such as integers). 'Reinterpreting' refers to loading the pointer value at integer type without a cast, e.g. by doing raw pointer casts or using a union.\n    \n\n**Note:** Uninitialized memory is also implicitly invalid for any type that has a restricted set of valid values. In other words, the only cases in which reading uninitialized memory is permitted are inside `union`s and in \"padding\" (the gaps between the fields/elements of a type).\n\n> **Note**: Undefined behavior affects the entire program. For example, calling a function in C that exhibits undefined behavior of C means your entire program contains undefined behaviour that can also affect the Rust code. And vice versa, undefined behavior in Rust can cause adverse affects on code executed by any FFI calls to other languages.\n\n### [Pointed-to bytes](#pointed-to-bytes)\n\nThe span of bytes a pointer or reference \"points to\" is determined by the pointer value and the size of the pointee type (using `size_of_val`).\n\n### [Places based on misaligned pointers](#places-based-on-misaligned-pointers)\n\nA place is said to be \"based on a misaligned pointer\" if the last `*` projection during place computation was performed on a pointer that was not aligned for its type. (If there is no `*` projection in the place expression, then this is accessing the field of a local and rustc will guarantee proper alignment. If there are multiple `*` projection, then each of them incurs a load of the pointer-to-be-dereferenced itself from memory, and each of these loads is subject to the alignment constraint. Note that some `*` projections can be omitted in surface Rust syntax due to automatic dereferencing; we are considering the fully expanded place expression here.)\n\nFor instance, if `ptr` has type `*const S` where `S` has an alignment of 8, then `ptr` must be 8-aligned or else `(*ptr).f` is \"based on an misaligned pointer\". This is true even if the type of the field `f` is `u8` (i.e., a type with alignment 1). In other words, the alignment requirement derives from the type of the pointer that was dereferenced, _not_ the type of the field that is being accessed.\n\nNote that a place based on a misaligned pointer only leads to Undefined Behavior when it is loaded from or stored to. `addr_of!`/`addr_of_mut!` on such a place is allowed. `&`/`&mut` on a place requires the alignment of the field type (or else the program would be \"producing an invalid value\"), which generally is a less restrictive requirement than being based on an aligned pointer. Taking a reference will lead to a compiler error in cases where the field type might be more aligned than the type that contains it, i.e., `repr(packed)`. This means that being based on an aligned pointer is always sufficient to ensure that the new reference is aligned, but it is not always necessary.\n\n### [Dangling pointers](#dangling-pointers)\n\nA reference/pointer is \"dangling\" if it is null or not all of the bytes it [points to](#pointed-to-bytes) are part of the same live allocation (so in particular they all have to be part of _some_ allocation).\n\nIf the size is 0, then the pointer must either point inside of a live allocation (including pointing just after the last byte of the allocation), or it must be directly constructed from a non-zero integer literal.\n\nNote that dynamically sized types (such as slices and strings) point to their entire range, so it is important that the length metadata is never too large. In particular, the dynamic size of a Rust value (as determined by `size_of_val`) must never exceed `isize::MAX`.",
	"html": "<!DOCTYPE html><html lang=\"en\" class=\"light\" dir=\"ltr\"><head>\n        <!-- Book generated using mdBook -->\n        <meta charset=\"UTF-8\">\n        <title>Behavior considered undefined - The Rust Reference</title>\n\n\n        <!-- Custom HTML head -->\n        \n        <meta name=\"description\" content=\"\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <meta name=\"theme-color\" content=\"rgb(255, 255, 255)\">\n\n        <link rel=\"icon\" href=\"favicon.svg\">\n        <link rel=\"shortcut icon\" href=\"favicon.png\">\n        <link rel=\"stylesheet\" href=\"css/variables.css\">\n        <link rel=\"stylesheet\" href=\"css/general.css\">\n        <link rel=\"stylesheet\" href=\"css/chrome.css\">\n        <link rel=\"stylesheet\" href=\"css/print.css\" media=\"print\">\n\n        <!-- Fonts -->\n        <link rel=\"stylesheet\" href=\"FontAwesome/css/font-awesome.css\">\n        <link rel=\"stylesheet\" href=\"fonts/fonts.css\">\n\n        <!-- Highlight.js Stylesheets -->\n        <link rel=\"stylesheet\" href=\"highlight.css\">\n        <link rel=\"stylesheet\" href=\"tomorrow-night.css\" disabled=\"\">\n        <link rel=\"stylesheet\" href=\"ayu-highlight.css\" disabled=\"\">\n\n        <!-- Custom theme stylesheets -->\n        <link rel=\"stylesheet\" href=\"theme/reference.css\">\n\n    </head>\n    <body class=\"js sidebar-visible\">\n    <div id=\"body-container\">\n        <!-- Provide site root to javascript -->\n        <script>\n            var path_to_root = \"\";\n            var default_theme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"navy\" : \"light\";\n        </script>\n\n        <!-- Work around some values being stored in localStorage wrapped in quotes -->\n        <script>\n            try {\n                var theme = localStorage.getItem('mdbook-theme');\n                var sidebar = localStorage.getItem('mdbook-sidebar');\n\n                if (theme.startsWith('\"') && theme.endsWith('\"')) {\n                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));\n                }\n\n                if (sidebar.startsWith('\"') && sidebar.endsWith('\"')) {\n                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));\n                }\n            } catch (e) { }\n        </script>\n\n        <!-- Set the theme before any content is loaded, prevents flash -->\n        <script>\n            var theme;\n            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }\n            if (theme === null || theme === undefined) { theme = default_theme; }\n            var html = document.querySelector('html');\n            html.classList.remove('light')\n            html.classList.add(theme);\n            var body = document.querySelector('body');\n            body.classList.remove('no-js')\n            body.classList.add('js');\n        </script>\n\n        <input type=\"checkbox\" id=\"sidebar-toggle-anchor\" class=\"hidden\">\n\n        <!-- Hide / unhide sidebar before it is displayed -->\n        <script>\n            var body = document.querySelector('body');\n            var sidebar = null;\n            var sidebar_toggle = document.getElementById(\"sidebar-toggle-anchor\");\n            if (document.body.clientWidth >= 1080) {\n                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }\n                sidebar = sidebar || 'visible';\n            } else {\n                sidebar = 'hidden';\n            }\n            sidebar_toggle.checked = sidebar === 'visible';\n            body.classList.remove('sidebar-visible');\n            body.classList.add(\"sidebar-\" + sidebar);\n        </script>\n\n        <nav id=\"sidebar\" class=\"sidebar\" aria-label=\"Table of contents\" aria-hidden=\"false\">\n            <div class=\"sidebar-scrollbox\">\n                <ol class=\"chapter\"><li class=\"chapter-item expanded affix \"><a href=\"introduction.html\" tabindex=\"0\">Introduction</a></li><li class=\"chapter-item expanded \"><a href=\"notation.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.</strong> Notation</a></li><li class=\"chapter-item expanded \"><a href=\"lexical-structure.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.</strong> Lexical structure</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"input-format.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.1.</strong> Input format</a></li><li class=\"chapter-item expanded \"><a href=\"keywords.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.2.</strong> Keywords</a></li><li class=\"chapter-item expanded \"><a href=\"identifiers.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.3.</strong> Identifiers</a></li><li class=\"chapter-item expanded \"><a href=\"comments.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.4.</strong> Comments</a></li><li class=\"chapter-item expanded \"><a href=\"whitespace.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.5.</strong> Whitespace</a></li><li class=\"chapter-item expanded \"><a href=\"tokens.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.6.</strong> Tokens</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"macros.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.</strong> Macros</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"macros-by-example.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.1.</strong> Macros By Example</a></li><li class=\"chapter-item expanded \"><a href=\"procedural-macros.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.2.</strong> Procedural Macros</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"crates-and-source-files.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.</strong> Crates and source files</a></li><li class=\"chapter-item expanded \"><a href=\"conditional-compilation.html\" tabindex=\"0\"><strong aria-hidden=\"true\">5.</strong> Conditional compilation</a></li><li class=\"chapter-item expanded \"><a href=\"items.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.</strong> Items</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"items/modules.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.1.</strong> Modules</a></li><li class=\"chapter-item expanded \"><a href=\"items/extern-crates.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.2.</strong> Extern crates</a></li><li class=\"chapter-item expanded \"><a href=\"items/use-declarations.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.3.</strong> Use declarations</a></li><li class=\"chapter-item expanded \"><a href=\"items/functions.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.4.</strong> Functions</a></li><li class=\"chapter-item expanded \"><a href=\"items/type-aliases.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.5.</strong> Type aliases</a></li><li class=\"chapter-item expanded \"><a href=\"items/structs.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.6.</strong> Structs</a></li><li class=\"chapter-item expanded \"><a href=\"items/enumerations.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.7.</strong> Enumerations</a></li><li class=\"chapter-item expanded \"><a href=\"items/unions.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.8.</strong> Unions</a></li><li class=\"chapter-item expanded \"><a href=\"items/constant-items.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.9.</strong> Constant items</a></li><li class=\"chapter-item expanded \"><a href=\"items/static-items.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.10.</strong> Static items</a></li><li class=\"chapter-item expanded \"><a href=\"items/traits.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.11.</strong> Traits</a></li><li class=\"chapter-item expanded \"><a href=\"items/implementations.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.12.</strong> Implementations</a></li><li class=\"chapter-item expanded \"><a href=\"items/external-blocks.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.13.</strong> External blocks</a></li><li class=\"chapter-item expanded \"><a href=\"items/generics.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.14.</strong> Generic parameters</a></li><li class=\"chapter-item expanded \"><a href=\"items/associated-items.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.15.</strong> Associated Items</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"attributes.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.</strong> Attributes</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"attributes/testing.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.1.</strong> Testing</a></li><li class=\"chapter-item expanded \"><a href=\"attributes/derive.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.2.</strong> Derive</a></li><li class=\"chapter-item expanded \"><a href=\"attributes/diagnostics.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.3.</strong> Diagnostics</a></li><li class=\"chapter-item expanded \"><a href=\"attributes/codegen.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.</strong> Code generation</a></li><li class=\"chapter-item expanded \"><a href=\"attributes/limits.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.5.</strong> Limits</a></li><li class=\"chapter-item expanded \"><a href=\"attributes/type_system.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.6.</strong> Type System</a></li><li class=\"chapter-item expanded \"><a href=\"attributes/debugger.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.7.</strong> Debugger</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"statements-and-expressions.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.</strong> Statements and expressions</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"statements.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.1.</strong> Statements</a></li><li class=\"chapter-item expanded \"><a href=\"expressions.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.</strong> Expressions</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"expressions/literal-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.1.</strong> Literal expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/path-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.2.</strong> Path expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/block-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.3.</strong> Block expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/operator-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.4.</strong> Operator expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/grouped-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.5.</strong> Grouped expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/array-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.6.</strong> Array and index expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/tuple-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.7.</strong> Tuple and index expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/struct-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.8.</strong> Struct expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/call-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.9.</strong> Call expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/method-call-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.10.</strong> Method call expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/field-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.11.</strong> Field access expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/closure-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.12.</strong> Closure expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/loop-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.13.</strong> Loop expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/range-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.14.</strong> Range expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/if-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.15.</strong> If and if let expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/match-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.16.</strong> Match expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/return-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.17.</strong> Return expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/await-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.18.</strong> Await expressions</a></li><li class=\"chapter-item expanded \"><a href=\"expressions/underscore-expr.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.19.</strong> Underscore expressions</a></li></ol></li></ol></li><li class=\"chapter-item expanded \"><a href=\"patterns.html\" tabindex=\"0\"><strong aria-hidden=\"true\">9.</strong> Patterns</a></li><li class=\"chapter-item expanded \"><a href=\"type-system.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.</strong> Type system</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"types.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.</strong> Types</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"types/boolean.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.1.</strong> Boolean type</a></li><li class=\"chapter-item expanded \"><a href=\"types/numeric.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.2.</strong> Numeric types</a></li><li class=\"chapter-item expanded \"><a href=\"types/textual.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.3.</strong> Textual types</a></li><li class=\"chapter-item expanded \"><a href=\"types/never.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.4.</strong> Never type</a></li><li class=\"chapter-item expanded \"><a href=\"types/tuple.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.5.</strong> Tuple types</a></li><li class=\"chapter-item expanded \"><a href=\"types/array.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.6.</strong> Array types</a></li><li class=\"chapter-item expanded \"><a href=\"types/slice.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.7.</strong> Slice types</a></li><li class=\"chapter-item expanded \"><a href=\"types/struct.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.8.</strong> Struct types</a></li><li class=\"chapter-item expanded \"><a href=\"types/enum.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.9.</strong> Enumerated types</a></li><li class=\"chapter-item expanded \"><a href=\"types/union.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.10.</strong> Union types</a></li><li class=\"chapter-item expanded \"><a href=\"types/function-item.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.11.</strong> Function item types</a></li><li class=\"chapter-item expanded \"><a href=\"types/closure.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.12.</strong> Closure types</a></li><li class=\"chapter-item expanded \"><a href=\"types/pointer.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.13.</strong> Pointer types</a></li><li class=\"chapter-item expanded \"><a href=\"types/function-pointer.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.14.</strong> Function pointer types</a></li><li class=\"chapter-item expanded \"><a href=\"types/trait-object.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.15.</strong> Trait object types</a></li><li class=\"chapter-item expanded \"><a href=\"types/impl-trait.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.16.</strong> Impl trait type</a></li><li class=\"chapter-item expanded \"><a href=\"types/parameters.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.17.</strong> Type parameters</a></li><li class=\"chapter-item expanded \"><a href=\"types/inferred.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.1.18.</strong> Inferred type</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"dynamically-sized-types.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.2.</strong> Dynamically Sized Types</a></li><li class=\"chapter-item expanded \"><a href=\"type-layout.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.3.</strong> Type layout</a></li><li class=\"chapter-item expanded \"><a href=\"interior-mutability.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.4.</strong> Interior mutability</a></li><li class=\"chapter-item expanded \"><a href=\"subtyping.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.5.</strong> Subtyping and Variance</a></li><li class=\"chapter-item expanded \"><a href=\"trait-bounds.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.6.</strong> Trait and lifetime bounds</a></li><li class=\"chapter-item expanded \"><a href=\"type-coercions.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.7.</strong> Type coercions</a></li><li class=\"chapter-item expanded \"><a href=\"destructors.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.8.</strong> Destructors</a></li><li class=\"chapter-item expanded \"><a href=\"lifetime-elision.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.9.</strong> Lifetime elision</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"special-types-and-traits.html\" tabindex=\"0\"><strong aria-hidden=\"true\">11.</strong> Special types and traits</a></li><li class=\"chapter-item expanded \"><a href=\"names.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.</strong> Names</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"names/namespaces.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.1.</strong> Namespaces</a></li><li class=\"chapter-item expanded \"><a href=\"names/scopes.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.2.</strong> Scopes</a></li><li class=\"chapter-item expanded \"><a href=\"names/preludes.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.3.</strong> Preludes</a></li><li class=\"chapter-item expanded \"><a href=\"paths.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.4.</strong> Paths</a></li><li class=\"chapter-item expanded \"><a href=\"names/name-resolution.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.5.</strong> Name resolution</a></li><li class=\"chapter-item expanded \"><a href=\"visibility-and-privacy.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.6.</strong> Visibility and privacy</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"memory-model.html\" tabindex=\"0\"><strong aria-hidden=\"true\">13.</strong> Memory model</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"memory-allocation-and-lifetime.html\" tabindex=\"0\"><strong aria-hidden=\"true\">13.1.</strong> Memory allocation and lifetime</a></li><li class=\"chapter-item expanded \"><a href=\"variables.html\" tabindex=\"0\"><strong aria-hidden=\"true\">13.2.</strong> Variables</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"linkage.html\" tabindex=\"0\"><strong aria-hidden=\"true\">14.</strong> Linkage</a></li><li class=\"chapter-item expanded \"><a href=\"inline-assembly.html\" tabindex=\"0\"><strong aria-hidden=\"true\">15.</strong> Inline assembly</a></li><li class=\"chapter-item expanded \"><a href=\"unsafety.html\" tabindex=\"0\"><strong aria-hidden=\"true\">16.</strong> Unsafety</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"unsafe-keyword.html\" tabindex=\"0\"><strong aria-hidden=\"true\">16.1.</strong> The unsafe keyword</a></li><li class=\"chapter-item expanded \"><a href=\"behavior-considered-undefined.html\" class=\"active\" tabindex=\"0\"><strong aria-hidden=\"true\">16.2.</strong> Behavior considered undefined</a></li><li class=\"chapter-item expanded \"><a href=\"behavior-not-considered-unsafe.html\" tabindex=\"0\"><strong aria-hidden=\"true\">16.3.</strong> Behavior not considered unsafe</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"const_eval.html\" tabindex=\"0\"><strong aria-hidden=\"true\">17.</strong> Constant Evaluation</a></li><li class=\"chapter-item expanded \"><a href=\"abi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">18.</strong> Application Binary Interface</a></li><li class=\"chapter-item expanded \"><a href=\"runtime.html\" tabindex=\"0\"><strong aria-hidden=\"true\">19.</strong> The Rust runtime</a></li><li class=\"chapter-item expanded \"><a href=\"appendices.html\" tabindex=\"0\"><strong aria-hidden=\"true\">20.</strong> Appendices</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"macro-ambiguity.html\" tabindex=\"0\"><strong aria-hidden=\"true\">20.1.</strong> Macro Follow-Set Ambiguity Formal Specification</a></li><li class=\"chapter-item expanded \"><a href=\"influences.html\" tabindex=\"0\"><strong aria-hidden=\"true\">20.2.</strong> Influences</a></li><li class=\"chapter-item expanded \"><a href=\"glossary.html\" tabindex=\"0\"><strong aria-hidden=\"true\">20.3.</strong> Glossary</a></li></ol></li></ol>\n            </div>\n            <div id=\"sidebar-resize-handle\" class=\"sidebar-resize-handle\">\n                <div class=\"sidebar-resize-indicator\"></div>\n            </div>\n        </nav>\n\n        <!-- Track and set sidebar scroll position -->\n        <script>\n            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');\n            sidebarScrollbox.addEventListener('click', function(e) {\n                if (e.target.tagName === 'A') {\n                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);\n                }\n            }, { passive: true });\n            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');\n            sessionStorage.removeItem('sidebar-scroll');\n            if (sidebarScrollTop) {\n                // preserve sidebar scroll position when navigating via links within sidebar\n                sidebarScrollbox.scrollTop = sidebarScrollTop;\n            } else {\n                // scroll sidebar to current active section when navigating via \"next/previous chapter\" buttons\n                var activeSection = document.querySelector('#sidebar .active');\n                if (activeSection) {\n                    activeSection.scrollIntoView({ block: 'center' });\n                }\n            }\n        </script>\n\n        <div id=\"page-wrapper\" class=\"page-wrapper\">\n\n            <div class=\"page\">\n                                <div id=\"menu-bar-hover-placeholder\"></div>\n                <div id=\"menu-bar\" class=\"menu-bar\" style=\"top: 0px;\">\n                    <div class=\"left-buttons\">\n                        <label id=\"sidebar-toggle\" class=\"icon-button\" for=\"sidebar-toggle-anchor\" title=\"Toggle Table of Contents\" aria-label=\"Toggle Table of Contents\" aria-controls=\"sidebar\" aria-expanded=\"true\">\n                            <i class=\"fa fa-bars\"></i>\n                        </label>\n                        <button id=\"theme-toggle\" class=\"icon-button\" type=\"button\" title=\"Change theme\" aria-label=\"Change theme\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-controls=\"theme-list\">\n                            <i class=\"fa fa-paint-brush\"></i>\n                        </button>\n                        <ul id=\"theme-list\" class=\"theme-popup\" aria-label=\"Themes\" role=\"menu\">\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme theme-selected\" id=\"light\">Light</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"rust\">Rust</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"coal\">Coal</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"navy\">Navy</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"ayu\">Ayu</button></li>\n                        </ul>\n                        <button id=\"search-toggle\" class=\"icon-button\" type=\"button\" title=\"Search. (Shortkey: s)\" aria-label=\"Toggle Searchbar\" aria-expanded=\"false\" aria-keyshortcuts=\"S\" aria-controls=\"searchbar\">\n                            <i class=\"fa fa-search\"></i>\n                        </button>\n                    </div>\n\n                    <h1 class=\"menu-title\">The Rust Reference</h1>\n\n                    <div class=\"right-buttons\">\n                        <a href=\"print.html\" title=\"Print this book\" aria-label=\"Print this book\">\n                            <i id=\"print-button\" class=\"fa fa-print\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/reference/\" title=\"Git repository\" aria-label=\"Git repository\">\n                            <i id=\"git-repository-button\" class=\"fa fa-github\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/reference/edit/master/src/behavior-considered-undefined.md\" title=\"Suggest an edit\" aria-label=\"Suggest an edit\">\n                            <i id=\"git-edit-button\" class=\"fa fa-edit\"></i>\n                        </a>\n\n                    </div>\n                </div>\n\n                <div id=\"search-wrapper\" class=\"hidden\">\n                    <form id=\"searchbar-outer\" class=\"searchbar-outer\">\n                        <input type=\"search\" id=\"searchbar\" name=\"searchbar\" placeholder=\"Search this book ...\" aria-controls=\"searchresults-outer\" aria-describedby=\"searchresults-header\">\n                    </form>\n                    <div id=\"searchresults-outer\" class=\"searchresults-outer hidden\">\n                        <div id=\"searchresults-header\" class=\"searchresults-header\"></div>\n                        <ul id=\"searchresults\">\n                        </ul>\n                    </div>\n                </div>\n\n                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->\n                <script>\n                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');\n                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');\n                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {\n                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);\n                    });\n                </script>\n\n                <div id=\"content\" class=\"content\">\n                    <main>\n                        <h2 id=\"behavior-considered-undefined\"><a class=\"header\" href=\"#behavior-considered-undefined\">Behavior considered undefined</a></h2>\n<p>Rust code is incorrect if it exhibits any of the behaviors in the following\nlist. This includes code within <code class=\"hljs\">unsafe</code> blocks and <code class=\"hljs\">unsafe</code> functions.\n<code class=\"hljs\">unsafe</code> only means that avoiding undefined behavior is on the programmer; it\ndoes not change anything about the fact that Rust programs must never cause\nundefined behavior.</p>\n<p>It is the programmer's responsibility when writing <code class=\"hljs\">unsafe</code> code to ensure that\nany safe code interacting with the <code class=\"hljs\">unsafe</code> code cannot trigger these\nbehaviors. <code class=\"hljs\">unsafe</code> code that satisfies this property for any safe client is\ncalled <em>sound</em>; if <code class=\"hljs\">unsafe</code> code can be misused by safe code to exhibit\nundefined behavior, it is <em>unsound</em>.</p>\n<div class=\"warning\">\n<p><em><strong>Warning:</strong></em> The following list is not exhaustive; it may grow or shrink.\nThere is no formal model of Rust's semantics for what is and is not allowed in\nunsafe code, so there may be more behavior considered unsafe. We also reserve\nthe right to make some of the behavior in that list defined in the future. In\nother words, this list does not say that anything will <em>definitely</em> always be\nundefined in all future Rust version (but we might make such commitments for\nsome list items in the future).</p>\n<p>Please read the <a href=\"../nomicon/index.html\">Rustonomicon</a> before writing unsafe code.</p>\n</div>\n<ul>\n<li>\n<p>Data races.</p>\n</li>\n<li>\n<p>Accessing (loading from or storing to) a place that is <a href=\"#dangling-pointers\">dangling</a> or <a href=\"#places-based-on-misaligned-pointers\">based on\na misaligned pointer</a>.</p>\n</li>\n<li>\n<p>Performing a place projection that violates the requirements of <a href=\"../std/primitive.pointer.html#method.offset\">in-bounds\npointer arithmetic</a>. A place projection is a <a href=\"expressions/field-expr.html\">field\nexpression</a>, a <a href=\"expressions/tuple-expr.html#tuple-indexing-expressions\">tuple index expression</a>, or an\n<a href=\"expressions/array-expr.html#array-and-slice-indexing-expressions\">array/slice index expression</a>.</p>\n</li>\n<li>\n<p>Breaking the <a href=\"http://llvm.org/docs/LangRef.html#pointer-aliasing-rules\">pointer aliasing rules</a>. <code class=\"hljs\">Box&lt;T&gt;</code>, <code class=\"hljs\">&amp;mut T</code> and <code class=\"hljs\">&amp;T</code> follow\nLLVM’s scoped <a href=\"http://llvm.org/docs/LangRef.html#noalias\">noalias</a> model, except if the <code class=\"hljs\">&amp;T</code> contains an\n<a href=\"../std/cell/struct.UnsafeCell.html\"><code class=\"hljs\">UnsafeCell&lt;U&gt;</code></a>. References and boxes must not be <a href=\"#dangling-pointers\">dangling</a> while they are\nlive. The exact liveness duration is not specified, but some bounds exist:</p>\n<ul>\n<li>For references, the liveness duration is upper-bounded by the syntactic\nlifetime assigned by the borrow checker; it cannot be live any <em>longer</em> than\nthat lifetime.</li>\n<li>Each time a reference or box is passed to or returned from a function, it is\nconsidered live.</li>\n<li>When a reference (but not a <code class=\"hljs\">Box</code>!) is passed to a function, it is live at\nleast as long as that function call, again except if the <code class=\"hljs\">&amp;T</code> contains an\n<a href=\"../std/cell/struct.UnsafeCell.html\"><code class=\"hljs\">UnsafeCell&lt;U&gt;</code></a>.</li>\n</ul>\n<p>All this also applies when values of these\ntypes are passed in a (nested) field of a compound type, but not behind\npointer indirections.</p>\n</li>\n<li>\n<p>Mutating immutable bytes. All bytes inside a <a href=\"items/constant-items.html\"><code class=\"hljs\">const</code></a> item are immutable.\nThe bytes owned by an immutable binding are immutable, unless those bytes are part of an <a href=\"../std/cell/struct.UnsafeCell.html\"><code class=\"hljs\">UnsafeCell&lt;U&gt;</code></a>.</p>\n<p>Moreover, the bytes <a href=\"#pointed-to-bytes\">pointed to</a> by a shared reference, including transitively through other references (both shared and mutable) and <code class=\"hljs\">Box</code>es, are immutable; transitivity includes those references stored in fields of compound types.</p>\n<p>A mutation is any write of more than 0 bytes which overlaps with any of the relevant bytes (even if that write does not change the memory contents).</p>\n</li>\n<li>\n<p>Invoking undefined behavior via compiler intrinsics.</p>\n</li>\n<li>\n<p>Executing code compiled with platform features that the current platform\ndoes not support (see <a href=\"attributes/codegen.html#the-target_feature-attribute\"><code class=\"hljs\">target_feature</code></a>), <em>except</em> if the platform explicitly documents this to be safe.</p>\n</li>\n<li>\n<p>Calling a function with the wrong call ABI or unwinding from a function with the wrong unwind ABI.</p>\n</li>\n<li>\n<p>Producing an invalid value, even in private fields and locals. \"Producing\" a\nvalue happens any time a value is assigned to or read from a place, passed to\na function/primitive operation or returned from a function/primitive\noperation.\nThe following values are invalid (at their respective type):</p>\n<ul>\n<li>\n<p>A value other than <code class=\"hljs\">false</code> (<code class=\"hljs\">0</code>) or <code class=\"hljs\">true</code> (<code class=\"hljs\">1</code>) in a <a href=\"types/boolean.html\"><code class=\"hljs\">bool</code></a>.</p>\n</li>\n<li>\n<p>A discriminant in an <code class=\"hljs\">enum</code> not included in the type definition.</p>\n</li>\n<li>\n<p>A null <code class=\"hljs\">fn</code> pointer.</p>\n</li>\n<li>\n<p>A value in a <code class=\"hljs\">char</code> which is a surrogate or above <code class=\"hljs\">char::MAX</code>.</p>\n</li>\n<li>\n<p>A <code class=\"hljs\">!</code> (all values are invalid for this type).</p>\n</li>\n<li>\n<p>An integer (<code class=\"hljs\">i*</code>/<code class=\"hljs\">u*</code>), floating point value (<code class=\"hljs\">f*</code>), or raw pointer obtained\nfrom <a href=\"http://llvm.org/docs/LangRef.html#undefined-values\">uninitialized memory</a>, or uninitialized memory in a <code class=\"hljs\">str</code>.</p>\n</li>\n<li>\n<p>A reference or <code class=\"hljs\">Box&lt;T&gt;</code> that is <a href=\"#dangling-pointers\">dangling</a>, misaligned, or points to an invalid value.</p>\n</li>\n<li>\n<p>Invalid metadata in a wide reference, <code class=\"hljs\">Box&lt;T&gt;</code>, or raw pointer:</p>\n<ul>\n<li><code class=\"hljs\">dyn Trait</code> metadata is invalid if it is not a pointer to a vtable for\n<code class=\"hljs\">Trait</code> that matches the actual dynamic trait the pointer or reference points to.</li>\n<li>Slice metadata is invalid if the length is not a valid <code class=\"hljs\">usize</code>\n(i.e., it must not be read from uninitialized memory).</li>\n</ul>\n</li>\n<li>\n<p>Invalid values for a type with a custom definition of invalid values.\nIn the standard library, this affects <a href=\"../core/ptr/struct.NonNull.html\"><code class=\"hljs\">NonNull&lt;T&gt;</code></a> and <a href=\"../core/num/index.html\"><code class=\"hljs\">NonZero*</code></a>.</p>\n<blockquote>\n<p><strong>Note</strong>: <code class=\"hljs\">rustc</code> achieves this with the unstable\n<code class=\"hljs\">rustc_layout_scalar_valid_range_*</code> attributes.</p>\n</blockquote>\n</li>\n</ul>\n</li>\n<li>\n<p>Incorrect use of inline assembly. For more details, refer to the <a href=\"inline-assembly.html#rules-for-inline-assembly\">rules</a> to\nfollow when writing code that uses inline assembly.</p>\n</li>\n<li>\n<p><strong>In <a href=\"const_eval.html#const-context\">const context</a></strong>: transmuting or otherwise\nreinterpreting a pointer (reference, raw pointer, or function pointer) into\nsome allocated object as a non-pointer type (such as integers).\n'Reinterpreting' refers to loading the pointer value at integer type without a\ncast, e.g. by doing raw pointer casts or using a union.</p>\n</li>\n</ul>\n<p><strong>Note:</strong> Uninitialized memory is also implicitly invalid for any type that has\na restricted set of valid values. In other words, the only cases in which\nreading uninitialized memory is permitted are inside <code class=\"hljs\">union</code>s and in \"padding\"\n(the gaps between the fields/elements of a type).</p>\n<blockquote>\n<p><strong>Note</strong>: Undefined behavior affects the entire program. For example, calling\na function in C that exhibits undefined behavior of C means your entire\nprogram contains undefined behaviour that can also affect the Rust code. And\nvice versa, undefined behavior in Rust can cause adverse affects on code\nexecuted by any FFI calls to other languages.</p>\n</blockquote>\n<h3 id=\"pointed-to-bytes\"><a class=\"header\" href=\"#pointed-to-bytes\">Pointed-to bytes</a></h3>\n<p>The span of bytes a pointer or reference \"points to\" is determined by the pointer value and the size of the pointee type (using <code class=\"hljs\">size_of_val</code>).</p>\n<h3 id=\"places-based-on-misaligned-pointers\"><a class=\"header\" href=\"#places-based-on-misaligned-pointers\">Places based on misaligned pointers</a></h3>\n<p>A place is said to be \"based on a misaligned pointer\" if the last <code class=\"hljs\">*</code> projection\nduring place computation was performed on a pointer that was not aligned for its\ntype. (If there is no <code class=\"hljs\">*</code> projection in the place expression, then this is\naccessing the field of a local and rustc will guarantee proper alignment. If\nthere are multiple <code class=\"hljs\">*</code> projection, then each of them incurs a load of the\npointer-to-be-dereferenced itself from memory, and each of these loads is\nsubject to the alignment constraint. Note that some <code class=\"hljs\">*</code> projections can be\nomitted in surface Rust syntax due to automatic dereferencing; we are\nconsidering the fully expanded place expression here.)</p>\n<p>For instance, if <code class=\"hljs\">ptr</code> has type <code class=\"hljs\">*const S</code> where <code class=\"hljs\">S</code> has an alignment of 8, then\n<code class=\"hljs\">ptr</code> must be 8-aligned or else <code class=\"hljs\">(*ptr).f</code> is \"based on an misaligned pointer\".\nThis is true even if the type of the field <code class=\"hljs\">f</code> is <code class=\"hljs\">u8</code> (i.e., a type with\nalignment 1). In other words, the alignment requirement derives from the type of\nthe pointer that was dereferenced, <em>not</em> the type of the field that is being\naccessed.</p>\n<p>Note that a place based on a misaligned pointer only leads to Undefined Behavior\nwhen it is loaded from or stored to. <code class=\"hljs\">addr_of!</code>/<code class=\"hljs\">addr_of_mut!</code> on such a place\nis allowed. <code class=\"hljs\">&amp;</code>/<code class=\"hljs\">&amp;mut</code> on a place requires the alignment of the field type (or\nelse the program would be \"producing an invalid value\"), which generally is a\nless restrictive requirement than being based on an aligned pointer. Taking a\nreference will lead to a compiler error in cases where the field type might be\nmore aligned than the type that contains it, i.e., <code class=\"hljs\">repr(packed)</code>. This means\nthat being based on an aligned pointer is always sufficient to ensure that the\nnew reference is aligned, but it is not always necessary.</p>\n<h3 id=\"dangling-pointers\"><a class=\"header\" href=\"#dangling-pointers\">Dangling pointers</a></h3>\n<p>A reference/pointer is \"dangling\" if it is null or not all of the bytes it\n<a href=\"#pointed-to-bytes\">points to</a> are part of the same live allocation (so in particular they all have to be\npart of <em>some</em> allocation).</p>\n<p>If the size is 0, then the pointer must either point inside of a live allocation\n(including pointing just after the last byte of the allocation), or it must be\ndirectly constructed from a non-zero integer literal.</p>\n<p>Note that dynamically sized types (such as slices and strings) point to their\nentire range, so it is important that the length metadata is never too large. In\nparticular, the dynamic size of a Rust value (as determined by <code class=\"hljs\">size_of_val</code>)\nmust never exceed <code class=\"hljs\">isize::MAX</code>.</p>\n\n                    </main>\n\n                    <nav class=\"nav-wrapper\" aria-label=\"Page navigation\">\n                        <!-- Mobile navigation buttons -->\n                            <a rel=\"prev\" href=\"unsafe-keyword.html\" class=\"mobile-nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                                <i class=\"fa fa-angle-left\"></i>\n                            </a>\n\n                            <a rel=\"next prefetch\" href=\"behavior-not-considered-unsafe.html\" class=\"mobile-nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                                <i class=\"fa fa-angle-right\"></i>\n                            </a>\n\n                        <div style=\"clear: both\"></div>\n                    </nav>\n                </div>\n            </div>\n\n            <nav class=\"nav-wide-wrapper\" aria-label=\"Page navigation\">\n                    <a rel=\"prev\" href=\"unsafe-keyword.html\" class=\"nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                        <i class=\"fa fa-angle-left\"></i>\n                    </a>\n\n                    <a rel=\"next prefetch\" href=\"behavior-not-considered-unsafe.html\" class=\"nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                        <i class=\"fa fa-angle-right\"></i>\n                    </a>\n            </nav>\n\n        </div>\n\n\n\n\n        <script>\n            window.playground_copyable = true;\n        </script>\n\n\n        <script src=\"elasticlunr.min.js\"></script>\n        <script src=\"mark.min.js\"></script>\n        <script src=\"searcher.js\"></script>\n\n        <script src=\"clipboard.min.js\"></script>\n        <script src=\"highlight.js\"></script>\n        <script src=\"book.js\"></script>\n\n        <!-- Custom JS scripts -->\n\n\n    </div>\n    \n\n</body></html>",
	"crawlDate": "2024-07-28T05:13:35.940Z"
}