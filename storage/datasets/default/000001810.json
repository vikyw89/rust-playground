{
	"title": "Tests - The rustc book",
	"url": "https://doc.rust-lang.org/rustc/tests/index.html",
	"markdown": "# Tests - The rustc book\n\n`rustc` has a built-in facility for building and running tests for a crate. More information about writing and running tests may be found in the [Testing Chapter](../../book/ch11-00-testing.html) of the Rust Programming Language book.\n\nTests are written as free functions with the [`#[test]` attribute](about:blank/reference/attributes/testing.html#the-test-attribute). For example:\n\n```rust\n#[test]\nfn it_works() {\n    assert_eq!(2 + 2, 4);\n}\n```\n\nTests \"pass\" if they return without an error. They \"fail\" if they [panic](../../book/ch09-01-unrecoverable-errors-with-panic.html), or return a type such as [`Result`](../../std/result/index.html) that implements the [`Termination`](../../std/process/trait.Termination.html) trait with a non-zero value.\n\nBy passing the [`--test` option](about:blank/command-line-arguments.html#option-test) to `rustc`, the compiler will build the crate in a special mode to construct an executable that will run the tests in the crate. The `--test` flag will make the following changes:\n\n-   The crate will be built as a `bin` [crate type](../../reference/linkage.html), forcing it to be an executable.\n-   Links the executable with [`libtest`](../../test/index.html), the test harness that is part of the standard library, which handles running the tests.\n-   Synthesizes a [`main` function](about:blank/reference/crates-and-source-files.html#main-functions) which will process command-line arguments and run the tests. This new `main` function will replace any existing `main` function as the entry point of the executable, though the existing `main` will still be compiled.\n-   Enables the [`test` cfg option](about:blank/reference/conditional-compilation.html#test), which allows your code to use conditional compilation to detect if it is being built as a test.\n-   Enables building of functions annotated with the [`test`](about:blank/reference/attributes/testing.html#the-test-attribute) and [`bench`](#benchmarks) attributes, which will be run by the test harness.\n\nAfter the executable is created, you can run it to execute the tests and receive a report on what passes and fails. If you are using [Cargo](../../cargo/index.html) to manage your project, it has a built-in [`cargo test`](../../cargo/commands/cargo-test.html) command which handles all of this automatically. An example of the output looks like this:\n\n```text\nrunning 4 tests\ntest it_works ... ok\ntest check_valid_args ... ok\ntest invalid_characters ... ok\ntest walks_the_dog ... ok\n\ntest result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n\n```\n\n> **Note**: Tests must be built with the [`unwind` panic strategy](../../book/ch09-01-unrecoverable-errors-with-panic.html). This is because all tests run in the same process, and they are intended to catch panics, which is not possible with the `abort` strategy. See the unstable [`-Z panic-abort-tests`](https://github.com/rust-lang/rust/issues/67650) option for experimental support of the `abort` strategy by spawning tests in separate processes.\n\n## [Test attributes](#test-attributes)\n\nTests are indicated using attributes on free functions. The following attributes are used for testing, see the linked documentation for more details:\n\n-   [`#[test]`](about:blank/reference/attributes/testing.html#the-test-attribute) ‚Äî¬†Indicates a function is a test to be run.\n-   `#[bench]` ‚Äî¬†Indicates a function is a benchmark to be run. Benchmarks are currently unstable and only available in the nightly channel, see the [unstable docs](../../unstable-book/library-features/test.html) for more details.\n-   [`#[should_panic]`](about:blank/reference/attributes/testing.html#the-should_panic-attribute) ‚Äî¬†Indicates that the test function will only pass if the function [panics](../../book/ch09-01-unrecoverable-errors-with-panic.html).\n-   [`#[ignore]`](about:blank/reference/attributes/testing.html#the-ignore-attribute) ‚Äî¬†Indicates that the test function will be compiled, but not run by default. See the [`--ignored`](#--ignored) and [`--include-ignored`](#--include-ignored) options to run these tests.\n\n## [CLI arguments](#cli-arguments)\n\nThe libtest harness has several command-line arguments to control its behavior.\n\n> Note: When running with [`cargo test`](../../cargo/commands/cargo-test.html), the libtest CLI arguments must be passed after the `--` argument to differentiate between flags for Cargo and those for the harness. For example: `cargo test -- --nocapture`\n\n### [Filters](#filters)\n\nPositional arguments (those without a `-` prefix) are treated as filters which will only run tests whose name matches one of those strings. The filter will match any substring found in the full path of the test function. For example, if the test function `it_works` is located in the module `utils::paths::tests`, then any of the filters `works`, `path`, `utils::`, or `utils::paths::tests::it_works` will match that test.\n\nSee [Selection options](#selection-options) for more options to control which tests are run.\n\n### [Action options](#action-options)\n\nThe following options perform different actions other than running tests.\n\n#### [`--list`](#--list)\n\nPrints a list of all tests and benchmarks. Does not run any of the tests. [Filters](#filters) can be used to list only matching tests.\n\n#### [`-h`, `--help`](#-h---help)\n\nDisplays usage information and command-line options.\n\n### [Selection options](#selection-options)\n\nThe following options change how tests are selected.\n\n#### [`--test`](#--test)\n\nThis is the default mode where all tests will be run as well as running all benchmarks with only a single iteration (to ensure the benchmark works, without taking the time to actually perform benchmarking). This can be combined with the `--bench` flag to run both tests and perform full benchmarking.\n\n#### [`--bench`](#--bench)\n\nThis runs in a mode where tests are ignored, and only runs benchmarks. This can be combined with `--test` to run both benchmarks and tests.\n\n#### [`--exact`](#--exact)\n\nThis forces [filters](#filters) to match the full path of the test exactly. For example, if the test `it_works` is in the module `utils::paths::tests`, then only the string `utils::paths::tests::it_works` will match that test.\n\n#### [`--skip` _FILTER_](#--skip-filter)\n\nSkips any tests whose name contains the given _FILTER_ string. This flag may be passed multiple times.\n\n#### [`--ignored`](#--ignored)\n\nRuns only tests that are marked with the [`ignore` attribute](about:blank/reference/attributes/testing.html#the-ignore-attribute).\n\n#### [`--include-ignored`](#--include-ignored)\n\nRuns both [ignored](#--ignored) and non-ignored tests.\n\n#### [`--exclude-should-panic`](#--exclude-should-panic)\n\nExcludes tests marked with the [`should_panic` attribute](about:blank/reference/attributes/testing.html#the-should_panic-attribute).\n\n‚ö†Ô∏è üöß This option is [unstable](#unstable-options), and requires the `-Z unstable-options` flag. See [tracking issue #82348](https://github.com/rust-lang/rust/issues/82348) for more information.\n\n### [Execution options](#execution-options)\n\nThe following options affect how tests are executed.\n\n#### [`--test-threads` _NUM\\_THREADS_](#--test-threads-num_threads)\n\nSets the number of threads to use for running tests in parallel. By default, uses the amount of concurrency available on the hardware as indicated by [`available_parallelism`](../../std/thread/fn.available_parallelism.html).\n\nThis can also be specified with the `RUST_TEST_THREADS` environment variable.\n\n#### [`--force-run-in-process`](#--force-run-in-process)\n\nForces the tests to run in a single process when using the [`abort` panic strategy](../../book/ch09-01-unrecoverable-errors-with-panic.html).\n\n‚ö†Ô∏è üöß This only works with the unstable [`-Z panic-abort-tests`](https://github.com/rust-lang/rust/issues/67650) option, and requires the `-Z unstable-options` flag. See [tracking issue #67650](https://github.com/rust-lang/rust/issues/67650) for more information.\n\n#### [`--ensure-time`](#--ensure-time)\n\n‚ö†Ô∏è üöß This option is [unstable](#unstable-options), and requires the `-Z unstable-options` flag. See [tracking issue #64888](https://github.com/rust-lang/rust/issues/64888) and the [unstable docs](../../unstable-book/compiler-flags/report-time.html) for more information.\n\n#### [`--shuffle`](#--shuffle)\n\nRuns the tests in random order, as opposed to the default alphabetical order.\n\nThis may also be specified by setting the `RUST_TEST_SHUFFLE` environment variable to anything but `0`.\n\nThe random number generator seed that is output can be passed to [`--shuffle-seed`](#--shuffle-seed-seed) to run the tests in the same order again.\n\nNote that `--shuffle` does not affect whether the tests are run in parallel. To run the tests in random order sequentially, use `--shuffle --test-threads 1`.\n\n‚ö†Ô∏è üöß This option is [unstable](#unstable-options), and requires the `-Z unstable-options` flag. See [tracking issue #89583](https://github.com/rust-lang/rust/issues/89583) for more information.\n\n#### [`--shuffle-seed` _SEED_](#--shuffle-seed-seed)\n\nLike [`--shuffle`](#--shuffle), but seeds the random number generator with _SEED_. Thus, calling the test harness with `--shuffle-seed` _SEED_ twice runs the tests in the same order both times.\n\n_SEED_ is any 64-bit unsigned integer, for example, one produced by [`--shuffle`](#--shuffle).\n\nThis can also be specified with the `RUST_TEST_SHUFFLE_SEED` environment variable.\n\n‚ö†Ô∏è üöß This option is [unstable](#unstable-options), and requires the `-Z unstable-options` flag. See [tracking issue #89583](https://github.com/rust-lang/rust/issues/89583) for more information.\n\n### [Output options](#output-options)\n\nThe following options affect the output behavior.\n\n#### [`-q`, `--quiet`](#-q---quiet)\n\nDisplays one character per test instead of one line per test. This is an alias for [`--format=terse`](#--format-format).\n\n#### [`--nocapture`](#--nocapture)\n\nDoes not capture the stdout and stderr of the test, and allows tests to print to the console. Usually the output is captured, and only displayed if the test fails.\n\nThis may also be specified by setting the `RUST_TEST_NOCAPTURE` environment variable to anything but `0`.\n\n#### [`--show-output`](#--show-output)\n\nDisplays the stdout and stderr of successful tests after all tests have run.\n\nContrast this with [`--nocapture`](#--nocapture) which allows tests to print _while they are running_, which can cause interleaved output if there are multiple tests running in parallel, `--show-output` ensures the output is contiguous, but requires waiting for all tests to finish.\n\n#### [`--color` _COLOR_](#--color-color)\n\nControl when colored terminal output is used. Valid options:\n\n-   `auto`: Colorize if stdout is a tty and [`--nocapture`](#--nocapture) is not used. This is the default.\n-   `always`: Always colorize the output.\n-   `never`: Never colorize the output.\n\n#### [`--format` _FORMAT_](#--format-format)\n\nControls the format of the output. Valid options:\n\n-   `pretty`: This is the default format, with one line per test.\n-   `terse`: Displays only a single character per test. [`--quiet`](#-q---quiet) is an alias for this option.\n-   `json`: Emits JSON objects, one per line. ‚ö†Ô∏è üöß This option is [unstable](#unstable-options), and requires the `-Z unstable-options` flag. See [tracking issue #49359](https://github.com/rust-lang/rust/issues/49359) for more information.\n\n#### [`--logfile` _PATH_](#--logfile-path)\n\nWrites the results of the tests to the given file.\n\n#### [`--report-time`](#--report-time)\n\n‚ö†Ô∏è üöß This option is [unstable](#unstable-options), and requires the `-Z unstable-options` flag. See [tracking issue #64888](https://github.com/rust-lang/rust/issues/64888) and the [unstable docs](../../unstable-book/compiler-flags/report-time.html) for more information.\n\n### [Unstable options](#unstable-options)\n\nSome CLI options are added in an \"unstable\" state, where they are intended for experimentation and testing to determine if the option works correctly, has the right design, and is useful. The option may not work correctly, break, or change at any time. To signal that you acknowledge that you are using an unstable option, they require passing the `-Z unstable-options` command-line flag.\n\n## [Benchmarks](#benchmarks)\n\nThe libtest harness supports running benchmarks for functions annotated with the `#[bench]` attribute. Benchmarks are currently unstable, and only available on the [nightly channel](../../book/appendix-07-nightly-rust.html). More information may be found in the [unstable book](../../unstable-book/library-features/test.html).\n\n## [Custom test frameworks](#custom-test-frameworks)\n\nExperimental support for using custom test harnesses is available on the [nightly channel](../../book/appendix-07-nightly-rust.html). See [tracking issue #50297](https://github.com/rust-lang/rust/issues/50297) and the [custom\\_test\\_frameworks documentation](../../unstable-book/language-features/custom-test-frameworks.html) for more information.",
	"html": "<!DOCTYPE html><html lang=\"en\" class=\"light\" dir=\"ltr\"><head>\n        <!-- Book generated using mdBook -->\n        <meta charset=\"UTF-8\">\n        <title>Tests - The rustc book</title>\n\n\n        <!-- Custom HTML head -->\n        \n        <meta name=\"description\" content=\"\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <meta name=\"theme-color\" content=\"rgb(255, 255, 255)\">\n\n        <link rel=\"icon\" href=\"../favicon.svg\">\n        <link rel=\"shortcut icon\" href=\"../favicon.png\">\n        <link rel=\"stylesheet\" href=\"../css/variables.css\">\n        <link rel=\"stylesheet\" href=\"../css/general.css\">\n        <link rel=\"stylesheet\" href=\"../css/chrome.css\">\n        <link rel=\"stylesheet\" href=\"../css/print.css\" media=\"print\">\n\n        <!-- Fonts -->\n        <link rel=\"stylesheet\" href=\"../FontAwesome/css/font-awesome.css\">\n        <link rel=\"stylesheet\" href=\"../fonts/fonts.css\">\n\n        <!-- Highlight.js Stylesheets -->\n        <link rel=\"stylesheet\" href=\"../highlight.css\">\n        <link rel=\"stylesheet\" href=\"../tomorrow-night.css\" disabled=\"\">\n        <link rel=\"stylesheet\" href=\"../ayu-highlight.css\" disabled=\"\">\n\n        <!-- Custom theme stylesheets -->\n\n    </head>\n    <body class=\"js sidebar-visible\">\n    <div id=\"body-container\">\n        <!-- Provide site root to javascript -->\n        <script>\n            var path_to_root = \"../\";\n            var default_theme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"navy\" : \"light\";\n        </script>\n\n        <!-- Work around some values being stored in localStorage wrapped in quotes -->\n        <script>\n            try {\n                var theme = localStorage.getItem('mdbook-theme');\n                var sidebar = localStorage.getItem('mdbook-sidebar');\n\n                if (theme.startsWith('\"') && theme.endsWith('\"')) {\n                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));\n                }\n\n                if (sidebar.startsWith('\"') && sidebar.endsWith('\"')) {\n                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));\n                }\n            } catch (e) { }\n        </script>\n\n        <!-- Set the theme before any content is loaded, prevents flash -->\n        <script>\n            var theme;\n            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }\n            if (theme === null || theme === undefined) { theme = default_theme; }\n            var html = document.querySelector('html');\n            html.classList.remove('light')\n            html.classList.add(theme);\n            var body = document.querySelector('body');\n            body.classList.remove('no-js')\n            body.classList.add('js');\n        </script>\n\n        <input type=\"checkbox\" id=\"sidebar-toggle-anchor\" class=\"hidden\">\n\n        <!-- Hide / unhide sidebar before it is displayed -->\n        <script>\n            var body = document.querySelector('body');\n            var sidebar = null;\n            var sidebar_toggle = document.getElementById(\"sidebar-toggle-anchor\");\n            if (document.body.clientWidth >= 1080) {\n                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }\n                sidebar = sidebar || 'visible';\n            } else {\n                sidebar = 'hidden';\n            }\n            sidebar_toggle.checked = sidebar === 'visible';\n            body.classList.remove('sidebar-visible');\n            body.classList.add(\"sidebar-\" + sidebar);\n        </script>\n\n        <nav id=\"sidebar\" class=\"sidebar\" aria-label=\"Table of contents\" aria-hidden=\"false\">\n            <div class=\"sidebar-scrollbox\">\n                <ol class=\"chapter\"><li class=\"chapter-item expanded \"><a href=\"../what-is-rustc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.</strong> What is rustc?</a></li><li class=\"chapter-item expanded \"><a href=\"../command-line-arguments.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.</strong> Command-line Arguments</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../codegen-options/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.1.</strong> Codegen Options</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../jobserver.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.</strong> Jobserver</a></li><li class=\"chapter-item expanded \"><a href=\"../lints/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.</strong> Lints</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../lints/levels.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.</strong> Lint Levels</a></li><li class=\"chapter-item expanded \"><a href=\"../lints/groups.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.</strong> Lint Groups</a></li><li class=\"chapter-item expanded \"><a href=\"../lints/listing/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.</strong> Lint Listing</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../lints/listing/allowed-by-default.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.1.</strong> Allowed-by-default Lints</a></li><li class=\"chapter-item expanded \"><a href=\"../lints/listing/warn-by-default.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.2.</strong> Warn-by-default Lints</a></li><li class=\"chapter-item expanded \"><a href=\"../lints/listing/deny-by-default.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.3.</strong> Deny-by-default Lints</a></li></ol></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../json.html\" tabindex=\"0\"><strong aria-hidden=\"true\">5.</strong> JSON Output</a></li><li class=\"chapter-item expanded \"><a href=\"../tests/index.html\" class=\"active\" tabindex=\"0\"><strong aria-hidden=\"true\">6.</strong> Tests</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.</strong> Platform Support</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../target-tier-policy.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.1.</strong> Target Tier Policy</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/TEMPLATE.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.2.</strong> Template for Target-specific Documentation</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/arm64ec-pc-windows-msvc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.3.</strong> arm64ec-pc-windows-msvc</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/apple-darwin.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.</strong> *-apple-darwin</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../platform-support/i686-apple-darwin.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.1.</strong> i686-apple-darwin</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/x86_64h-apple-darwin.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.2.</strong> x86_64h-apple-darwin</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/arm64e-apple-darwin.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.3.</strong> arm64e-apple-darwin</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/apple-ios.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.5.</strong> *-apple-ios</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../platform-support/apple-ios-macabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.5.1.</strong> *-apple-ios-macabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/arm64e-apple-ios.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.5.2.</strong> arm64e-apple-ios</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/apple-tvos.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.6.</strong> *-apple-tvos</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/apple-watchos.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.7.</strong> *-apple-watchos</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/apple-visionos.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.8.</strong> *-apple-visionos</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/aarch64-nintendo-switch-freestanding.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.9.</strong> aarch64-nintendo-switch-freestanding</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/armeb-unknown-linux-gnueabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.10.</strong> armeb-unknown-linux-gnueabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/arm-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.</strong> arm-none-eabi</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../platform-support/armv4t-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.1.</strong> armv4t-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/armv5te-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.2.</strong> armv5te-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/armv7r-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.3.</strong> armv7r-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/armv8r-none-eabihf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.4.</strong> armv8r-none-eabihf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/thumbv6m-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.5.</strong> thumbv6m-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/thumbv7em-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.6.</strong> thumbv7em-none-eabi*</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/thumbv7m-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.7.</strong> thumbv7m-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/thumbv8m.base-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.8.</strong> thumbv8m.base-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/thumbv8m.main-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.9.</strong> thumbv8m.main-none-eabi*</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/armv6k-nintendo-3ds.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.12.</strong> armv6k-nintendo-3ds</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/armv7-sony-vita-newlibeabihf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.13.</strong> armv7-sony-vita-newlibeabihf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/armv7-unknown-linux-uclibceabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.14.</strong> armv7-unknown-linux-uclibceabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/armv7-unknown-linux-uclibceabihf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.15.</strong> armv7-unknown-linux-uclibceabihf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/android.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.16.</strong> *-android and *-androideabi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/openharmony.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.17.</strong> *-linux-ohos</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/hurd.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.18.</strong> *-hurd-gnu</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/aarch64-unknown-teeos.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.19.</strong> aarch64-unknown-teeos</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/esp-idf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.20.</strong> *-esp-espidf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/fuchsia.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.21.</strong> *-unknown-fuchsia</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/kmc-solid.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.22.</strong> *-kmc-solid_*</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/csky-unknown-linux-gnuabiv2.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.23.</strong> csky-unknown-linux-gnuabiv2*</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/hexagon-unknown-linux-musl.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.24.</strong> hexagon-unknown-linux-musl</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/hexagon-unknown-none-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.25.</strong> hexagon-unknown-none-elf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/loongarch-linux.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.26.</strong> loongarch*-unknown-linux-*</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/loongarch-none.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.27.</strong> loongarch*-unknown-none*</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/m68k-unknown-linux-gnu.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.28.</strong> m68k-unknown-linux-gnu</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/mips64-openwrt-linux-musl.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.29.</strong> mips64-openwrt-linux-musl</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/mipsel-sony-psx.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.30.</strong> mipsel-sony-psx</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/mips-release-6.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.31.</strong> mipsisa*r6*-unknown-linux-gnu*</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/nvptx64-nvidia-cuda.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.32.</strong> nvptx64-nvidia-cuda</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/aix.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.33.</strong> powerpc64-ibm-aix</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/riscv32im-risc0-zkvm-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.34.</strong> riscv32im-risc0-zkvm-elf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/riscv32imac-unknown-xous-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.35.</strong> riscv32imac-unknown-xous-elf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/riscv32-unknown-none-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.36.</strong> riscv32*-unknown-none-elf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/sparc-unknown-none-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.37.</strong> sparc-unknown-none-elf</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/pc-windows-gnullvm.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.38.</strong> *-pc-windows-gnullvm</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/nto-qnx.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.39.</strong> *-nto-qnx-*</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/unikraft-linux-musl.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.40.</strong> *-unikraft-linux-musl</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/hermit.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.41.</strong> *-unknown-hermit</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/netbsd.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.42.</strong> *-unknown-netbsd*</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/openbsd.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.43.</strong> *-unknown-openbsd</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/unknown-uefi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.44.</strong> *-unknown-uefi</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/wasm32-wasip1.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.45.</strong> wasm32-wasip1</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/wasm32-wasip1-threads.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.46.</strong> wasm32-wasip1-threads</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/wasm32-wasip2.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.47.</strong> wasm32-wasip2</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/wasm64-unknown-unknown.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.48.</strong> wasm64-unknown-unknown</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/win7-windows-msvc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.49.</strong> *-win7-windows-msvc</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/x86_64-fortanix-unknown-sgx.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.50.</strong> x86_64-fortanix-unknown-sgx</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/x86_64-unknown-linux-none.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.51.</strong> x86_64-unknown-linux-none.md</a></li><li class=\"chapter-item expanded \"><a href=\"../platform-support/x86_64-unknown-none.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.52.</strong> x86_64-unknown-none</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../targets/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.</strong> Targets</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../targets/built-in.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.1.</strong> Built-in Targets</a></li><li class=\"chapter-item expanded \"><a href=\"../targets/custom.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.</strong> Custom Targets</a></li><li class=\"chapter-item expanded \"><a href=\"../targets/known-issues.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.3.</strong> Known Issues</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../profile-guided-optimization.html\" tabindex=\"0\"><strong aria-hidden=\"true\">9.</strong> Profile-guided Optimization</a></li><li class=\"chapter-item expanded \"><a href=\"../instrument-coverage.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.</strong> Instrumentation-based Code Coverage</a></li><li class=\"chapter-item expanded \"><a href=\"../linker-plugin-lto.html\" tabindex=\"0\"><strong aria-hidden=\"true\">11.</strong> Linker-plugin-based LTO</a></li><li class=\"chapter-item expanded \"><a href=\"../check-cfg.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.</strong> Checking Conditional Configurations</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../check-cfg/cargo-specifics.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.1.</strong> Cargo Specifics</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../exploit-mitigations.html\" tabindex=\"0\"><strong aria-hidden=\"true\">13.</strong> Exploit Mitigations</a></li><li class=\"chapter-item expanded \"><a href=\"../symbol-mangling/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">14.</strong> Symbol Mangling</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../symbol-mangling/v0.html\" tabindex=\"0\"><strong aria-hidden=\"true\">14.1.</strong> v0 Symbol Format</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../contributing.html\" tabindex=\"0\"><strong aria-hidden=\"true\">15.</strong> Contributing to rustc</a></li></ol>\n            </div>\n            <div id=\"sidebar-resize-handle\" class=\"sidebar-resize-handle\">\n                <div class=\"sidebar-resize-indicator\"></div>\n            </div>\n        </nav>\n\n        <!-- Track and set sidebar scroll position -->\n        <script>\n            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');\n            sidebarScrollbox.addEventListener('click', function(e) {\n                if (e.target.tagName === 'A') {\n                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);\n                }\n            }, { passive: true });\n            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');\n            sessionStorage.removeItem('sidebar-scroll');\n            if (sidebarScrollTop) {\n                // preserve sidebar scroll position when navigating via links within sidebar\n                sidebarScrollbox.scrollTop = sidebarScrollTop;\n            } else {\n                // scroll sidebar to current active section when navigating via \"next/previous chapter\" buttons\n                var activeSection = document.querySelector('#sidebar .active');\n                if (activeSection) {\n                    activeSection.scrollIntoView({ block: 'center' });\n                }\n            }\n        </script>\n\n        <div id=\"page-wrapper\" class=\"page-wrapper\">\n\n            <div class=\"page\">\n                                <div id=\"menu-bar-hover-placeholder\"></div>\n                <div id=\"menu-bar\" class=\"menu-bar\" style=\"top: 0px;\">\n                    <div class=\"left-buttons\">\n                        <label id=\"sidebar-toggle\" class=\"icon-button\" for=\"sidebar-toggle-anchor\" title=\"Toggle Table of Contents\" aria-label=\"Toggle Table of Contents\" aria-controls=\"sidebar\" aria-expanded=\"true\">\n                            <i class=\"fa fa-bars\"></i>\n                        </label>\n                        <button id=\"theme-toggle\" class=\"icon-button\" type=\"button\" title=\"Change theme\" aria-label=\"Change theme\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-controls=\"theme-list\">\n                            <i class=\"fa fa-paint-brush\"></i>\n                        </button>\n                        <ul id=\"theme-list\" class=\"theme-popup\" aria-label=\"Themes\" role=\"menu\">\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme theme-selected\" id=\"light\">Light</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"rust\">Rust</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"coal\">Coal</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"navy\">Navy</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"ayu\">Ayu</button></li>\n                        </ul>\n                        <button id=\"search-toggle\" class=\"icon-button\" type=\"button\" title=\"Search. (Shortkey: s)\" aria-label=\"Toggle Searchbar\" aria-expanded=\"false\" aria-keyshortcuts=\"S\" aria-controls=\"searchbar\">\n                            <i class=\"fa fa-search\"></i>\n                        </button>\n                    </div>\n\n                    <h1 class=\"menu-title\">The rustc book</h1>\n\n                    <div class=\"right-buttons\">\n                        <a href=\"../print.html\" title=\"Print this book\" aria-label=\"Print this book\">\n                            <i id=\"print-button\" class=\"fa fa-print\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/rust/tree/master/src/doc/rustc\" title=\"Git repository\" aria-label=\"Git repository\">\n                            <i id=\"git-repository-button\" class=\"fa fa-github\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/rust/edit/master/src/doc/rustc/src/tests/index.md\" title=\"Suggest an edit\" aria-label=\"Suggest an edit\">\n                            <i id=\"git-edit-button\" class=\"fa fa-edit\"></i>\n                        </a>\n\n                    </div>\n                </div>\n\n                <div id=\"search-wrapper\" class=\"hidden\">\n                    <form id=\"searchbar-outer\" class=\"searchbar-outer\">\n                        <input type=\"search\" id=\"searchbar\" name=\"searchbar\" placeholder=\"Search this book ...\" aria-controls=\"searchresults-outer\" aria-describedby=\"searchresults-header\">\n                    </form>\n                    <div id=\"searchresults-outer\" class=\"searchresults-outer hidden\">\n                        <div id=\"searchresults-header\" class=\"searchresults-header\"></div>\n                        <ul id=\"searchresults\">\n                        </ul>\n                    </div>\n                </div>\n\n                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->\n                <script>\n                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');\n                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');\n                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {\n                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);\n                    });\n                </script>\n\n                <div id=\"content\" class=\"content\">\n                    <main>\n                        <h1 id=\"tests\"><a class=\"header\" href=\"#tests\">Tests</a></h1>\n<p><code class=\"hljs\">rustc</code> has a built-in facility for building and running tests for a crate.\nMore information about writing and running tests may be found in the <a href=\"../../book/ch11-00-testing.html\">Testing\nChapter</a> of the Rust Programming Language book.</p>\n<p>Tests are written as free functions with the <a href=\"../../reference/attributes/testing.html#the-test-attribute\"><code class=\"hljs\">#[test]</code>\nattribute</a>. For example:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-rust hljs\"><span class=\"hljs-meta\">#[test]</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">it_works</span></span>() {\n    <span class=\"hljs-built_in\">assert_eq!</span>(<span class=\"hljs-number\">2</span> + <span class=\"hljs-number\">2</span>, <span class=\"hljs-number\">4</span>);\n}</code></pre>\n<p>Tests \"pass\" if they return without an error. They \"fail\" if they <a href=\"../../book/ch09-01-unrecoverable-errors-with-panic.html\">panic</a>, or\nreturn a type such as <a href=\"../../std/result/index.html\"><code class=\"hljs\">Result</code></a> that implements the <a href=\"../../std/process/trait.Termination.html\"><code class=\"hljs\">Termination</code></a> trait\nwith a non-zero value.</p>\n<p>By passing the <a href=\"../command-line-arguments.html#option-test\"><code class=\"hljs\">--test</code> option</a> to <code class=\"hljs\">rustc</code>, the compiler will build the crate\nin a special mode to construct an executable that will run the tests in the\ncrate. The <code class=\"hljs\">--test</code> flag will make the following changes:</p>\n<ul>\n<li>The crate will be built as a <code class=\"hljs\">bin</code> <a href=\"../../reference/linkage.html\">crate type</a>, forcing it to be an\nexecutable.</li>\n<li>Links the executable with <a href=\"../../test/index.html\"><code class=\"hljs\">libtest</code></a>, the test harness that is part of the\nstandard library, which handles running the tests.</li>\n<li>Synthesizes a <a href=\"../../reference/crates-and-source-files.html#main-functions\"><code class=\"hljs\">main</code> function</a> which will process command-line arguments\nand run the tests. This new <code class=\"hljs\">main</code> function will replace any existing <code class=\"hljs\">main</code>\nfunction as the entry point of the executable, though the existing <code class=\"hljs\">main</code>\nwill still be compiled.</li>\n<li>Enables the <a href=\"../../reference/conditional-compilation.html#test\"><code class=\"hljs\">test</code> cfg option</a>, which allows your code to use conditional\ncompilation to detect if it is being built as a test.</li>\n<li>Enables building of functions annotated with the <a href=\"../../reference/attributes/testing.html#the-test-attribute\"><code class=\"hljs\">test</code></a>\nand <a href=\"#benchmarks\"><code class=\"hljs\">bench</code></a> attributes, which will be run by the test\nharness.</li>\n</ul>\n<p>After the executable is created, you can run it to execute the tests and\nreceive a report on what passes and fails. If you are using <a href=\"../../cargo/index.html\">Cargo</a> to manage\nyour project, it has a built-in <a href=\"../../cargo/commands/cargo-test.html\"><code class=\"hljs\">cargo test</code></a> command which handles all of\nthis automatically. An example of the output looks like this:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-text hljs plaintext\">running 4 tests\ntest it_works ... ok\ntest check_valid_args ... ok\ntest invalid_characters ... ok\ntest walks_the_dog ... ok\n\ntest result: ok. 4 passed; 0 failed; 0 ignored; 0 measured; 0 filtered out; finished in 0.00s\n</code></pre>\n<blockquote>\n<p><strong>Note</strong>: Tests must be built with the <a href=\"../../book/ch09-01-unrecoverable-errors-with-panic.html\"><code class=\"hljs\">unwind</code> panic\nstrategy</a>. This is because all tests run in the same\nprocess, and they are intended to catch panics, which is not possible with\nthe <code class=\"hljs\">abort</code> strategy. See the unstable <a href=\"https://github.com/rust-lang/rust/issues/67650\"><code class=\"hljs\">-Z panic-abort-tests</code></a> option for\nexperimental support of the <code class=\"hljs\">abort</code> strategy by spawning tests in separate\nprocesses.</p>\n</blockquote>\n<h2 id=\"test-attributes\"><a class=\"header\" href=\"#test-attributes\">Test attributes</a></h2>\n<p>Tests are indicated using attributes on free functions. The following\nattributes are used for testing, see the linked documentation for more\ndetails:</p>\n<ul>\n<li><a href=\"../../reference/attributes/testing.html#the-test-attribute\"><code class=\"hljs\">#[test]</code></a> ‚Äî&nbsp;Indicates a function is a test to be run.</li>\n<li><code class=\"hljs\">#[bench]</code> ‚Äî&nbsp;Indicates a function is a benchmark to be\nrun. Benchmarks are currently unstable and only available in the nightly\nchannel, see the <a href=\"../../unstable-book/library-features/test.html\">unstable docs</a> for more details.</li>\n<li><a href=\"../../reference/attributes/testing.html#the-should_panic-attribute\"><code class=\"hljs\">#[should_panic]</code></a> ‚Äî&nbsp;Indicates that the test\nfunction will only pass if the function <a href=\"../../book/ch09-01-unrecoverable-errors-with-panic.html\">panics</a>.</li>\n<li><a href=\"../../reference/attributes/testing.html#the-ignore-attribute\"><code class=\"hljs\">#[ignore]</code></a> ‚Äî&nbsp;Indicates that the test function will be\ncompiled, but not run by default. See the <a href=\"#--ignored\"><code class=\"hljs\">--ignored</code></a> and\n<a href=\"#--include-ignored\"><code class=\"hljs\">--include-ignored</code></a> options to run these tests.</li>\n</ul>\n<h2 id=\"cli-arguments\"><a class=\"header\" href=\"#cli-arguments\">CLI arguments</a></h2>\n<p>The libtest harness has several command-line arguments to control its\nbehavior.</p>\n<blockquote>\n<p>Note: When running with <a href=\"../../cargo/commands/cargo-test.html\"><code class=\"hljs\">cargo test</code></a>, the libtest CLI arguments must be\npassed after the <code class=\"hljs\">--</code> argument to differentiate between flags for Cargo and\nthose for the harness. For example: <code class=\"hljs\">cargo test -- --nocapture</code></p>\n</blockquote>\n<h3 id=\"filters\"><a class=\"header\" href=\"#filters\">Filters</a></h3>\n<p>Positional arguments (those without a <code class=\"hljs\">-</code> prefix) are treated as filters which\nwill only run tests whose name matches one of those strings. The filter will\nmatch any substring found in the full path of the test function. For example,\nif the test function <code class=\"hljs\">it_works</code> is located in the module\n<code class=\"hljs\">utils::paths::tests</code>, then any of the filters <code class=\"hljs\">works</code>, <code class=\"hljs\">path</code>, <code class=\"hljs\">utils::</code>, or\n<code class=\"hljs\">utils::paths::tests::it_works</code> will match that test.</p>\n<p>See <a href=\"#selection-options\">Selection options</a> for more options to control which\ntests are run.</p>\n<h3 id=\"action-options\"><a class=\"header\" href=\"#action-options\">Action options</a></h3>\n<p>The following options perform different actions other than running tests.</p>\n<h4 id=\"--list\"><a class=\"header\" href=\"#--list\"><code>--list</code></a></h4>\n<p>Prints a list of all tests and benchmarks. Does not run any of the tests.\n<a href=\"#filters\">Filters</a> can be used to list only matching tests.</p>\n<h4 id=\"-h---help\"><a class=\"header\" href=\"#-h---help\"><code>-h</code>, <code>--help</code></a></h4>\n<p>Displays usage information and command-line options.</p>\n<h3 id=\"selection-options\"><a class=\"header\" href=\"#selection-options\">Selection options</a></h3>\n<p>The following options change how tests are selected.</p>\n<h4 id=\"--test\"><a class=\"header\" href=\"#--test\"><code>--test</code></a></h4>\n<p>This is the default mode where all tests will be run as well as running all\nbenchmarks with only a single iteration (to ensure the benchmark works,\nwithout taking the time to actually perform benchmarking). This can be\ncombined with the <code class=\"hljs\">--bench</code> flag to run both tests and perform full\nbenchmarking.</p>\n<h4 id=\"--bench\"><a class=\"header\" href=\"#--bench\"><code>--bench</code></a></h4>\n<p>This runs in a mode where tests are ignored, and only runs benchmarks. This\ncan be combined with <code class=\"hljs\">--test</code> to run both benchmarks and tests.</p>\n<h4 id=\"--exact\"><a class=\"header\" href=\"#--exact\"><code>--exact</code></a></h4>\n<p>This forces <a href=\"#filters\">filters</a> to match the full path of the test exactly.\nFor example, if the test <code class=\"hljs\">it_works</code> is in the module <code class=\"hljs\">utils::paths::tests</code>,\nthen only the string <code class=\"hljs\">utils::paths::tests::it_works</code> will match that test.</p>\n<h4 id=\"--skip-filter\"><a class=\"header\" href=\"#--skip-filter\"><code>--skip</code> <em>FILTER</em></a></h4>\n<p>Skips any tests whose name contains the given <em>FILTER</em> string. This flag may\nbe passed multiple times.</p>\n<h4 id=\"--ignored\"><a class=\"header\" href=\"#--ignored\"><code>--ignored</code></a></h4>\n<p>Runs only tests that are marked with the <a href=\"../../reference/attributes/testing.html#the-ignore-attribute\"><code class=\"hljs\">ignore</code>\nattribute</a>.</p>\n<h4 id=\"--include-ignored\"><a class=\"header\" href=\"#--include-ignored\"><code>--include-ignored</code></a></h4>\n<p>Runs both <a href=\"#--ignored\">ignored</a> and non-ignored tests.</p>\n<h4 id=\"--exclude-should-panic\"><a class=\"header\" href=\"#--exclude-should-panic\"><code>--exclude-should-panic</code></a></h4>\n<p>Excludes tests marked with the <a href=\"../../reference/attributes/testing.html#the-should_panic-attribute\"><code class=\"hljs\">should_panic</code>\nattribute</a>.</p>\n<p>‚ö†Ô∏è üöß This option is <a href=\"#unstable-options\">unstable</a>, and requires the <code class=\"hljs\">-Z unstable-options</code> flag. See <a href=\"https://github.com/rust-lang/rust/issues/82348\">tracking issue\n#82348</a> for more information.</p>\n<h3 id=\"execution-options\"><a class=\"header\" href=\"#execution-options\">Execution options</a></h3>\n<p>The following options affect how tests are executed.</p>\n<h4 id=\"--test-threads-num_threads\"><a class=\"header\" href=\"#--test-threads-num_threads\"><code>--test-threads</code> <em>NUM_THREADS</em></a></h4>\n<p>Sets the number of threads to use for running tests in parallel. By default,\nuses the amount of concurrency available on the hardware as indicated by\n<a href=\"../../std/thread/fn.available_parallelism.html\"><code class=\"hljs\">available_parallelism</code></a>.</p>\n<p>This can also be specified with the <code class=\"hljs\">RUST_TEST_THREADS</code> environment variable.</p>\n<h4 id=\"--force-run-in-process\"><a class=\"header\" href=\"#--force-run-in-process\"><code>--force-run-in-process</code></a></h4>\n<p>Forces the tests to run in a single process when using the <a href=\"../../book/ch09-01-unrecoverable-errors-with-panic.html\"><code class=\"hljs\">abort</code> panic\nstrategy</a>.</p>\n<p>‚ö†Ô∏è üöß This only works with the unstable <a href=\"https://github.com/rust-lang/rust/issues/67650\"><code class=\"hljs\">-Z panic-abort-tests</code></a> option, and\nrequires the <code class=\"hljs\">-Z unstable-options</code> flag. See <a href=\"https://github.com/rust-lang/rust/issues/67650\">tracking issue\n#67650</a> for more information.</p>\n<h4 id=\"--ensure-time\"><a class=\"header\" href=\"#--ensure-time\"><code>--ensure-time</code></a></h4>\n<p>‚ö†Ô∏è üöß This option is <a href=\"#unstable-options\">unstable</a>, and requires the <code class=\"hljs\">-Z unstable-options</code> flag. See <a href=\"https://github.com/rust-lang/rust/issues/64888\">tracking issue\n#64888</a> and the <a href=\"../../unstable-book/compiler-flags/report-time.html\">unstable\ndocs</a> for more information.</p>\n<h4 id=\"--shuffle\"><a class=\"header\" href=\"#--shuffle\"><code>--shuffle</code></a></h4>\n<p>Runs the tests in random order, as opposed to the default alphabetical order.</p>\n<p>This may also be specified by setting the <code class=\"hljs\">RUST_TEST_SHUFFLE</code> environment\nvariable to anything but <code class=\"hljs\">0</code>.</p>\n<p>The random number generator seed that is output can be passed to\n<a href=\"#--shuffle-seed-seed\"><code class=\"hljs\">--shuffle-seed</code></a> to run the tests in the same order\nagain.</p>\n<p>Note that <code class=\"hljs\">--shuffle</code> does not affect whether the tests are run in parallel. To\nrun the tests in random order sequentially, use <code class=\"hljs\">--shuffle --test-threads 1</code>.</p>\n<p>‚ö†Ô∏è üöß This option is <a href=\"#unstable-options\">unstable</a>, and requires the <code class=\"hljs\">-Z unstable-options</code> flag. See <a href=\"https://github.com/rust-lang/rust/issues/89583\">tracking issue\n#89583</a> for more information.</p>\n<h4 id=\"--shuffle-seed-seed\"><a class=\"header\" href=\"#--shuffle-seed-seed\"><code>--shuffle-seed</code> <em>SEED</em></a></h4>\n<p>Like <a href=\"#--shuffle\"><code class=\"hljs\">--shuffle</code></a>, but seeds the random number generator with\n<em>SEED</em>. Thus, calling the test harness with <code class=\"hljs\">--shuffle-seed</code> <em>SEED</em> twice runs\nthe tests in the same order both times.</p>\n<p><em>SEED</em> is any 64-bit unsigned integer, for example, one produced by\n<a href=\"#--shuffle\"><code class=\"hljs\">--shuffle</code></a>.</p>\n<p>This can also be specified with the <code class=\"hljs\">RUST_TEST_SHUFFLE_SEED</code> environment\nvariable.</p>\n<p>‚ö†Ô∏è üöß This option is <a href=\"#unstable-options\">unstable</a>, and requires the <code class=\"hljs\">-Z unstable-options</code> flag. See <a href=\"https://github.com/rust-lang/rust/issues/89583\">tracking issue\n#89583</a> for more information.</p>\n<h3 id=\"output-options\"><a class=\"header\" href=\"#output-options\">Output options</a></h3>\n<p>The following options affect the output behavior.</p>\n<h4 id=\"-q---quiet\"><a class=\"header\" href=\"#-q---quiet\"><code>-q</code>, <code>--quiet</code></a></h4>\n<p>Displays one character per test instead of one line per test. This is an alias\nfor <a href=\"#--format-format\"><code class=\"hljs\">--format=terse</code></a>.</p>\n<h4 id=\"--nocapture\"><a class=\"header\" href=\"#--nocapture\"><code>--nocapture</code></a></h4>\n<p>Does not capture the stdout and stderr of the test, and allows tests to print\nto the console. Usually the output is captured, and only displayed if the test\nfails.</p>\n<p>This may also be specified by setting the <code class=\"hljs\">RUST_TEST_NOCAPTURE</code> environment\nvariable to anything but <code class=\"hljs\">0</code>.</p>\n<h4 id=\"--show-output\"><a class=\"header\" href=\"#--show-output\"><code>--show-output</code></a></h4>\n<p>Displays the stdout and stderr of successful tests after all tests have run.</p>\n<p>Contrast this with <a href=\"#--nocapture\"><code class=\"hljs\">--nocapture</code></a> which allows tests to print\n<em>while they are running</em>, which can cause interleaved output if there are\nmultiple tests running in parallel, <code class=\"hljs\">--show-output</code> ensures the output is\ncontiguous, but requires waiting for all tests to finish.</p>\n<h4 id=\"--color-color\"><a class=\"header\" href=\"#--color-color\"><code>--color</code> <em>COLOR</em></a></h4>\n<p>Control when colored terminal output is used. Valid options:</p>\n<ul>\n<li><code class=\"hljs\">auto</code>: Colorize if stdout is a tty and <a href=\"#--nocapture\"><code class=\"hljs\">--nocapture</code></a> is not\nused. This is the default.</li>\n<li><code class=\"hljs\">always</code>: Always colorize the output.</li>\n<li><code class=\"hljs\">never</code>: Never colorize the output.</li>\n</ul>\n<h4 id=\"--format-format\"><a class=\"header\" href=\"#--format-format\"><code>--format</code> <em>FORMAT</em></a></h4>\n<p>Controls the format of the output. Valid options:</p>\n<ul>\n<li><code class=\"hljs\">pretty</code>: This is the default format, with one line per test.</li>\n<li><code class=\"hljs\">terse</code>: Displays only a single character per test. <a href=\"#-q---quiet\"><code class=\"hljs\">--quiet</code></a>\nis an alias for this option.</li>\n<li><code class=\"hljs\">json</code>: Emits JSON objects, one per line. ‚ö†Ô∏è üöß This option is\n<a href=\"#unstable-options\">unstable</a>, and requires the <code class=\"hljs\">-Z unstable-options</code> flag.\nSee <a href=\"https://github.com/rust-lang/rust/issues/49359\">tracking issue #49359</a>\nfor more information.</li>\n</ul>\n<h4 id=\"--logfile-path\"><a class=\"header\" href=\"#--logfile-path\"><code>--logfile</code> <em>PATH</em></a></h4>\n<p>Writes the results of the tests to the given file.</p>\n<h4 id=\"--report-time\"><a class=\"header\" href=\"#--report-time\"><code>--report-time</code></a></h4>\n<p>‚ö†Ô∏è üöß This option is <a href=\"#unstable-options\">unstable</a>, and requires the <code class=\"hljs\">-Z unstable-options</code> flag. See <a href=\"https://github.com/rust-lang/rust/issues/64888\">tracking issue\n#64888</a> and the <a href=\"../../unstable-book/compiler-flags/report-time.html\">unstable\ndocs</a> for more information.</p>\n<h3 id=\"unstable-options\"><a class=\"header\" href=\"#unstable-options\">Unstable options</a></h3>\n<p>Some CLI options are added in an \"unstable\" state, where they are intended for\nexperimentation and testing to determine if the option works correctly, has\nthe right design, and is useful. The option may not work correctly, break, or\nchange at any time. To signal that you acknowledge that you are using an\nunstable option, they require passing the <code class=\"hljs\">-Z unstable-options</code> command-line\nflag.</p>\n<h2 id=\"benchmarks\"><a class=\"header\" href=\"#benchmarks\">Benchmarks</a></h2>\n<p>The libtest harness supports running benchmarks for functions annotated with\nthe <code class=\"hljs\">#[bench]</code> attribute. Benchmarks are currently unstable, and only\navailable on the <a href=\"../../book/appendix-07-nightly-rust.html\">nightly channel</a>. More information may be found in the\n<a href=\"../../unstable-book/library-features/test.html\">unstable book</a>.</p>\n<h2 id=\"custom-test-frameworks\"><a class=\"header\" href=\"#custom-test-frameworks\">Custom test frameworks</a></h2>\n<p>Experimental support for using custom test harnesses is available on the\n<a href=\"../../book/appendix-07-nightly-rust.html\">nightly channel</a>. See <a href=\"https://github.com/rust-lang/rust/issues/50297\">tracking issue\n#50297</a> and the\n<a href=\"../../unstable-book/language-features/custom-test-frameworks.html\">custom_test_frameworks documentation</a> for more information.</p>\n\n                    </main>\n\n                    <nav class=\"nav-wrapper\" aria-label=\"Page navigation\">\n                        <!-- Mobile navigation buttons -->\n                            <a rel=\"prev\" href=\"../json.html\" class=\"mobile-nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                                <i class=\"fa fa-angle-left\"></i>\n                            </a>\n\n                            <a rel=\"next prefetch\" href=\"../platform-support.html\" class=\"mobile-nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                                <i class=\"fa fa-angle-right\"></i>\n                            </a>\n\n                        <div style=\"clear: both\"></div>\n                    </nav>\n                </div>\n            </div>\n\n            <nav class=\"nav-wide-wrapper\" aria-label=\"Page navigation\">\n                    <a rel=\"prev\" href=\"../json.html\" class=\"nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                        <i class=\"fa fa-angle-left\"></i>\n                    </a>\n\n                    <a rel=\"next prefetch\" href=\"../platform-support.html\" class=\"nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                        <i class=\"fa fa-angle-right\"></i>\n                    </a>\n            </nav>\n\n        </div>\n\n\n\n\n        <script>\n            window.playground_copyable = true;\n        </script>\n\n\n        <script src=\"../elasticlunr.min.js\"></script>\n        <script src=\"../mark.min.js\"></script>\n        <script src=\"../searcher.js\"></script>\n\n        <script src=\"../clipboard.min.js\"></script>\n        <script src=\"../highlight.js\"></script>\n        <script src=\"../book.js\"></script>\n\n        <!-- Custom JS scripts -->\n\n\n    </div>\n    \n\n</body></html>",
	"crawlDate": "2024-07-28T05:20:36.999Z"
}