{
	"title": "Checking Conditional Configurations - The rustc book",
	"url": "https://doc.rust-lang.org/rustc/check-cfg.html",
	"markdown": "# Checking Conditional Configurations - The rustc book\n\n`rustc` supports checking that every _reachable_[1](#reachable) `#[cfg]` matches a list of the expected config names and values.\n\nThis can help with verifying that the crate is correctly handling conditional compilation for different target platforms or features. It ensures that the cfg settings are consistent between what is intended and what is used, helping to catch potential bugs or errors early in the development process.\n\nIn order to accomplish that goal, `rustc` accepts the `--check-cfg` flag, which specifies whether to check conditions and how to check them.\n\n> **Note:** No implicit expectation is added when using `--cfg`. Users are expected to pass all expected names and values using the _check cfg specification_.\n\n## [Specifying expected names and values](#specifying-expected-names-and-values)\n\nTo specify expected names and values, the _check cfg specification_ provides the `cfg(...)` option which enables specifying for an expected config name and it's expected values.\n\nIt has this basic form:\n\n```bash\nrustc --check-cfg 'cfg(name, values(\"value1\", \"value2\", ... \"valueN\"))'\n\n```\n\nwhere `name` is a bare identifier (has no quotes) and each `\"value\"` term is a quoted literal string. `name` specifies the name of the condition, such as `feature` or `my_cfg`. `\"value\"` specify one of the value of that condition name.\n\nWhen the `cfg(...)` option is specified, `rustc` will check every[1](#reachable):\n\n-   `#[cfg(name = \"value\")]` attribute\n-   `#[cfg_attr(name = \"value\")]` attribute\n-   `#[link(name = \"a\", cfg(name = \"value\"))]` attribute\n-   `cfg!(name = \"value\")` macro call\n\n> _The command line `--cfg` arguments are currently NOT checked but may very well be checked in the future._\n\n`rustc` will check that the `\"value\"` specified is present in the list of expected values. If `\"value\"` is not in it, then `rustc` will report an `unexpected_cfgs` lint diagnostic. The default diagnostic level for this lint is `Warn`.\n\nTo check for the _none_ value (ie `#[cfg(foo)]`) one can use the `none()` predicate inside `values()`: `values(none())`. It can be followed or preceded by any number of `\"value\"`.\n\nTo enable checking of values, but to provide an _none_/empty set of expected values (ie. expect `#[cfg(name)]`), use these forms:\n\n```bash\nrustc --check-cfg 'cfg(name)'\nrustc --check-cfg 'cfg(name, values(none()))'\n\n```\n\nTo enable checking of name but not values, use one of these forms:\n\n-   No expected values (_will lint on every value of `name`_):\n    \n    ```bash\n    rustc --check-cfg 'cfg(name, values())'\n    \n    ```\n    \n-   Unknown expected values (_will never lint on value of `name`_):\n    \n    ```bash\n    rustc --check-cfg 'cfg(name, values(any()))'\n    \n    ```\n    \n\nTo avoid repeating the same set of values, use this form:\n\n```bash\nrustc --check-cfg 'cfg(name1, ..., nameN, values(\"value1\", \"value2\", ... \"valueN\"))'\n\n```\n\nTo enable checking without specifying any names or values, use this form:\n\n```bash\nrustc --check-cfg 'cfg()'\n\n```\n\nThe `--check-cfg cfg(...)` option can be repeated, both for the same condition name and for different names. If it is repeated for the same condition name, then the sets of values for that condition are merged together (precedence is given to `values(any())`).\n\n> To help out an equivalence table between `--cfg` arguments and `--check-cfg` is available [down below](#equivalence-table-with---cfg).\n\n## [Well known names and values](#well-known-names-and-values)\n\n`rustc` maintains a list of well-known names and their corresponding values in order to avoid the need to specify them manually.\n\nWell known names and values are implicitly added as long as at least one `--check-cfg` argument is present.\n\nAs of `2024-05-06T`, the list of known names is as follows:\n\n-   `clippy`\n-   `debug_assertions`\n-   `doc`\n-   `doctest`\n-   `miri`\n-   `overflow_checks`\n-   `panic`\n-   `proc_macro`\n-   `relocation_model`\n-   `rustfmt`\n-   `sanitize`\n-   `sanitizer_cfi_generalize_pointers`\n-   `sanitizer_cfi_normalize_integers`\n-   `target_abi`\n-   `target_arch`\n-   `target_endian`\n-   `target_env`\n-   `target_family`\n-   `target_feature`\n-   `target_has_atomic`\n-   `target_has_atomic_equal_alignment`\n-   `target_has_atomic_load_store`\n-   `target_os`\n-   `target_pointer_width`\n-   `target_thread_local`\n-   `target_vendor`\n-   `test`\n-   `ub_checks`\n-   `unix`\n-   `windows`\n\nLike with `values(any())`, well known names checking can be disabled by passing `cfg(any())` as argument to `--check-cfg`.\n\n## [Equivalence table with `--cfg`](#equivalence-table-with---cfg)\n\nThis table describe the equivalence between a `--cfg` argument to a `--check-cfg` argument.\n\n| `--cfg` | `--check-cfg` |\n| --- | --- |\n| _nothing_ | _nothing_ or `--check-cfg=cfg()` (to enable the checking) |\n| `--cfg foo` | `--check-cfg=cfg(foo)` or `--check-cfg=cfg(foo, values(none()))` |\n| `--cfg foo=\"\"` | `--check-cfg=cfg(foo, values(\"\"))` |\n| `--cfg foo=\"bar\"` | `--check-cfg=cfg(foo, values(\"bar\"))` |\n| `--cfg foo=\"1\" --cfg foo=\"2\"` | `--check-cfg=cfg(foo, values(\"1\", \"2\"))` |\n| `--cfg foo=\"1\" --cfg bar=\"2\"` | `--check-cfg=cfg(foo, values(\"1\")) --check-cfg=cfg(bar, values(\"2\"))` |\n| `--cfg foo --cfg foo=\"bar\"` | `--check-cfg=cfg(foo, values(none(), \"bar\"))` |\n\n## [Examples](#examples)\n\n### [Example: Cargo-like `feature` example](#example-cargo-like-feature-example)\n\nConsider this command line:\n\n```bash\nrustc --check-cfg 'cfg(feature, values(\"lion\", \"zebra\"))' \\\n      --cfg 'feature=\"lion\"' example.rs\n\n```\n\n> This command line indicates that this crate has two features: `lion` and `zebra`. The `lion` feature is enabled, while the `zebra` feature is disabled.\n\n```rust\n#[cfg(feature = \"lion\")]     // This condition is expected, as \"lion\" is an\n                             // expected value of `feature`\nfn tame_lion(lion: Lion) {}\n\n#[cfg(feature = \"zebra\")]    // This condition is expected, as \"zebra\" is an expected\n                             // value of `feature` but the condition will evaluate\n                             // to false since only --cfg feature=\"lion\" was passed\nfn ride_zebra(z: Zebra) {}\n\n#[cfg(feature = \"platypus\")] // This condition is UNEXPECTED, as \"platypus\" is NOT\n                             // an expected value of `feature` and will cause a\n                             // the compiler to emit the `unexpected_cfgs` lint\nfn poke_platypus() {}\n\n#[cfg(feechure = \"lion\")]    // This condition is UNEXPECTED, as 'feechure' is NOT\n                             // a expected condition name, no `cfg(feechure, ...)`\n                             // was passed in `--check-cfg`\nfn tame_lion() {}\n\n#[cfg(windows = \"unix\")]     // This condition is UNEXPECTED, as the well known\n                             // 'windows' cfg doesn't expect any values\nfn tame_windows() {}\n```\n\n### [Example: Multiple names and values](#example-multiple-names-and-values)\n\n```bash\nrustc --check-cfg 'cfg(is_embedded, has_feathers)' \\\n      --check-cfg 'cfg(feature, values(\"zapping\", \"lasers\"))' \\\n      --cfg has_feathers --cfg 'feature=\"zapping\"'\n\n```\n\n```rust\n#[cfg(is_embedded)]         // This condition is expected, as 'is_embedded' was\n                            // provided in --check-cfg and doesn't take any value\nfn do_embedded() {}\n\n#[cfg(has_feathers)]        // This condition is expected, as 'has_feathers' was\n                            // provided in --check-cfg and doesn't take any value\nfn do_features() {}\n\n#[cfg(has_mumble_frotz)]    // This condition is UNEXPECTED, as 'has_mumble_frotz'\n                            // was NEVER provided in any --check-cfg arguments\nfn do_mumble_frotz() {}\n\n#[cfg(feature = \"lasers\")]  // This condition is expected, as \"lasers\" is an\n                            // expected value of `feature`\nfn shoot_lasers() {}\n\n#[cfg(feature = \"monkeys\")] // This condition is UNEXPECTED, as \"monkeys\" is NOT\n                            // an expected value of `feature`\nfn write_shakespeare() {}\n```\n\n### [Example: Condition names without values](#example-condition-names-without-values)\n\n```bash\nrustc --check-cfg 'cfg(is_embedded, has_feathers, values(any()))' \\\n      --cfg has_feathers\n\n```\n\n```rust\n#[cfg(is_embedded)]      // This condition is expected, as 'is_embedded' was\n                         // provided in --check-cfg as condition name\nfn do_embedded() {}\n\n#[cfg(has_feathers)]     // This condition is expected, as \"has_feathers\" was\n                         // provided in --check-cfg as condition name\nfn do_features() {}\n\n#[cfg(has_feathers = \"zapping\")] // This condition is expected, as \"has_feathers\"\n                                 // was provided and because *any* values is\n                                 // expected for 'has_feathers' no\n                                 // warning is emitted for the value \"zapping\"\nfn do_zapping() {}\n\n#[cfg(has_mumble_frotz)] // This condition is UNEXPECTED, as 'has_mumble_frotz'\n                         // was not provided in any --check-cfg arguments\nfn do_mumble_frotz() {}\n```",
	"html": "<!DOCTYPE html><html lang=\"en\" class=\"light\" dir=\"ltr\"><head>\n        <!-- Book generated using mdBook -->\n        <meta charset=\"UTF-8\">\n        <title>Checking Conditional Configurations - The rustc book</title>\n\n\n        <!-- Custom HTML head -->\n        \n        <meta name=\"description\" content=\"\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <meta name=\"theme-color\" content=\"rgb(255, 255, 255)\">\n\n        <link rel=\"icon\" href=\"favicon.svg\">\n        <link rel=\"shortcut icon\" href=\"favicon.png\">\n        <link rel=\"stylesheet\" href=\"css/variables.css\">\n        <link rel=\"stylesheet\" href=\"css/general.css\">\n        <link rel=\"stylesheet\" href=\"css/chrome.css\">\n        <link rel=\"stylesheet\" href=\"css/print.css\" media=\"print\">\n\n        <!-- Fonts -->\n        <link rel=\"stylesheet\" href=\"FontAwesome/css/font-awesome.css\">\n        <link rel=\"stylesheet\" href=\"fonts/fonts.css\">\n\n        <!-- Highlight.js Stylesheets -->\n        <link rel=\"stylesheet\" href=\"highlight.css\">\n        <link rel=\"stylesheet\" href=\"tomorrow-night.css\" disabled=\"\">\n        <link rel=\"stylesheet\" href=\"ayu-highlight.css\" disabled=\"\">\n\n        <!-- Custom theme stylesheets -->\n\n    </head>\n    <body class=\"js sidebar-visible\">\n    <div id=\"body-container\">\n        <!-- Provide site root to javascript -->\n        <script>\n            var path_to_root = \"\";\n            var default_theme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"navy\" : \"light\";\n        </script>\n\n        <!-- Work around some values being stored in localStorage wrapped in quotes -->\n        <script>\n            try {\n                var theme = localStorage.getItem('mdbook-theme');\n                var sidebar = localStorage.getItem('mdbook-sidebar');\n\n                if (theme.startsWith('\"') && theme.endsWith('\"')) {\n                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));\n                }\n\n                if (sidebar.startsWith('\"') && sidebar.endsWith('\"')) {\n                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));\n                }\n            } catch (e) { }\n        </script>\n\n        <!-- Set the theme before any content is loaded, prevents flash -->\n        <script>\n            var theme;\n            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }\n            if (theme === null || theme === undefined) { theme = default_theme; }\n            var html = document.querySelector('html');\n            html.classList.remove('light')\n            html.classList.add(theme);\n            var body = document.querySelector('body');\n            body.classList.remove('no-js')\n            body.classList.add('js');\n        </script>\n\n        <input type=\"checkbox\" id=\"sidebar-toggle-anchor\" class=\"hidden\">\n\n        <!-- Hide / unhide sidebar before it is displayed -->\n        <script>\n            var body = document.querySelector('body');\n            var sidebar = null;\n            var sidebar_toggle = document.getElementById(\"sidebar-toggle-anchor\");\n            if (document.body.clientWidth >= 1080) {\n                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }\n                sidebar = sidebar || 'visible';\n            } else {\n                sidebar = 'hidden';\n            }\n            sidebar_toggle.checked = sidebar === 'visible';\n            body.classList.remove('sidebar-visible');\n            body.classList.add(\"sidebar-\" + sidebar);\n        </script>\n\n        <nav id=\"sidebar\" class=\"sidebar\" aria-label=\"Table of contents\" aria-hidden=\"false\">\n            <div class=\"sidebar-scrollbox\">\n                <ol class=\"chapter\"><li class=\"chapter-item expanded \"><a href=\"what-is-rustc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.</strong> What is rustc?</a></li><li class=\"chapter-item expanded \"><a href=\"command-line-arguments.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.</strong> Command-line Arguments</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"codegen-options/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.1.</strong> Codegen Options</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"jobserver.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.</strong> Jobserver</a></li><li class=\"chapter-item expanded \"><a href=\"lints/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.</strong> Lints</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"lints/levels.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.</strong> Lint Levels</a></li><li class=\"chapter-item expanded \"><a href=\"lints/groups.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.</strong> Lint Groups</a></li><li class=\"chapter-item expanded \"><a href=\"lints/listing/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.</strong> Lint Listing</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"lints/listing/allowed-by-default.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.1.</strong> Allowed-by-default Lints</a></li><li class=\"chapter-item expanded \"><a href=\"lints/listing/warn-by-default.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.2.</strong> Warn-by-default Lints</a></li><li class=\"chapter-item expanded \"><a href=\"lints/listing/deny-by-default.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.3.</strong> Deny-by-default Lints</a></li></ol></li></ol></li><li class=\"chapter-item expanded \"><a href=\"json.html\" tabindex=\"0\"><strong aria-hidden=\"true\">5.</strong> JSON Output</a></li><li class=\"chapter-item expanded \"><a href=\"tests/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.</strong> Tests</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.</strong> Platform Support</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"target-tier-policy.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.1.</strong> Target Tier Policy</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/TEMPLATE.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.2.</strong> Template for Target-specific Documentation</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/arm64ec-pc-windows-msvc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.3.</strong> arm64ec-pc-windows-msvc</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/apple-darwin.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.</strong> *-apple-darwin</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"platform-support/i686-apple-darwin.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.1.</strong> i686-apple-darwin</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/x86_64h-apple-darwin.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.2.</strong> x86_64h-apple-darwin</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/arm64e-apple-darwin.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.4.3.</strong> arm64e-apple-darwin</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"platform-support/apple-ios.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.5.</strong> *-apple-ios</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"platform-support/apple-ios-macabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.5.1.</strong> *-apple-ios-macabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/arm64e-apple-ios.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.5.2.</strong> arm64e-apple-ios</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"platform-support/apple-tvos.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.6.</strong> *-apple-tvos</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/apple-watchos.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.7.</strong> *-apple-watchos</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/apple-visionos.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.8.</strong> *-apple-visionos</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/aarch64-nintendo-switch-freestanding.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.9.</strong> aarch64-nintendo-switch-freestanding</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/armeb-unknown-linux-gnueabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.10.</strong> armeb-unknown-linux-gnueabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/arm-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.</strong> arm-none-eabi</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"platform-support/armv4t-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.1.</strong> armv4t-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/armv5te-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.2.</strong> armv5te-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/armv7r-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.3.</strong> armv7r-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/armv8r-none-eabihf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.4.</strong> armv8r-none-eabihf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/thumbv6m-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.5.</strong> thumbv6m-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/thumbv7em-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.6.</strong> thumbv7em-none-eabi*</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/thumbv7m-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.7.</strong> thumbv7m-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/thumbv8m.base-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.8.</strong> thumbv8m.base-none-eabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/thumbv8m.main-none-eabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.11.9.</strong> thumbv8m.main-none-eabi*</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"platform-support/armv6k-nintendo-3ds.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.12.</strong> armv6k-nintendo-3ds</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/armv7-sony-vita-newlibeabihf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.13.</strong> armv7-sony-vita-newlibeabihf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/armv7-unknown-linux-uclibceabi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.14.</strong> armv7-unknown-linux-uclibceabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/armv7-unknown-linux-uclibceabihf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.15.</strong> armv7-unknown-linux-uclibceabihf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/android.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.16.</strong> *-android and *-androideabi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/openharmony.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.17.</strong> *-linux-ohos</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/hurd.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.18.</strong> *-hurd-gnu</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/aarch64-unknown-teeos.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.19.</strong> aarch64-unknown-teeos</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/esp-idf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.20.</strong> *-esp-espidf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/fuchsia.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.21.</strong> *-unknown-fuchsia</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/kmc-solid.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.22.</strong> *-kmc-solid_*</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/csky-unknown-linux-gnuabiv2.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.23.</strong> csky-unknown-linux-gnuabiv2*</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/hexagon-unknown-linux-musl.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.24.</strong> hexagon-unknown-linux-musl</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/hexagon-unknown-none-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.25.</strong> hexagon-unknown-none-elf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/loongarch-linux.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.26.</strong> loongarch*-unknown-linux-*</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/loongarch-none.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.27.</strong> loongarch*-unknown-none*</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/m68k-unknown-linux-gnu.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.28.</strong> m68k-unknown-linux-gnu</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/mips64-openwrt-linux-musl.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.29.</strong> mips64-openwrt-linux-musl</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/mipsel-sony-psx.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.30.</strong> mipsel-sony-psx</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/mips-release-6.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.31.</strong> mipsisa*r6*-unknown-linux-gnu*</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/nvptx64-nvidia-cuda.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.32.</strong> nvptx64-nvidia-cuda</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/aix.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.33.</strong> powerpc64-ibm-aix</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/riscv32im-risc0-zkvm-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.34.</strong> riscv32im-risc0-zkvm-elf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/riscv32imac-unknown-xous-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.35.</strong> riscv32imac-unknown-xous-elf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/riscv32-unknown-none-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.36.</strong> riscv32*-unknown-none-elf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/sparc-unknown-none-elf.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.37.</strong> sparc-unknown-none-elf</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/pc-windows-gnullvm.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.38.</strong> *-pc-windows-gnullvm</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/nto-qnx.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.39.</strong> *-nto-qnx-*</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/unikraft-linux-musl.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.40.</strong> *-unikraft-linux-musl</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/hermit.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.41.</strong> *-unknown-hermit</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/netbsd.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.42.</strong> *-unknown-netbsd*</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/openbsd.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.43.</strong> *-unknown-openbsd</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/unknown-uefi.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.44.</strong> *-unknown-uefi</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/wasm32-wasip1.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.45.</strong> wasm32-wasip1</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/wasm32-wasip1-threads.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.46.</strong> wasm32-wasip1-threads</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/wasm32-wasip2.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.47.</strong> wasm32-wasip2</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/wasm64-unknown-unknown.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.48.</strong> wasm64-unknown-unknown</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/win7-windows-msvc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.49.</strong> *-win7-windows-msvc</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/x86_64-fortanix-unknown-sgx.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.50.</strong> x86_64-fortanix-unknown-sgx</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/x86_64-unknown-linux-none.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.51.</strong> x86_64-unknown-linux-none.md</a></li><li class=\"chapter-item expanded \"><a href=\"platform-support/x86_64-unknown-none.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.52.</strong> x86_64-unknown-none</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"targets/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.</strong> Targets</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"targets/built-in.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.1.</strong> Built-in Targets</a></li><li class=\"chapter-item expanded \"><a href=\"targets/custom.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.2.</strong> Custom Targets</a></li><li class=\"chapter-item expanded \"><a href=\"targets/known-issues.html\" tabindex=\"0\"><strong aria-hidden=\"true\">8.3.</strong> Known Issues</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"profile-guided-optimization.html\" tabindex=\"0\"><strong aria-hidden=\"true\">9.</strong> Profile-guided Optimization</a></li><li class=\"chapter-item expanded \"><a href=\"instrument-coverage.html\" tabindex=\"0\"><strong aria-hidden=\"true\">10.</strong> Instrumentation-based Code Coverage</a></li><li class=\"chapter-item expanded \"><a href=\"linker-plugin-lto.html\" tabindex=\"0\"><strong aria-hidden=\"true\">11.</strong> Linker-plugin-based LTO</a></li><li class=\"chapter-item expanded \"><a href=\"check-cfg.html\" class=\"active\" tabindex=\"0\"><strong aria-hidden=\"true\">12.</strong> Checking Conditional Configurations</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"check-cfg/cargo-specifics.html\" tabindex=\"0\"><strong aria-hidden=\"true\">12.1.</strong> Cargo Specifics</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"exploit-mitigations.html\" tabindex=\"0\"><strong aria-hidden=\"true\">13.</strong> Exploit Mitigations</a></li><li class=\"chapter-item expanded \"><a href=\"symbol-mangling/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">14.</strong> Symbol Mangling</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"symbol-mangling/v0.html\" tabindex=\"0\"><strong aria-hidden=\"true\">14.1.</strong> v0 Symbol Format</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"contributing.html\" tabindex=\"0\"><strong aria-hidden=\"true\">15.</strong> Contributing to rustc</a></li></ol>\n            </div>\n            <div id=\"sidebar-resize-handle\" class=\"sidebar-resize-handle\">\n                <div class=\"sidebar-resize-indicator\"></div>\n            </div>\n        </nav>\n\n        <!-- Track and set sidebar scroll position -->\n        <script>\n            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');\n            sidebarScrollbox.addEventListener('click', function(e) {\n                if (e.target.tagName === 'A') {\n                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);\n                }\n            }, { passive: true });\n            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');\n            sessionStorage.removeItem('sidebar-scroll');\n            if (sidebarScrollTop) {\n                // preserve sidebar scroll position when navigating via links within sidebar\n                sidebarScrollbox.scrollTop = sidebarScrollTop;\n            } else {\n                // scroll sidebar to current active section when navigating via \"next/previous chapter\" buttons\n                var activeSection = document.querySelector('#sidebar .active');\n                if (activeSection) {\n                    activeSection.scrollIntoView({ block: 'center' });\n                }\n            }\n        </script>\n\n        <div id=\"page-wrapper\" class=\"page-wrapper\">\n\n            <div class=\"page\">\n                                <div id=\"menu-bar-hover-placeholder\"></div>\n                <div id=\"menu-bar\" class=\"menu-bar\" style=\"top: 0px;\">\n                    <div class=\"left-buttons\">\n                        <label id=\"sidebar-toggle\" class=\"icon-button\" for=\"sidebar-toggle-anchor\" title=\"Toggle Table of Contents\" aria-label=\"Toggle Table of Contents\" aria-controls=\"sidebar\" aria-expanded=\"true\">\n                            <i class=\"fa fa-bars\"></i>\n                        </label>\n                        <button id=\"theme-toggle\" class=\"icon-button\" type=\"button\" title=\"Change theme\" aria-label=\"Change theme\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-controls=\"theme-list\">\n                            <i class=\"fa fa-paint-brush\"></i>\n                        </button>\n                        <ul id=\"theme-list\" class=\"theme-popup\" aria-label=\"Themes\" role=\"menu\">\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme theme-selected\" id=\"light\">Light</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"rust\">Rust</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"coal\">Coal</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"navy\">Navy</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"ayu\">Ayu</button></li>\n                        </ul>\n                        <button id=\"search-toggle\" class=\"icon-button\" type=\"button\" title=\"Search. (Shortkey: s)\" aria-label=\"Toggle Searchbar\" aria-expanded=\"false\" aria-keyshortcuts=\"S\" aria-controls=\"searchbar\">\n                            <i class=\"fa fa-search\"></i>\n                        </button>\n                    </div>\n\n                    <h1 class=\"menu-title\">The rustc book</h1>\n\n                    <div class=\"right-buttons\">\n                        <a href=\"print.html\" title=\"Print this book\" aria-label=\"Print this book\">\n                            <i id=\"print-button\" class=\"fa fa-print\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/rust/tree/master/src/doc/rustc\" title=\"Git repository\" aria-label=\"Git repository\">\n                            <i id=\"git-repository-button\" class=\"fa fa-github\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/rust/edit/master/src/doc/rustc/src/check-cfg.md\" title=\"Suggest an edit\" aria-label=\"Suggest an edit\">\n                            <i id=\"git-edit-button\" class=\"fa fa-edit\"></i>\n                        </a>\n\n                    </div>\n                </div>\n\n                <div id=\"search-wrapper\" class=\"hidden\">\n                    <form id=\"searchbar-outer\" class=\"searchbar-outer\">\n                        <input type=\"search\" id=\"searchbar\" name=\"searchbar\" placeholder=\"Search this book ...\" aria-controls=\"searchresults-outer\" aria-describedby=\"searchresults-header\">\n                    </form>\n                    <div id=\"searchresults-outer\" class=\"searchresults-outer hidden\">\n                        <div id=\"searchresults-header\" class=\"searchresults-header\"></div>\n                        <ul id=\"searchresults\">\n                        </ul>\n                    </div>\n                </div>\n\n                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->\n                <script>\n                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');\n                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');\n                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {\n                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);\n                    });\n                </script>\n\n                <div id=\"content\" class=\"content\">\n                    <main>\n                        <h1 id=\"checking-conditional-configurations\"><a class=\"header\" href=\"#checking-conditional-configurations\">Checking conditional configurations</a></h1>\n<p><code class=\"hljs\">rustc</code> supports checking that every <em>reachable</em><sup class=\"footnote-reference\"><a href=\"#reachable\">1</a></sup> <code class=\"hljs\">#[cfg]</code> matches a list of the\nexpected config names and values.</p>\n<p>This can help with verifying that the crate is correctly handling conditional compilation for\ndifferent target platforms or features. It ensures that the cfg settings are consistent between\nwhat is intended and what is used, helping to catch potential bugs or errors early in the\ndevelopment process.</p>\n<p>In order to accomplish that goal, <code class=\"hljs\">rustc</code> accepts the <code class=\"hljs\">--check-cfg</code> flag, which specifies\nwhether to check conditions and how to check them.</p>\n<blockquote>\n<p><strong>Note:</strong> No implicit expectation is added when using <code class=\"hljs\">--cfg</code>. Users are expected to\npass all expected names and values using the <em>check cfg specification</em>.</p>\n</blockquote>\n<div class=\"footnote-definition\" id=\"reachable\"><sup class=\"footnote-definition-label\">1</sup>\n<p><code class=\"hljs\">rustc</code> promises to at least check reachable <code class=\"hljs\">#[cfg]</code>, and while non-reachable\n<code class=\"hljs\">#[cfg]</code> are not currently checked, they may well be checked in the future without it being a\nbreaking change.</p>\n</div>\n<h2 id=\"specifying-expected-names-and-values\"><a class=\"header\" href=\"#specifying-expected-names-and-values\">Specifying expected names and values</a></h2>\n<p>To specify expected names and values, the <em>check cfg specification</em> provides the <code class=\"hljs\">cfg(...)</code>\noption which enables specifying for an expected config name and it's expected values.</p>\n<p>It has this basic form:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg(name, values(\"value1\", \"value2\", ... \"valueN\"))'</span>\n</code></pre>\n<p>where <code class=\"hljs\">name</code> is a bare identifier (has no quotes) and each <code class=\"hljs\">\"value\"</code> term is a quoted literal\nstring. <code class=\"hljs\">name</code> specifies the name of the condition, such as <code class=\"hljs\">feature</code> or <code class=\"hljs\">my_cfg</code>.\n<code class=\"hljs\">\"value\"</code> specify one of the value of that condition name.</p>\n<p>When the <code class=\"hljs\">cfg(...)</code> option is specified, <code class=\"hljs\">rustc</code> will check every<sup class=\"footnote-reference\"><a href=\"#reachable\">1</a></sup>:</p>\n<ul>\n<li><code class=\"hljs\">#[cfg(name = \"value\")]</code> attribute</li>\n<li><code class=\"hljs\">#[cfg_attr(name = \"value\")]</code> attribute</li>\n<li><code class=\"hljs\">#[link(name = \"a\", cfg(name = \"value\"))]</code> attribute</li>\n<li><code class=\"hljs\">cfg!(name = \"value\")</code> macro call</li>\n</ul>\n<blockquote>\n<p><em>The command line <code class=\"hljs\">--cfg</code> arguments are currently NOT checked but may very well be checked\nin the future.</em></p>\n</blockquote>\n<p><code class=\"hljs\">rustc</code> will check that the <code class=\"hljs\">\"value\"</code> specified is present in the list of expected values.\nIf <code class=\"hljs\">\"value\"</code> is not in it, then <code class=\"hljs\">rustc</code> will report an <code class=\"hljs\">unexpected_cfgs</code> lint diagnostic.\nThe default diagnostic level for this lint is <code class=\"hljs\">Warn</code>.</p>\n<p>To check for the <em>none</em> value (ie <code class=\"hljs\">#[cfg(foo)]</code>) one can use the <code class=\"hljs\">none()</code> predicate inside\n<code class=\"hljs\">values()</code>: <code class=\"hljs\">values(none())</code>. It can be followed or preceded by any number of <code class=\"hljs\">\"value\"</code>.</p>\n<p>To enable checking of values, but to provide an <em>none</em>/empty set of expected values\n(ie. expect <code class=\"hljs\">#[cfg(name)]</code>), use these forms:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg(name)'</span>\nrustc --check-cfg <span class=\"hljs-string\">'cfg(name, values(none()))'</span>\n</code></pre>\n<p>To enable checking of name but not values, use one of these forms:</p>\n<ul>\n<li>\n<p>No expected values (<em>will lint on every value of <code class=\"hljs\">name</code></em>):</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg(name, values())'</span>\n</code></pre>\n</li>\n<li>\n<p>Unknown expected values (<em>will never lint on value of <code class=\"hljs\">name</code></em>):</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg(name, values(any()))'</span>\n</code></pre>\n</li>\n</ul>\n<p>To avoid repeating the same set of values, use this form:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg(name1, ..., nameN, values(\"value1\", \"value2\", ... \"valueN\"))'</span>\n</code></pre>\n<p>To enable checking without specifying any names or values, use this form:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg()'</span>\n</code></pre>\n<p>The <code class=\"hljs\">--check-cfg cfg(...)</code> option can be repeated, both for the same condition name and for\ndifferent names. If it is repeated for the same condition name, then the sets of values for that\ncondition are merged together (precedence is given to <code class=\"hljs\">values(any())</code>).</p>\n<blockquote>\n<p>To help out an equivalence table between <code class=\"hljs\">--cfg</code> arguments and <code class=\"hljs\">--check-cfg</code> is available\n<a href=\"#equivalence-table-with---cfg\">down below</a>.</p>\n</blockquote>\n<h2 id=\"well-known-names-and-values\"><a class=\"header\" href=\"#well-known-names-and-values\">Well known names and values</a></h2>\n<p><code class=\"hljs\">rustc</code> maintains a list of well-known names and their corresponding values in order to avoid\nthe need to specify them manually.</p>\n<p>Well known names and values are implicitly added as long as at least one <code class=\"hljs\">--check-cfg</code> argument\nis present.</p>\n<p>As of <code class=\"hljs\">2024-05-06T</code>, the list of known names is as follows:</p>\n<!--- See CheckCfg::fill_well_known in compiler/rustc_session/src/config.rs -->\n<ul>\n<li><code class=\"hljs\">clippy</code></li>\n<li><code class=\"hljs\">debug_assertions</code></li>\n<li><code class=\"hljs\">doc</code></li>\n<li><code class=\"hljs\">doctest</code></li>\n<li><code class=\"hljs\">miri</code></li>\n<li><code class=\"hljs\">overflow_checks</code></li>\n<li><code class=\"hljs\">panic</code></li>\n<li><code class=\"hljs\">proc_macro</code></li>\n<li><code class=\"hljs\">relocation_model</code></li>\n<li><code class=\"hljs\">rustfmt</code></li>\n<li><code class=\"hljs\">sanitize</code></li>\n<li><code class=\"hljs\">sanitizer_cfi_generalize_pointers</code></li>\n<li><code class=\"hljs\">sanitizer_cfi_normalize_integers</code></li>\n<li><code class=\"hljs\">target_abi</code></li>\n<li><code class=\"hljs\">target_arch</code></li>\n<li><code class=\"hljs\">target_endian</code></li>\n<li><code class=\"hljs\">target_env</code></li>\n<li><code class=\"hljs\">target_family</code></li>\n<li><code class=\"hljs\">target_feature</code></li>\n<li><code class=\"hljs\">target_has_atomic</code></li>\n<li><code class=\"hljs\">target_has_atomic_equal_alignment</code></li>\n<li><code class=\"hljs\">target_has_atomic_load_store</code></li>\n<li><code class=\"hljs\">target_os</code></li>\n<li><code class=\"hljs\">target_pointer_width</code></li>\n<li><code class=\"hljs\">target_thread_local</code></li>\n<li><code class=\"hljs\">target_vendor</code></li>\n<li><code class=\"hljs\">test</code></li>\n<li><code class=\"hljs\">ub_checks</code></li>\n<li><code class=\"hljs\">unix</code></li>\n<li><code class=\"hljs\">windows</code></li>\n</ul>\n<p>Like with <code class=\"hljs\">values(any())</code>, well known names checking can be disabled by passing <code class=\"hljs\">cfg(any())</code>\nas argument to <code class=\"hljs\">--check-cfg</code>.</p>\n<h2 id=\"equivalence-table-with---cfg\"><a class=\"header\" href=\"#equivalence-table-with---cfg\">Equivalence table with <code>--cfg</code></a></h2>\n<p>This table describe the equivalence between a <code class=\"hljs\">--cfg</code> argument to a <code class=\"hljs\">--check-cfg</code> argument.</p>\n<div class=\"table-wrapper\"><table><thead><tr><th><code class=\"hljs\">--cfg</code></th><th><code class=\"hljs\">--check-cfg</code></th></tr></thead><tbody>\n<tr><td><em>nothing</em></td><td><em>nothing</em> or <code class=\"hljs\">--check-cfg=cfg()</code> (to enable the checking)</td></tr>\n<tr><td><code class=\"hljs\">--cfg foo</code></td><td><code class=\"hljs\">--check-cfg=cfg(foo)</code> or <code class=\"hljs\">--check-cfg=cfg(foo, values(none()))</code></td></tr>\n<tr><td><code class=\"hljs\">--cfg foo=\"\"</code></td><td><code class=\"hljs\">--check-cfg=cfg(foo, values(\"\"))</code></td></tr>\n<tr><td><code class=\"hljs\">--cfg foo=\"bar\"</code></td><td><code class=\"hljs\">--check-cfg=cfg(foo, values(\"bar\"))</code></td></tr>\n<tr><td><code class=\"hljs\">--cfg foo=\"1\" --cfg foo=\"2\"</code></td><td><code class=\"hljs\">--check-cfg=cfg(foo, values(\"1\", \"2\"))</code></td></tr>\n<tr><td><code class=\"hljs\">--cfg foo=\"1\" --cfg bar=\"2\"</code></td><td><code class=\"hljs\">--check-cfg=cfg(foo, values(\"1\")) --check-cfg=cfg(bar, values(\"2\"))</code></td></tr>\n<tr><td><code class=\"hljs\">--cfg foo --cfg foo=\"bar\"</code></td><td><code class=\"hljs\">--check-cfg=cfg(foo, values(none(), \"bar\"))</code></td></tr>\n</tbody></table>\n</div>\n<h2 id=\"examples\"><a class=\"header\" href=\"#examples\">Examples</a></h2>\n<h3 id=\"example-cargo-like-feature-example\"><a class=\"header\" href=\"#example-cargo-like-feature-example\">Example: Cargo-like <code>feature</code> example</a></h3>\n<p>Consider this command line:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg(feature, values(\"lion\", \"zebra\"))'</span> \\\n      --cfg <span class=\"hljs-string\">'feature=\"lion\"'</span> example.rs\n</code></pre>\n<blockquote>\n<p>This command line indicates that this crate has two features: <code class=\"hljs\">lion</code> and <code class=\"hljs\">zebra</code>. The <code class=\"hljs\">lion</code>\nfeature is enabled, while the <code class=\"hljs\">zebra</code> feature is disabled.</p>\n</blockquote>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-rust hljs\"><span class=\"hljs-meta\">#[cfg(feature = <span class=\"hljs-meta-string\">\"lion\"</span>)]</span>     <span class=\"hljs-comment\">// This condition is expected, as \"lion\" is an</span>\n                             <span class=\"hljs-comment\">// expected value of `feature`</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">tame_lion</span></span>(lion: Lion) {}\n\n<span class=\"hljs-meta\">#[cfg(feature = <span class=\"hljs-meta-string\">\"zebra\"</span>)]</span>    <span class=\"hljs-comment\">// This condition is expected, as \"zebra\" is an expected</span>\n                             <span class=\"hljs-comment\">// value of `feature` but the condition will evaluate</span>\n                             <span class=\"hljs-comment\">// to false since only --cfg feature=\"lion\" was passed</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">ride_zebra</span></span>(z: Zebra) {}\n\n<span class=\"hljs-meta\">#[cfg(feature = <span class=\"hljs-meta-string\">\"platypus\"</span>)]</span> <span class=\"hljs-comment\">// This condition is UNEXPECTED, as \"platypus\" is NOT</span>\n                             <span class=\"hljs-comment\">// an expected value of `feature` and will cause a</span>\n                             <span class=\"hljs-comment\">// the compiler to emit the `unexpected_cfgs` lint</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">poke_platypus</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(feechure = <span class=\"hljs-meta-string\">\"lion\"</span>)]</span>    <span class=\"hljs-comment\">// This condition is UNEXPECTED, as 'feechure' is NOT</span>\n                             <span class=\"hljs-comment\">// a expected condition name, no `cfg(feechure, ...)`</span>\n                             <span class=\"hljs-comment\">// was passed in `--check-cfg`</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">tame_lion</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(windows = <span class=\"hljs-meta-string\">\"unix\"</span>)]</span>     <span class=\"hljs-comment\">// This condition is UNEXPECTED, as the well known</span>\n                             <span class=\"hljs-comment\">// 'windows' cfg doesn't expect any values</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">tame_windows</span></span>() {}</code></pre>\n<h3 id=\"example-multiple-names-and-values\"><a class=\"header\" href=\"#example-multiple-names-and-values\">Example: Multiple names and values</a></h3>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg(is_embedded, has_feathers)'</span> \\\n      --check-cfg <span class=\"hljs-string\">'cfg(feature, values(\"zapping\", \"lasers\"))'</span> \\\n      --cfg has_feathers --cfg <span class=\"hljs-string\">'feature=\"zapping\"'</span>\n</code></pre>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-rust hljs\"><span class=\"hljs-meta\">#[cfg(is_embedded)]</span>         <span class=\"hljs-comment\">// This condition is expected, as 'is_embedded' was</span>\n                            <span class=\"hljs-comment\">// provided in --check-cfg and doesn't take any value</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">do_embedded</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(has_feathers)]</span>        <span class=\"hljs-comment\">// This condition is expected, as 'has_feathers' was</span>\n                            <span class=\"hljs-comment\">// provided in --check-cfg and doesn't take any value</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">do_features</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(has_mumble_frotz)]</span>    <span class=\"hljs-comment\">// This condition is UNEXPECTED, as 'has_mumble_frotz'</span>\n                            <span class=\"hljs-comment\">// was NEVER provided in any --check-cfg arguments</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">do_mumble_frotz</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(feature = <span class=\"hljs-meta-string\">\"lasers\"</span>)]</span>  <span class=\"hljs-comment\">// This condition is expected, as \"lasers\" is an</span>\n                            <span class=\"hljs-comment\">// expected value of `feature`</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">shoot_lasers</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(feature = <span class=\"hljs-meta-string\">\"monkeys\"</span>)]</span> <span class=\"hljs-comment\">// This condition is UNEXPECTED, as \"monkeys\" is NOT</span>\n                            <span class=\"hljs-comment\">// an expected value of `feature`</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">write_shakespeare</span></span>() {}</code></pre>\n<h3 id=\"example-condition-names-without-values\"><a class=\"header\" href=\"#example-condition-names-without-values\">Example: Condition names without values</a></h3>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-bash hljs\">rustc --check-cfg <span class=\"hljs-string\">'cfg(is_embedded, has_feathers, values(any()))'</span> \\\n      --cfg has_feathers\n</code></pre>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-rust hljs\"><span class=\"hljs-meta\">#[cfg(is_embedded)]</span>      <span class=\"hljs-comment\">// This condition is expected, as 'is_embedded' was</span>\n                         <span class=\"hljs-comment\">// provided in --check-cfg as condition name</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">do_embedded</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(has_feathers)]</span>     <span class=\"hljs-comment\">// This condition is expected, as \"has_feathers\" was</span>\n                         <span class=\"hljs-comment\">// provided in --check-cfg as condition name</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">do_features</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(has_feathers = <span class=\"hljs-meta-string\">\"zapping\"</span>)]</span> <span class=\"hljs-comment\">// This condition is expected, as \"has_feathers\"</span>\n                                 <span class=\"hljs-comment\">// was provided and because *any* values is</span>\n                                 <span class=\"hljs-comment\">// expected for 'has_feathers' no</span>\n                                 <span class=\"hljs-comment\">// warning is emitted for the value \"zapping\"</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">do_zapping</span></span>() {}\n\n<span class=\"hljs-meta\">#[cfg(has_mumble_frotz)]</span> <span class=\"hljs-comment\">// This condition is UNEXPECTED, as 'has_mumble_frotz'</span>\n                         <span class=\"hljs-comment\">// was not provided in any --check-cfg arguments</span>\n<span class=\"hljs-function\"><span class=\"hljs-keyword\">fn</span> <span class=\"hljs-title\">do_mumble_frotz</span></span>() {}</code></pre>\n\n                    </main>\n\n                    <nav class=\"nav-wrapper\" aria-label=\"Page navigation\">\n                        <!-- Mobile navigation buttons -->\n                            <a rel=\"prev\" href=\"linker-plugin-lto.html\" class=\"mobile-nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                                <i class=\"fa fa-angle-left\"></i>\n                            </a>\n\n                            <a rel=\"next prefetch\" href=\"check-cfg/cargo-specifics.html\" class=\"mobile-nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                                <i class=\"fa fa-angle-right\"></i>\n                            </a>\n\n                        <div style=\"clear: both\"></div>\n                    </nav>\n                </div>\n            </div>\n\n            <nav class=\"nav-wide-wrapper\" aria-label=\"Page navigation\">\n                    <a rel=\"prev\" href=\"linker-plugin-lto.html\" class=\"nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                        <i class=\"fa fa-angle-left\"></i>\n                    </a>\n\n                    <a rel=\"next prefetch\" href=\"check-cfg/cargo-specifics.html\" class=\"nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                        <i class=\"fa fa-angle-right\"></i>\n                    </a>\n            </nav>\n\n        </div>\n\n\n\n\n        <script>\n            window.playground_copyable = true;\n        </script>\n\n\n        <script src=\"elasticlunr.min.js\"></script>\n        <script src=\"mark.min.js\"></script>\n        <script src=\"searcher.js\"></script>\n\n        <script src=\"clipboard.min.js\"></script>\n        <script src=\"highlight.js\"></script>\n        <script src=\"book.js\"></script>\n\n        <!-- Custom JS scripts -->\n\n\n    </div>\n    \n\n</body></html>",
	"crawlDate": "2024-07-28T05:20:41.228Z"
}