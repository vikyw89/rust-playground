{
	"title": "Credential Provider Protocol - The Cargo Book",
	"url": "https://doc.rust-lang.org/cargo/reference/credential-provider-protocol.html",
	"markdown": "# Credential Provider Protocol - The Cargo Book\n\nThis document describes information for building a Cargo credential provider. For information on setting up or using a credential provider, see [Registry Authentication](registry-authentication.html).\n\nWhen using an external credential provider, Cargo communicates with the credential provider using stdin/stdout messages passed as single lines of JSON.\n\nCargo will always execute the credential provider with the `--cargo-plugin` argument. This enables a credential provider executable to have additional functionality beyond what Cargo needs. Additional arguments are included in the JSON via the `args` field.\n\n## [JSON messages](#json-messages)\n\nThe JSON messages in this document have newlines added for readability. Actual messages must not contain newlines.\n\n### [Credential hello](#credential-hello)\n\n-   Sent by: credential provider\n-   Purpose: used to identify the supported protocols on process startup\n\n```javascript\n{\n    \"v\":[1]\n}\n\n```\n\nRequests sent by Cargo will include a `v` field set to one of the versions listed here. If Cargo does not support any of the versions offered by the credential provider, it will issue an error and shut down the credential process.\n\n### [Registry information](#registry-information)\n\n-   Sent by: Cargo Not a message by itself. Included in all messages sent by Cargo as the `registry` field.\n\n```javascript\n{\n    // Index URL of the registry\n    \"index-url\":\"https://github.com/rust-lang/crates.io-index\",\n    // Name of the registry in configuration (optional)\n    \"name\": \"crates-io\",\n    // HTTP headers received from attempting to access an authenticated registry (optional)\n    \"headers\": [\"WWW-Authenticate: cargo\"]\n}\n\n```\n\n### [Login request](#login-request)\n\n-   Sent by: Cargo\n-   Purpose: collect and store credentials\n\n```javascript\n{\n    // Protocol version\n    \"v\":1,\n    // Action to perform: login\n    \"kind\":\"login\",\n    // Registry information (see Registry information)\n    \"registry\":{\"index-url\":\"sparse+https://registry-url/index/\", \"name\": \"my-registry\"},\n    // User-specified token from stdin or command line (optional)\n    \"token\": \"<the token value>\",\n    // URL that the user could visit to get a token (optional)\n    \"login-url\": \"http://registry-url/login\",\n    // Additional command-line args (optional)\n    \"args\":[]\n}\n\n```\n\nIf the `token` field is set, then the credential provider should use the token provided. If the `token` is not set, then the credential provider should prompt the user for a token.\n\nIn addition to the arguments that may be passed to the credential provider in configuration, `cargo login` also supports passing additional command line args via `cargo login -- <additional args>`. These additional arguments will be included in the `args` field after any args from Cargo configuration.\n\n### [Read request](#read-request)\n\n-   Sent by: Cargo\n-   Purpose: Get the credential for reading crate information\n\n```javascript\n{\n    // Protocol version\n    \"v\":1,\n    // Request kind: get credentials\n    \"kind\":\"get\",\n    // Action to perform: read crate information\n    \"operation\":\"read\",\n    // Registry information (see Registry information)\n    \"registry\":{\"index-url\":\"sparse+https://registry-url/index/\", \"name\": \"my-registry\"},\n    // Additional command-line args (optional)\n    \"args\":[]\n}\n\n```\n\n### [Publish request](#publish-request)\n\n-   Sent by: Cargo\n-   Purpose: Get the credential for publishing a crate\n\n```javascript\n{\n    // Protocol version\n    \"v\":1,\n    // Request kind: get credentials\n    \"kind\":\"get\",\n    // Action to perform: publish crate\n    \"operation\":\"publish\",\n    // Crate name\n    \"name\":\"sample\",\n    // Crate version\n    \"vers\":\"0.1.0\",\n    // Crate checksum\n    \"cksum\":\"...\",\n    // Registry information (see Registry information)\n    \"registry\":{\"index-url\":\"sparse+https://registry-url/index/\", \"name\": \"my-registry\"},\n    // Additional command-line args (optional)\n    \"args\":[]\n}\n\n```\n\n### [Get success response](#get-success-response)\n\n-   Sent by: credential provider\n-   Purpose: Gives the credential to Cargo\n\n```javascript\n{\"Ok\":{\n    // Response kind: this was a get request\n    \"kind\":\"get\",\n    // Token to send to the registry\n    \"token\":\"...\",\n    // Cache control. Can be one of the following:\n    // * \"never\": do not cache\n    // * \"session\": cache for the current cargo session\n    // * \"expires\": cache for the current cargo session until expiration\n    \"cache\":\"expires\",\n    // Unix timestamp (only for \"cache\": \"expires\")\n    \"expiration\":1693942857,\n    // Is the token operation independent?\n    \"operation_independent\":true\n}}\n\n```\n\nThe `token` will be sent to the registry as the value of the `Authorization` HTTP header.\n\n`operation_independent` indicates whether the token can be cached across different operations (such as publishing or fetching). In general, this should be `true` unless the provider wants to generate tokens that are scoped to specific operations.\n\n### [Login success response](#login-success-response)\n\n-   Sent by: credential provider\n-   Purpose: Indicates the login was successful\n\n```javascript\n{\"Ok\":{\n    // Response kind: this was a login request\n    \"kind\":\"login\"\n}}\n\n```\n\n### [Logout success response](#logout-success-response)\n\n-   Sent by: credential provider\n-   Purpose: Indicates the logout was successful\n\n```javascript\n{\"Ok\":{\n    // Response kind: this was a logout request\n    \"kind\":\"logout\"\n}}\n\n```\n\n### [Failure response (URL not supported)](#failure-response-url-not-supported)\n\n-   Sent by: credential provider\n-   Purpose: Gives error information to Cargo\n\n```javascript\n{\"Err\":{\n    \"kind\":\"url-not-supported\"\n}}\n\n```\n\nSent if the credential provider is designed to only handle specific registry URLs and the given URL is not supported. Cargo will attempt another provider if available.\n\n### [Failure response (not found)](#failure-response-not-found)\n\n-   Sent by: credential provider\n-   Purpose: Gives error information to Cargo\n\n```javascript\n{\"Err\":{\n    // Error: The credential could not be found in the provider.\n    \"kind\":\"not-found\"\n}}\n\n```\n\nSent if the credential could not be found. This is expected for `get` requests where the credential is not available, or `logout` requests where there is nothing found to erase.\n\n### [Failure response (operation not supported)](#failure-response-operation-not-supported)\n\n-   Sent by: credential provider\n-   Purpose: Gives error information to Cargo\n\n```javascript\n{\"Err\":{\n    // Error: The credential could not be found in the provider.\n    \"kind\":\"operation-not-supported\"\n}}\n\n```\n\nSent if the credential provider does not support the requested operation. If a provider only supports `get` and a `login` is requested, the provider should respond with this error.\n\n### [Failure response (other)](#failure-response-other)\n\n-   Sent by: credential provider\n-   Purpose: Gives error information to Cargo\n\n```javascript\n{\"Err\":{\n    // Error: something else has failed\n    \"kind\":\"other\",\n    // Error message string to be displayed\n    \"message\": \"free form string error message\",\n    // Detailed cause chain for the error (optional)\n    \"caused-by\": [\"cause 1\", \"cause 2\"]\n}}\n\n```\n\n## [Example communication to request a token for reading:](#example-communication-to-request-a-token-for-reading)\n\n1.  Cargo spawns the credential process, capturing stdin and stdout.\n2.  Credential process sends the Hello message to Cargo\n    ```javascript\n    { \"v\": [1] }\n    \n    ```\n    \n3.  Cargo sends the CredentialRequest message to the credential process (newlines added for readability).\n    ```javascript\n    {\n        \"v\": 1,\n        \"kind\": \"get\",\n        \"operation\": \"read\",\n        \"registry\":{\"index-url\":\"sparse+https://registry-url/index/\"}\n    }\n    \n    ```\n    \n4.  Credential process sends the CredentialResponse to Cargo (newlines added for readability).\n    ```javascript\n    {\n        \"token\": \"...\",\n        \"cache\": \"session\",\n        \"operation_independent\": true\n    }\n    \n    ```\n    \n5.  Cargo closes the stdin pipe to the credential provider and it exits.\n6.  Cargo uses the token for the remainder of the session (until Cargo exits) when interacting with this registry.",
	"html": "<!DOCTYPE html><html lang=\"en\" class=\"light\" dir=\"ltr\"><head>\n        <!-- Book generated using mdBook -->\n        <meta charset=\"UTF-8\">\n        <title>Credential Provider Protocol - The Cargo Book</title>\n\n\n        <!-- Custom HTML head -->\n        <style>\n            dd {\n                margin-bottom: 1em;\n            }\n        </style>\n\n        <meta name=\"description\" content=\"\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <meta name=\"theme-color\" content=\"rgb(255, 255, 255)\">\n\n        <link rel=\"shortcut icon\" href=\"../favicon.png\">\n        <link rel=\"stylesheet\" href=\"../css/variables.css\">\n        <link rel=\"stylesheet\" href=\"../css/general.css\">\n        <link rel=\"stylesheet\" href=\"../css/chrome.css\">\n        <link rel=\"stylesheet\" href=\"../css/print.css\" media=\"print\">\n\n        <!-- Fonts -->\n        <link rel=\"stylesheet\" href=\"../FontAwesome/css/font-awesome.css\">\n        <link rel=\"stylesheet\" href=\"../fonts/fonts.css\">\n\n        <!-- Highlight.js Stylesheets -->\n        <link rel=\"stylesheet\" href=\"../highlight.css\">\n        <link rel=\"stylesheet\" href=\"../tomorrow-night.css\" disabled=\"\">\n        <link rel=\"stylesheet\" href=\"../ayu-highlight.css\" disabled=\"\">\n\n        <!-- Custom theme stylesheets -->\n\n    </head>\n    <body class=\"js sidebar-visible\">\n    <div id=\"body-container\">\n        <!-- Provide site root to javascript -->\n        <script>\n            var path_to_root = \"../\";\n            var default_theme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"navy\" : \"light\";\n        </script>\n\n        <!-- Work around some values being stored in localStorage wrapped in quotes -->\n        <script>\n            try {\n                var theme = localStorage.getItem('mdbook-theme');\n                var sidebar = localStorage.getItem('mdbook-sidebar');\n\n                if (theme.startsWith('\"') && theme.endsWith('\"')) {\n                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));\n                }\n\n                if (sidebar.startsWith('\"') && sidebar.endsWith('\"')) {\n                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));\n                }\n            } catch (e) { }\n        </script>\n\n        <!-- Set the theme before any content is loaded, prevents flash -->\n        <script>\n            var theme;\n            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }\n            if (theme === null || theme === undefined) { theme = default_theme; }\n            var html = document.querySelector('html');\n            html.classList.remove('light')\n            html.classList.add(theme);\n            var body = document.querySelector('body');\n            body.classList.remove('no-js')\n            body.classList.add('js');\n        </script>\n\n        <input type=\"checkbox\" id=\"sidebar-toggle-anchor\" class=\"hidden\">\n\n        <!-- Hide / unhide sidebar before it is displayed -->\n        <script>\n            var body = document.querySelector('body');\n            var sidebar = null;\n            var sidebar_toggle = document.getElementById(\"sidebar-toggle-anchor\");\n            if (document.body.clientWidth >= 1080) {\n                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }\n                sidebar = sidebar || 'visible';\n            } else {\n                sidebar = 'hidden';\n            }\n            sidebar_toggle.checked = sidebar === 'visible';\n            body.classList.remove('sidebar-visible');\n            body.classList.add(\"sidebar-\" + sidebar);\n        </script>\n\n        <nav id=\"sidebar\" class=\"sidebar\" aria-label=\"Table of contents\" aria-hidden=\"false\">\n            <div class=\"sidebar-scrollbox\">\n                <ol class=\"chapter\"><li class=\"chapter-item expanded affix \"><a href=\"../index.html\" tabindex=\"0\">Introduction</a></li><li class=\"chapter-item expanded \"><a href=\"../getting-started/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.</strong> Getting Started</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../getting-started/installation.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.1.</strong> Installation</a></li><li class=\"chapter-item expanded \"><a href=\"../getting-started/first-steps.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.2.</strong> First Steps with Cargo</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../guide/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.</strong> Cargo Guide</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../guide/why-cargo-exists.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.1.</strong> Why Cargo Exists</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/creating-a-new-project.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.2.</strong> Creating a New Package</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/working-on-an-existing-project.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.3.</strong> Working on an Existing Package</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/dependencies.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.4.</strong> Dependencies</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/project-layout.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.5.</strong> Package Layout</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/cargo-toml-vs-cargo-lock.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.6.</strong> Cargo.toml vs Cargo.lock</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/tests.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.7.</strong> Tests</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/continuous-integration.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.8.</strong> Continuous Integration</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/cargo-home.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.9.</strong> Cargo Home</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/build-cache.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.10.</strong> Build Cache</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.</strong> Cargo Reference</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/specifying-dependencies.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.1.</strong> Specifying Dependencies</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/overriding-dependencies.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.1.1.</strong> Overriding Dependencies</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/manifest.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.2.</strong> The Manifest Format</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/cargo-targets.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.2.1.</strong> Cargo Targets</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/workspaces.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.3.</strong> Workspaces</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/features.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.4.</strong> Features</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/features-examples.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.4.1.</strong> Features Examples</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/profiles.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.5.</strong> Profiles</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/config.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.6.</strong> Configuration</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/environment-variables.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.7.</strong> Environment Variables</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/build-scripts.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.8.</strong> Build Scripts</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/build-script-examples.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.8.1.</strong> Build Script Examples</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/publishing.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.9.</strong> Publishing on crates.io</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/pkgid-spec.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.10.</strong> Package ID Specifications</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/source-replacement.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.11.</strong> Source Replacement</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/external-tools.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.12.</strong> External Tools</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/registries.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.</strong> Registries</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/registry-authentication.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.1.</strong> Registry Authentication</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/credential-provider-protocol.html\" class=\"active\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.1.1.</strong> Credential Provider Protocol</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/running-a-registry.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.2.</strong> Running a Registry</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/registry-index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.2.1.</strong> Registry Index</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/registry-web-api.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.2.2.</strong> Registry Web API</a></li></ol></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/resolver.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.14.</strong> Dependency Resolution</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/semver.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.15.</strong> SemVer Compatibility</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/future-incompat-report.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.16.</strong> Future incompat report</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/timings.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.17.</strong> Reporting build timings</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/unstable.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.18.</strong> Unstable Features</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.</strong> Cargo Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/general-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.</strong> General Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.1.</strong> cargo</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-help.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.2.</strong> cargo help</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-version.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.3.</strong> cargo version</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/build-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.</strong> Build Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-bench.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.1.</strong> cargo bench</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-build.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.2.</strong> cargo build</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-check.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.3.</strong> cargo check</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-clean.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.4.</strong> cargo clean</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-doc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.5.</strong> cargo doc</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-fetch.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.6.</strong> cargo fetch</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-fix.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.7.</strong> cargo fix</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-run.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.8.</strong> cargo run</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-rustc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.9.</strong> cargo rustc</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-rustdoc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.10.</strong> cargo rustdoc</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-test.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.11.</strong> cargo test</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-report.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.12.</strong> cargo report</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/manifest-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.</strong> Manifest Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-add.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.1.</strong> cargo add</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-generate-lockfile.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.2.</strong> cargo generate-lockfile</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-locate-project.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.3.</strong> cargo locate-project</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-metadata.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.4.</strong> cargo metadata</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-pkgid.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.5.</strong> cargo pkgid</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-remove.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.6.</strong> cargo remove</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-tree.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.7.</strong> cargo tree</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-update.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.8.</strong> cargo update</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-vendor.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.9.</strong> cargo vendor</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-verify-project.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.10.</strong> cargo verify-project</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/package-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.</strong> Package Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-init.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.1.</strong> cargo init</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-install.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.2.</strong> cargo install</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-new.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.3.</strong> cargo new</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-search.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.4.</strong> cargo search</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-uninstall.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.5.</strong> cargo uninstall</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/publishing-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.</strong> Publishing Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-login.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.1.</strong> cargo login</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-logout.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.2.</strong> cargo logout</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-owner.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.3.</strong> cargo owner</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-package.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.4.</strong> cargo package</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-publish.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.5.</strong> cargo publish</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-yank.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.6.</strong> cargo yank</a></li></ol></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../faq.html\" tabindex=\"0\"><strong aria-hidden=\"true\">5.</strong> FAQ</a></li><li class=\"chapter-item expanded \"><a href=\"../appendix/glossary.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.</strong> Appendix: Glossary</a></li><li class=\"chapter-item expanded \"><a href=\"../appendix/git-authentication.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.</strong> Appendix: Git Authentication</a></li></ol>\n            </div>\n            <div id=\"sidebar-resize-handle\" class=\"sidebar-resize-handle\">\n                <div class=\"sidebar-resize-indicator\"></div>\n            </div>\n        </nav>\n\n        <!-- Track and set sidebar scroll position -->\n        <script>\n            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');\n            sidebarScrollbox.addEventListener('click', function(e) {\n                if (e.target.tagName === 'A') {\n                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);\n                }\n            }, { passive: true });\n            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');\n            sessionStorage.removeItem('sidebar-scroll');\n            if (sidebarScrollTop) {\n                // preserve sidebar scroll position when navigating via links within sidebar\n                sidebarScrollbox.scrollTop = sidebarScrollTop;\n            } else {\n                // scroll sidebar to current active section when navigating via \"next/previous chapter\" buttons\n                var activeSection = document.querySelector('#sidebar .active');\n                if (activeSection) {\n                    activeSection.scrollIntoView({ block: 'center' });\n                }\n            }\n        </script>\n\n        <div id=\"page-wrapper\" class=\"page-wrapper\">\n\n            <div class=\"page\">\n                                <div id=\"menu-bar-hover-placeholder\"></div>\n                <div id=\"menu-bar\" class=\"menu-bar\" style=\"top: 0px;\">\n                    <div class=\"left-buttons\">\n                        <label id=\"sidebar-toggle\" class=\"icon-button\" for=\"sidebar-toggle-anchor\" title=\"Toggle Table of Contents\" aria-label=\"Toggle Table of Contents\" aria-controls=\"sidebar\" aria-expanded=\"true\">\n                            <i class=\"fa fa-bars\"></i>\n                        </label>\n                        <button id=\"theme-toggle\" class=\"icon-button\" type=\"button\" title=\"Change theme\" aria-label=\"Change theme\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-controls=\"theme-list\">\n                            <i class=\"fa fa-paint-brush\"></i>\n                        </button>\n                        <ul id=\"theme-list\" class=\"theme-popup\" aria-label=\"Themes\" role=\"menu\">\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme theme-selected\" id=\"light\">Light</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"rust\">Rust</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"coal\">Coal</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"navy\">Navy</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"ayu\">Ayu</button></li>\n                        </ul>\n                        <button id=\"search-toggle\" class=\"icon-button\" type=\"button\" title=\"Search. (Shortkey: s)\" aria-label=\"Toggle Searchbar\" aria-expanded=\"false\" aria-keyshortcuts=\"S\" aria-controls=\"searchbar\">\n                            <i class=\"fa fa-search\"></i>\n                        </button>\n                    </div>\n\n                    <h1 class=\"menu-title\">The Cargo Book</h1>\n\n                    <div class=\"right-buttons\">\n                        <a href=\"../print.html\" title=\"Print this book\" aria-label=\"Print this book\">\n                            <i id=\"print-button\" class=\"fa fa-print\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/cargo/tree/master/src/doc/src\" title=\"Git repository\" aria-label=\"Git repository\">\n                            <i id=\"git-repository-button\" class=\"fa fa-github\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/cargo/edit/master/src/doc/src/reference/credential-provider-protocol.md\" title=\"Suggest an edit\" aria-label=\"Suggest an edit\">\n                            <i id=\"git-edit-button\" class=\"fa fa-edit\"></i>\n                        </a>\n\n                    </div>\n                </div>\n\n                <div id=\"search-wrapper\" class=\"hidden\">\n                    <form id=\"searchbar-outer\" class=\"searchbar-outer\">\n                        <input type=\"search\" id=\"searchbar\" name=\"searchbar\" placeholder=\"Search this book ...\" aria-controls=\"searchresults-outer\" aria-describedby=\"searchresults-header\">\n                    </form>\n                    <div id=\"searchresults-outer\" class=\"searchresults-outer hidden\">\n                        <div id=\"searchresults-header\" class=\"searchresults-header\"></div>\n                        <ul id=\"searchresults\">\n                        </ul>\n                    </div>\n                </div>\n\n                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->\n                <script>\n                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');\n                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');\n                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {\n                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);\n                    });\n                </script>\n\n                <div id=\"content\" class=\"content\">\n                    <main>\n                        <h1 id=\"credential-provider-protocol\"><a class=\"header\" href=\"#credential-provider-protocol\">Credential Provider Protocol</a></h1>\n<p>This document describes information for building a Cargo credential provider. For information on\nsetting up or using a credential provider, see <a href=\"registry-authentication.html\">Registry Authentication</a>.</p>\n<p>When using an external credential provider, Cargo communicates with the credential\nprovider using stdin/stdout messages passed as single lines of JSON.</p>\n<p>Cargo will always execute the credential provider with the <code class=\"hljs\">--cargo-plugin</code> argument.\nThis enables a credential provider executable to have additional functionality beyond\nwhat Cargo needs. Additional arguments are included in the JSON via the <code class=\"hljs\">args</code> field.</p>\n<h2 id=\"json-messages\"><a class=\"header\" href=\"#json-messages\">JSON messages</a></h2>\n<p>The JSON messages in this document have newlines added for readability.\nActual messages must not contain newlines.</p>\n<h3 id=\"credential-hello\"><a class=\"header\" href=\"#credential-hello\">Credential hello</a></h3>\n<ul>\n<li>Sent by: credential provider</li>\n<li>Purpose: used to identify the supported protocols on process startup</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{\n    <span class=\"hljs-string\">\"v\"</span>:[<span class=\"hljs-number\">1</span>]\n}\n</code></pre>\n<p>Requests sent by Cargo will include a <code class=\"hljs\">v</code> field set to one of the versions listed here.\nIf Cargo does not support any of the versions offered by the credential provider, it will issue an\nerror and shut down the credential process.</p>\n<h3 id=\"registry-information\"><a class=\"header\" href=\"#registry-information\">Registry information</a></h3>\n<ul>\n<li>Sent by: Cargo\nNot a message by itself. Included in all messages sent by Cargo as the <code class=\"hljs\">registry</code> field.</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{\n    <span class=\"hljs-comment\">// Index URL of the registry</span>\n    <span class=\"hljs-string\">\"index-url\"</span>:<span class=\"hljs-string\">\"https://github.com/rust-lang/crates.io-index\"</span>,\n    <span class=\"hljs-comment\">// Name of the registry in configuration (optional)</span>\n    <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"crates-io\"</span>,\n    <span class=\"hljs-comment\">// HTTP headers received from attempting to access an authenticated registry (optional)</span>\n    <span class=\"hljs-string\">\"headers\"</span>: [<span class=\"hljs-string\">\"WWW-Authenticate: cargo\"</span>]\n}\n</code></pre>\n<h3 id=\"login-request\"><a class=\"header\" href=\"#login-request\">Login request</a></h3>\n<ul>\n<li>Sent by: Cargo</li>\n<li>Purpose: collect and store credentials</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{\n    <span class=\"hljs-comment\">// Protocol version</span>\n    <span class=\"hljs-string\">\"v\"</span>:<span class=\"hljs-number\">1</span>,\n    <span class=\"hljs-comment\">// Action to perform: login</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"login\"</span>,\n    <span class=\"hljs-comment\">// Registry information (see Registry information)</span>\n    <span class=\"hljs-string\">\"registry\"</span>:{<span class=\"hljs-string\">\"index-url\"</span>:<span class=\"hljs-string\">\"sparse+https://registry-url/index/\"</span>, <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"my-registry\"</span>},\n    <span class=\"hljs-comment\">// User-specified token from stdin or command line (optional)</span>\n    <span class=\"hljs-string\">\"token\"</span>: <span class=\"hljs-string\">\"&lt;the token value&gt;\"</span>,\n    <span class=\"hljs-comment\">// URL that the user could visit to get a token (optional)</span>\n    <span class=\"hljs-string\">\"login-url\"</span>: <span class=\"hljs-string\">\"http://registry-url/login\"</span>,\n    <span class=\"hljs-comment\">// Additional command-line args (optional)</span>\n    <span class=\"hljs-string\">\"args\"</span>:[]\n}\n</code></pre>\n<p>If the <code class=\"hljs\">token</code> field is set, then the credential provider should use the token provided. If\nthe <code class=\"hljs\">token</code> is not set, then the credential provider should prompt the user for a token.</p>\n<p>In addition to the arguments that may be passed to the credential provider in\nconfiguration, <code class=\"hljs\">cargo login</code> also supports passing additional command line args\nvia <code class=\"hljs\">cargo login -- &lt;additional args&gt;</code>. These additional arguments will be included\nin the <code class=\"hljs\">args</code> field after any args from Cargo configuration.</p>\n<h3 id=\"read-request\"><a class=\"header\" href=\"#read-request\">Read request</a></h3>\n<ul>\n<li>Sent by: Cargo</li>\n<li>Purpose: Get the credential for reading crate information</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{\n    <span class=\"hljs-comment\">// Protocol version</span>\n    <span class=\"hljs-string\">\"v\"</span>:<span class=\"hljs-number\">1</span>,\n    <span class=\"hljs-comment\">// Request kind: get credentials</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"get\"</span>,\n    <span class=\"hljs-comment\">// Action to perform: read crate information</span>\n    <span class=\"hljs-string\">\"operation\"</span>:<span class=\"hljs-string\">\"read\"</span>,\n    <span class=\"hljs-comment\">// Registry information (see Registry information)</span>\n    <span class=\"hljs-string\">\"registry\"</span>:{<span class=\"hljs-string\">\"index-url\"</span>:<span class=\"hljs-string\">\"sparse+https://registry-url/index/\"</span>, <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"my-registry\"</span>},\n    <span class=\"hljs-comment\">// Additional command-line args (optional)</span>\n    <span class=\"hljs-string\">\"args\"</span>:[]\n}\n</code></pre>\n<h3 id=\"publish-request\"><a class=\"header\" href=\"#publish-request\">Publish request</a></h3>\n<ul>\n<li>Sent by: Cargo</li>\n<li>Purpose: Get the credential for publishing a crate</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{\n    <span class=\"hljs-comment\">// Protocol version</span>\n    <span class=\"hljs-string\">\"v\"</span>:<span class=\"hljs-number\">1</span>,\n    <span class=\"hljs-comment\">// Request kind: get credentials</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"get\"</span>,\n    <span class=\"hljs-comment\">// Action to perform: publish crate</span>\n    <span class=\"hljs-string\">\"operation\"</span>:<span class=\"hljs-string\">\"publish\"</span>,\n    <span class=\"hljs-comment\">// Crate name</span>\n    <span class=\"hljs-string\">\"name\"</span>:<span class=\"hljs-string\">\"sample\"</span>,\n    <span class=\"hljs-comment\">// Crate version</span>\n    <span class=\"hljs-string\">\"vers\"</span>:<span class=\"hljs-string\">\"0.1.0\"</span>,\n    <span class=\"hljs-comment\">// Crate checksum</span>\n    <span class=\"hljs-string\">\"cksum\"</span>:<span class=\"hljs-string\">\"...\"</span>,\n    <span class=\"hljs-comment\">// Registry information (see Registry information)</span>\n    <span class=\"hljs-string\">\"registry\"</span>:{<span class=\"hljs-string\">\"index-url\"</span>:<span class=\"hljs-string\">\"sparse+https://registry-url/index/\"</span>, <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"my-registry\"</span>},\n    <span class=\"hljs-comment\">// Additional command-line args (optional)</span>\n    <span class=\"hljs-string\">\"args\"</span>:[]\n}\n</code></pre>\n<h3 id=\"get-success-response\"><a class=\"header\" href=\"#get-success-response\">Get success response</a></h3>\n<ul>\n<li>Sent by: credential provider</li>\n<li>Purpose: Gives the credential to Cargo</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{<span class=\"hljs-string\">\"Ok\"</span>:{\n    <span class=\"hljs-comment\">// Response kind: this was a get request</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"get\"</span>,\n    <span class=\"hljs-comment\">// Token to send to the registry</span>\n    <span class=\"hljs-string\">\"token\"</span>:<span class=\"hljs-string\">\"...\"</span>,\n    <span class=\"hljs-comment\">// Cache control. Can be one of the following:</span>\n    <span class=\"hljs-comment\">// * \"never\": do not cache</span>\n    <span class=\"hljs-comment\">// * \"session\": cache for the current cargo session</span>\n    <span class=\"hljs-comment\">// * \"expires\": cache for the current cargo session until expiration</span>\n    <span class=\"hljs-string\">\"cache\"</span>:<span class=\"hljs-string\">\"expires\"</span>,\n    <span class=\"hljs-comment\">// Unix timestamp (only for \"cache\": \"expires\")</span>\n    <span class=\"hljs-string\">\"expiration\"</span>:<span class=\"hljs-number\">1693942857</span>,\n    <span class=\"hljs-comment\">// Is the token operation independent?</span>\n    <span class=\"hljs-string\">\"operation_independent\"</span>:<span class=\"hljs-literal\">true</span>\n}}\n</code></pre>\n<p>The <code class=\"hljs\">token</code> will be sent to the registry as the value of the <code class=\"hljs\">Authorization</code> HTTP header.</p>\n<p><code class=\"hljs\">operation_independent</code> indicates whether the token can be cached across different\noperations (such as publishing or fetching). In general, this should be <code class=\"hljs\">true</code> unless\nthe provider wants to generate tokens that are scoped to specific operations.</p>\n<h3 id=\"login-success-response\"><a class=\"header\" href=\"#login-success-response\">Login success response</a></h3>\n<ul>\n<li>Sent by: credential provider</li>\n<li>Purpose: Indicates the login was successful</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{<span class=\"hljs-string\">\"Ok\"</span>:{\n    <span class=\"hljs-comment\">// Response kind: this was a login request</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"login\"</span>\n}}\n</code></pre>\n<h3 id=\"logout-success-response\"><a class=\"header\" href=\"#logout-success-response\">Logout success response</a></h3>\n<ul>\n<li>Sent by: credential provider</li>\n<li>Purpose: Indicates the logout was successful</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{<span class=\"hljs-string\">\"Ok\"</span>:{\n    <span class=\"hljs-comment\">// Response kind: this was a logout request</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"logout\"</span>\n}}\n</code></pre>\n<h3 id=\"failure-response-url-not-supported\"><a class=\"header\" href=\"#failure-response-url-not-supported\">Failure response (URL not supported)</a></h3>\n<ul>\n<li>Sent by: credential provider</li>\n<li>Purpose: Gives error information to Cargo</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{<span class=\"hljs-string\">\"Err\"</span>:{\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"url-not-supported\"</span>\n}}\n</code></pre>\n<p>Sent if the credential provider is designed\nto only handle specific registry URLs and the given URL\nis not supported. Cargo will attempt another provider if\navailable.</p>\n<h3 id=\"failure-response-not-found\"><a class=\"header\" href=\"#failure-response-not-found\">Failure response (not found)</a></h3>\n<ul>\n<li>Sent by: credential provider</li>\n<li>Purpose: Gives error information to Cargo</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{<span class=\"hljs-string\">\"Err\"</span>:{\n    <span class=\"hljs-comment\">// Error: The credential could not be found in the provider.</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"not-found\"</span>\n}}\n</code></pre>\n<p>Sent if the credential could not be found. This is expected for\n<code class=\"hljs\">get</code> requests where the credential is not available, or <code class=\"hljs\">logout</code>\nrequests where there is nothing found to erase.</p>\n<h3 id=\"failure-response-operation-not-supported\"><a class=\"header\" href=\"#failure-response-operation-not-supported\">Failure response (operation not supported)</a></h3>\n<ul>\n<li>Sent by: credential provider</li>\n<li>Purpose: Gives error information to Cargo</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{<span class=\"hljs-string\">\"Err\"</span>:{\n    <span class=\"hljs-comment\">// Error: The credential could not be found in the provider.</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"operation-not-supported\"</span>\n}}\n</code></pre>\n<p>Sent if the credential provider does not support the requested operation.\nIf a provider only supports <code class=\"hljs\">get</code> and a <code class=\"hljs\">login</code> is requested, the\nprovider should respond with this error.</p>\n<h3 id=\"failure-response-other\"><a class=\"header\" href=\"#failure-response-other\">Failure response (other)</a></h3>\n<ul>\n<li>Sent by: credential provider</li>\n<li>Purpose: Gives error information to Cargo</li>\n</ul>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{<span class=\"hljs-string\">\"Err\"</span>:{\n    <span class=\"hljs-comment\">// Error: something else has failed</span>\n    <span class=\"hljs-string\">\"kind\"</span>:<span class=\"hljs-string\">\"other\"</span>,\n    <span class=\"hljs-comment\">// Error message string to be displayed</span>\n    <span class=\"hljs-string\">\"message\"</span>: <span class=\"hljs-string\">\"free form string error message\"</span>,\n    <span class=\"hljs-comment\">// Detailed cause chain for the error (optional)</span>\n    <span class=\"hljs-string\">\"caused-by\"</span>: [<span class=\"hljs-string\">\"cause 1\"</span>, <span class=\"hljs-string\">\"cause 2\"</span>]\n}}\n</code></pre>\n<h2 id=\"example-communication-to-request-a-token-for-reading\"><a class=\"header\" href=\"#example-communication-to-request-a-token-for-reading\">Example communication to request a token for reading:</a></h2>\n<ol>\n<li>Cargo spawns the credential process, capturing stdin and stdout.</li>\n<li>Credential process sends the Hello message to Cargo\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{ <span class=\"hljs-string\">\"v\"</span>: [<span class=\"hljs-number\">1</span>] }\n</code></pre>\n</li>\n<li>Cargo sends the CredentialRequest message to the credential process (newlines added for readability).\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{\n    <span class=\"hljs-string\">\"v\"</span>: <span class=\"hljs-number\">1</span>,\n    <span class=\"hljs-string\">\"kind\"</span>: <span class=\"hljs-string\">\"get\"</span>,\n    <span class=\"hljs-string\">\"operation\"</span>: <span class=\"hljs-string\">\"read\"</span>,\n    <span class=\"hljs-string\">\"registry\"</span>:{<span class=\"hljs-string\">\"index-url\"</span>:<span class=\"hljs-string\">\"sparse+https://registry-url/index/\"</span>}\n}\n</code></pre>\n</li>\n<li>Credential process sends the CredentialResponse to Cargo (newlines added for readability).\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-javascript hljs\">{\n    <span class=\"hljs-string\">\"token\"</span>: <span class=\"hljs-string\">\"...\"</span>,\n    <span class=\"hljs-string\">\"cache\"</span>: <span class=\"hljs-string\">\"session\"</span>,\n    <span class=\"hljs-string\">\"operation_independent\"</span>: <span class=\"hljs-literal\">true</span>\n}\n</code></pre>\n</li>\n<li>Cargo closes the stdin pipe to the credential provider and it exits.</li>\n<li>Cargo uses the token for the remainder of the session (until Cargo exits) when interacting with this registry.</li>\n</ol>\n\n                    </main>\n\n                    <nav class=\"nav-wrapper\" aria-label=\"Page navigation\">\n                        <!-- Mobile navigation buttons -->\n                            <a rel=\"prev\" href=\"../reference/registry-authentication.html\" class=\"mobile-nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                                <i class=\"fa fa-angle-left\"></i>\n                            </a>\n\n                            <a rel=\"next prefetch\" href=\"../reference/running-a-registry.html\" class=\"mobile-nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                                <i class=\"fa fa-angle-right\"></i>\n                            </a>\n\n                        <div style=\"clear: both\"></div>\n                    </nav>\n                </div>\n            </div>\n\n            <nav class=\"nav-wide-wrapper\" aria-label=\"Page navigation\">\n                    <a rel=\"prev\" href=\"../reference/registry-authentication.html\" class=\"nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                        <i class=\"fa fa-angle-left\"></i>\n                    </a>\n\n                    <a rel=\"next prefetch\" href=\"../reference/running-a-registry.html\" class=\"nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                        <i class=\"fa fa-angle-right\"></i>\n                    </a>\n            </nav>\n\n        </div>\n\n\n\n\n        <script>\n            window.playground_copyable = true;\n        </script>\n\n\n        <script src=\"../elasticlunr.min.js\"></script>\n        <script src=\"../mark.min.js\"></script>\n        <script src=\"../searcher.js\"></script>\n\n        <script src=\"../clipboard.min.js\"></script>\n        <script src=\"../highlight.js\"></script>\n        <script src=\"../book.js\"></script>\n\n        <!-- Custom JS scripts -->\n\n\n    </div>\n    \n\n</body></html>",
	"crawlDate": "2024-07-28T05:09:23.484Z"
}