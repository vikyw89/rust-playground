{
	"title": "Publishing on crates.io - The Cargo Book",
	"url": "https://doc.rust-lang.org/cargo/reference/publishing.html",
	"markdown": "# Publishing on crates.io - The Cargo Book\n\nOnce you’ve got a library that you’d like to share with the world, it’s time to publish it on [crates.io](https://crates.io/)! Publishing a crate is when a specific version is uploaded to be hosted on [crates.io](https://crates.io/).\n\nTake care when publishing a crate, because a publish is **permanent**. The version can never be overwritten, and the code cannot be deleted. There is no limit to the number of versions which can be published, however.\n\n## [Before your first publish](#before-your-first-publish)\n\nFirst things first, you’ll need an account on [crates.io](https://crates.io/) to acquire an API token. To do so, [visit the home page](https://crates.io/) and log in via a GitHub account (required for now). You will also need to provide and verify your email address on the [Account Settings](https://crates.io/settings/profile) page. Once that is done [create an API token](https://crates.io/settings/tokens), make sure you copy it. Once you leave the page you will not be able to see it again.\n\nThen run the [`cargo login`](../commands/cargo-login.html) command.\n\n```console\n$ cargo login\n\n```\n\nThen at the prompt put in the token specified.\n\n```console\nplease paste the API Token found on https://crates.io/me below\nabcdefghijklmnopqrstuvwxyz012345\n\n```\n\nThis command will inform Cargo of your API token and store it locally in your `~/.cargo/credentials.toml`. Note that this token is a **secret** and should not be shared with anyone else. If it leaks for any reason, you should revoke it immediately.\n\n> **Note**: The [`cargo logout`](../commands/cargo-logout.html) command can be used to remove the token from `credentials.toml`. This can be useful if you no longer need it stored on the local machine.\n\n## [Before publishing a new crate](#before-publishing-a-new-crate)\n\nKeep in mind that crate names on [crates.io](https://crates.io/) are allocated on a first-come-first-serve basis. Once a crate name is taken, it cannot be used for another crate.\n\nCheck out the [metadata you can specify](manifest.html) in `Cargo.toml` to ensure your crate can be discovered more easily! Before publishing, make sure you have filled out the following fields:\n\n-   [`license` or `license-file`](about:blank/manifest.html#the-license-and-license-file-fields)\n-   [`description`](about:blank/manifest.html#the-description-field)\n-   [`homepage`](about:blank/manifest.html#the-homepage-field)\n-   [`repository`](about:blank/manifest.html#the-repository-field)\n-   [`readme`](about:blank/manifest.html#the-readme-field)\n\nIt would also be a good idea to include some [`keywords`](about:blank/manifest.html#the-keywords-field) and [`categories`](about:blank/manifest.html#the-categories-field), though they are not required.\n\nIf you are publishing a library, you may also want to consult the [Rust API Guidelines](https://rust-lang.github.io/api-guidelines/).\n\n### [Packaging a crate](#packaging-a-crate)\n\nThe next step is to package up your crate and upload it to [crates.io](https://crates.io/). For this we’ll use the [`cargo publish`](../commands/cargo-publish.html) subcommand. This command performs the following steps:\n\n1.  Perform some verification checks on your package.\n2.  Compress your source code into a `.crate` file.\n3.  Extract the `.crate` file into a temporary directory and verify that it compiles.\n4.  Upload the `.crate` file to [crates.io](https://crates.io/).\n5.  The registry will perform some additional checks on the uploaded package before adding it.\n\nIt is recommended that you first run `cargo publish --dry-run` (or [`cargo package`](../commands/cargo-package.html) which is equivalent) to ensure there aren’t any warnings or errors before publishing. This will perform the first three steps listed above.\n\n```console\n$ cargo publish --dry-run\n\n```\n\nYou can inspect the generated `.crate` file in the `target/package` directory. [crates.io](https://crates.io/) currently has a 10MB size limit on the `.crate` file. You may want to check the size of the `.crate` file to ensure you didn’t accidentally package up large assets that are not required to build your package, such as test data, website documentation, or code generation. You can check which files are included with the following command:\n\n```console\n$ cargo package --list\n\n```\n\nCargo will automatically ignore files ignored by your version control system when packaging, but if you want to specify an extra set of files to ignore you can use the [`exclude` key](about:blank/manifest.html#the-exclude-and-include-fields) in the manifest:\n\n```toml\n[package]\n# ...\nexclude = [\n    \"public/assets/*\",\n    \"videos/*\",\n]\n\n```\n\nIf you’d rather explicitly list the files to include, Cargo also supports an `include` key, which if set, overrides the `exclude` key:\n\n```toml\n[package]\n# ...\ninclude = [\n    \"**/*.rs\",\n    \"Cargo.toml\",\n]\n\n```\n\n## [Uploading the crate](#uploading-the-crate)\n\nWhen you are ready to publish, use the [`cargo publish`](../commands/cargo-publish.html) command to upload to [crates.io](https://crates.io/):\n\n```console\n$ cargo publish\n\n```\n\nAnd that’s it, you’ve now published your first crate!\n\n## [Publishing a new version of an existing crate](#publishing-a-new-version-of-an-existing-crate)\n\nIn order to release a new version, change [the `version` value](about:blank/manifest.html#the-version-field) specified in your `Cargo.toml` manifest. Keep in mind [the SemVer rules](semver.html) which provide guidelines on what is a compatible change. Then run [`cargo publish`](../commands/cargo-publish.html) as described above to upload the new version.\n\n> **Recommendation:** Consider the full release process and automate what you can.\n> \n> Each version should include:\n> \n> -   A changelog entry, preferably [manually curated](https://keepachangelog.com/en/1.0.0/) though a generated one is better than nothing\n> -   A [git tag](https://git-scm.com/book/en/v2/Git-Basics-Tagging) pointing to the published commit\n> \n> Examples of third-party tools that are representative of different workflows include (in alphabetical order):\n> \n> -   [cargo-release](https://crates.io/crates/cargo-release)\n> -   [cargo-smart-release](https://crates.io/crates/cargo-smart-release)\n> -   [release-plz](https://crates.io/crates/release-plz)\n> \n> For more, see [crates.io](https://crates.io/search?q=cargo%20release).\n\n## [Managing a crates.io-based crate](#managing-a-cratesio-based-crate)\n\nManagement of crates is primarily done through the command line `cargo` tool rather than the [crates.io](https://crates.io/) web interface. For this, there are a few subcommands to manage a crate.\n\n### [`cargo yank`](#cargo-yank)\n\nOccasions may arise where you publish a version of a crate that actually ends up being broken for one reason or another (syntax error, forgot to include a file, etc.). For situations such as this, Cargo supports a “yank” of a version of a crate.\n\n```console\n$ cargo yank --version 1.0.1\n$ cargo yank --version 1.0.1 --undo\n\n```\n\nA yank **does not** delete any code. This feature is not intended for deleting accidentally uploaded secrets, for example. If that happens, you must reset those secrets immediately.\n\nThe semantics of a yanked version are that no new dependencies can be created against that version, but all existing dependencies continue to work. One of the major goals of [crates.io](https://crates.io/) is to act as a permanent archive of crates that does not change over time, and allowing deletion of a version would go against this goal. Essentially a yank means that all packages with a `Cargo.lock` will not break, while any future `Cargo.lock` files generated will not list the yanked version.\n\n### [`cargo owner`](#cargo-owner)\n\nA crate is often developed by more than one person, or the primary maintainer may change over time! The owner of a crate is the only person allowed to publish new versions of the crate, but an owner may designate additional owners.\n\n```console\n$ cargo owner --add github-handle\n$ cargo owner --remove github-handle\n$ cargo owner --add github:rust-lang:owners\n$ cargo owner --remove github:rust-lang:owners\n\n```\n\nThe owner IDs given to these commands must be GitHub user names or GitHub teams.\n\nIf a user name is given to `--add`, that user is invited as a “named” owner, with full rights to the crate. In addition to being able to publish or yank versions of the crate, they have the ability to add or remove owners, _including_ the owner that made _them_ an owner. Needless to say, you shouldn’t make people you don’t fully trust into a named owner. In order to become a named owner, a user must have logged into [crates.io](https://crates.io/) previously.\n\nIf a team name is given to `--add`, that team is invited as a “team” owner, with restricted right to the crate. While they have permission to publish or yank versions of the crate, they _do not_ have the ability to add or remove owners. In addition to being more convenient for managing groups of owners, teams are just a bit more secure against owners becoming malicious.\n\nThe syntax for teams is currently `github:org:team` (see examples above). In order to invite a team as an owner one must be a member of that team. No such restriction applies to removing a team as an owner.\n\n## [GitHub permissions](#github-permissions)\n\nTeam membership is not something GitHub provides simple public access to, and it is likely for you to encounter the following message when working with them:\n\n> It looks like you don’t have permission to query a necessary property from GitHub to complete this request. You may need to re-authenticate on [crates.io](https://crates.io/) to grant permission to read GitHub org memberships.\n\nThis is basically a catch-all for “you tried to query a team, and one of the five levels of membership access control denied this”. That is not an exaggeration. GitHub’s support for team access control is Enterprise Grade.\n\nThe most likely cause of this is simply that you last logged in before this feature was added. We originally requested _no_ permissions from GitHub when authenticating users, because we didn’t actually ever use the user’s token for anything other than logging them in. However to query team membership on your behalf, we now require [the `read:org` scope](https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/).\n\nYou are free to deny us this scope, and everything that worked before teams were introduced will keep working. However you will never be able to add a team as an owner, or publish a crate as a team owner. If you ever attempt to do this, you will get the error above. You may also see this error if you ever try to publish a crate that you don’t own at all, but otherwise happens to have a team.\n\nIf you ever change your mind, or just aren’t sure if [crates.io](https://crates.io/) has sufficient permission, you can always go to [https://crates.io/](https://crates.io/) and re-authenticate, which will prompt you for permission if [crates.io](https://crates.io/) doesn’t have all the scopes it would like to.\n\nAn additional barrier to querying GitHub is that the organization may be actively denying third party access. To check this, you can go to:\n\n```text\nhttps://github.com/organizations/:org/settings/oauth_application_policy\n\n```\n\nwhere `:org` is the name of the organization (e.g., `rust-lang`). You may see something like:\n\n![Organization Access Control](../images/org-level-acl.png)\n\nWhere you may choose to explicitly remove [crates.io](https://crates.io/) from your organization’s blacklist, or simply press the “Remove Restrictions” button to allow all third party applications to access this data.\n\nAlternatively, when [crates.io](https://crates.io/) requested the `read:org` scope, you could have explicitly whitelisted [crates.io](https://crates.io/) querying the org in question by pressing the “Grant Access” button next to its name:\n\n![Authentication Access Control](../images/auth-level-acl.png)\n\n### [Troubleshooting GitHub team access errors](#troubleshooting-github-team-access-errors)\n\nWhen trying to add a GitHub team as crate owner, you may see an error like:\n\n```text\nerror: failed to invite owners to crate <crate_name>: api errors (status 200 OK): could not find the github team org/repo\n\n```\n\nIn that case, you should go to [the GitHub Application settings page](https://github.com/settings/applications) and check if crates.io is listed in the `Authorized OAuth Apps` tab. If it isn’t, you should go to [https://crates.io/](https://crates.io/) and authorize it. Then go back to the Application Settings page on GitHub, click on the crates.io application in the list, and make sure you or your organization is listed in the “Organization access” list with a green check mark. If there’s a button labeled `Grant` or `Request`, you should grant the access or request the org owner to do so.",
	"html": "<!DOCTYPE html><html lang=\"en\" class=\"light\" dir=\"ltr\"><head>\n        <!-- Book generated using mdBook -->\n        <meta charset=\"UTF-8\">\n        <title>Publishing on crates.io - The Cargo Book</title>\n\n\n        <!-- Custom HTML head -->\n        <style>\n            dd {\n                margin-bottom: 1em;\n            }\n        </style>\n\n        <meta name=\"description\" content=\"\">\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1\">\n        <meta name=\"theme-color\" content=\"rgb(255, 255, 255)\">\n\n        <link rel=\"shortcut icon\" href=\"../favicon.png\">\n        <link rel=\"stylesheet\" href=\"../css/variables.css\">\n        <link rel=\"stylesheet\" href=\"../css/general.css\">\n        <link rel=\"stylesheet\" href=\"../css/chrome.css\">\n        <link rel=\"stylesheet\" href=\"../css/print.css\" media=\"print\">\n\n        <!-- Fonts -->\n        <link rel=\"stylesheet\" href=\"../FontAwesome/css/font-awesome.css\">\n        <link rel=\"stylesheet\" href=\"../fonts/fonts.css\">\n\n        <!-- Highlight.js Stylesheets -->\n        <link rel=\"stylesheet\" href=\"../highlight.css\">\n        <link rel=\"stylesheet\" href=\"../tomorrow-night.css\" disabled=\"\">\n        <link rel=\"stylesheet\" href=\"../ayu-highlight.css\" disabled=\"\">\n\n        <!-- Custom theme stylesheets -->\n\n    </head>\n    <body class=\"js sidebar-visible\">\n    <div id=\"body-container\">\n        <!-- Provide site root to javascript -->\n        <script>\n            var path_to_root = \"../\";\n            var default_theme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? \"navy\" : \"light\";\n        </script>\n\n        <!-- Work around some values being stored in localStorage wrapped in quotes -->\n        <script>\n            try {\n                var theme = localStorage.getItem('mdbook-theme');\n                var sidebar = localStorage.getItem('mdbook-sidebar');\n\n                if (theme.startsWith('\"') && theme.endsWith('\"')) {\n                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));\n                }\n\n                if (sidebar.startsWith('\"') && sidebar.endsWith('\"')) {\n                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));\n                }\n            } catch (e) { }\n        </script>\n\n        <!-- Set the theme before any content is loaded, prevents flash -->\n        <script>\n            var theme;\n            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }\n            if (theme === null || theme === undefined) { theme = default_theme; }\n            var html = document.querySelector('html');\n            html.classList.remove('light')\n            html.classList.add(theme);\n            var body = document.querySelector('body');\n            body.classList.remove('no-js')\n            body.classList.add('js');\n        </script>\n\n        <input type=\"checkbox\" id=\"sidebar-toggle-anchor\" class=\"hidden\">\n\n        <!-- Hide / unhide sidebar before it is displayed -->\n        <script>\n            var body = document.querySelector('body');\n            var sidebar = null;\n            var sidebar_toggle = document.getElementById(\"sidebar-toggle-anchor\");\n            if (document.body.clientWidth >= 1080) {\n                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }\n                sidebar = sidebar || 'visible';\n            } else {\n                sidebar = 'hidden';\n            }\n            sidebar_toggle.checked = sidebar === 'visible';\n            body.classList.remove('sidebar-visible');\n            body.classList.add(\"sidebar-\" + sidebar);\n        </script>\n\n        <nav id=\"sidebar\" class=\"sidebar\" aria-label=\"Table of contents\" aria-hidden=\"false\">\n            <div class=\"sidebar-scrollbox\">\n                <ol class=\"chapter\"><li class=\"chapter-item expanded affix \"><a href=\"../index.html\" tabindex=\"0\">Introduction</a></li><li class=\"chapter-item expanded \"><a href=\"../getting-started/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.</strong> Getting Started</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../getting-started/installation.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.1.</strong> Installation</a></li><li class=\"chapter-item expanded \"><a href=\"../getting-started/first-steps.html\" tabindex=\"0\"><strong aria-hidden=\"true\">1.2.</strong> First Steps with Cargo</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../guide/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.</strong> Cargo Guide</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../guide/why-cargo-exists.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.1.</strong> Why Cargo Exists</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/creating-a-new-project.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.2.</strong> Creating a New Package</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/working-on-an-existing-project.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.3.</strong> Working on an Existing Package</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/dependencies.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.4.</strong> Dependencies</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/project-layout.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.5.</strong> Package Layout</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/cargo-toml-vs-cargo-lock.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.6.</strong> Cargo.toml vs Cargo.lock</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/tests.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.7.</strong> Tests</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/continuous-integration.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.8.</strong> Continuous Integration</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/cargo-home.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.9.</strong> Cargo Home</a></li><li class=\"chapter-item expanded \"><a href=\"../guide/build-cache.html\" tabindex=\"0\"><strong aria-hidden=\"true\">2.10.</strong> Build Cache</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.</strong> Cargo Reference</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/specifying-dependencies.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.1.</strong> Specifying Dependencies</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/overriding-dependencies.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.1.1.</strong> Overriding Dependencies</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/manifest.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.2.</strong> The Manifest Format</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/cargo-targets.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.2.1.</strong> Cargo Targets</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/workspaces.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.3.</strong> Workspaces</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/features.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.4.</strong> Features</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/features-examples.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.4.1.</strong> Features Examples</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/profiles.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.5.</strong> Profiles</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/config.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.6.</strong> Configuration</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/environment-variables.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.7.</strong> Environment Variables</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/build-scripts.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.8.</strong> Build Scripts</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/build-script-examples.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.8.1.</strong> Build Script Examples</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/publishing.html\" class=\"active\" tabindex=\"0\"><strong aria-hidden=\"true\">3.9.</strong> Publishing on crates.io</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/pkgid-spec.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.10.</strong> Package ID Specifications</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/source-replacement.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.11.</strong> Source Replacement</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/external-tools.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.12.</strong> External Tools</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/registries.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.</strong> Registries</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/registry-authentication.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.1.</strong> Registry Authentication</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/credential-provider-protocol.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.1.1.</strong> Credential Provider Protocol</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/running-a-registry.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.2.</strong> Running a Registry</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../reference/registry-index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.2.1.</strong> Registry Index</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/registry-web-api.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.13.2.2.</strong> Registry Web API</a></li></ol></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../reference/resolver.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.14.</strong> Dependency Resolution</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/semver.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.15.</strong> SemVer Compatibility</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/future-incompat-report.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.16.</strong> Future incompat report</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/timings.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.17.</strong> Reporting build timings</a></li><li class=\"chapter-item expanded \"><a href=\"../reference/unstable.html\" tabindex=\"0\"><strong aria-hidden=\"true\">3.18.</strong> Unstable Features</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/index.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.</strong> Cargo Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/general-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.</strong> General Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.1.</strong> cargo</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-help.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.2.</strong> cargo help</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-version.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.1.3.</strong> cargo version</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/build-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.</strong> Build Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-bench.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.1.</strong> cargo bench</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-build.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.2.</strong> cargo build</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-check.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.3.</strong> cargo check</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-clean.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.4.</strong> cargo clean</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-doc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.5.</strong> cargo doc</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-fetch.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.6.</strong> cargo fetch</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-fix.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.7.</strong> cargo fix</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-run.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.8.</strong> cargo run</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-rustc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.9.</strong> cargo rustc</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-rustdoc.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.10.</strong> cargo rustdoc</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-test.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.11.</strong> cargo test</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-report.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.2.12.</strong> cargo report</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/manifest-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.</strong> Manifest Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-add.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.1.</strong> cargo add</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-generate-lockfile.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.2.</strong> cargo generate-lockfile</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-locate-project.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.3.</strong> cargo locate-project</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-metadata.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.4.</strong> cargo metadata</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-pkgid.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.5.</strong> cargo pkgid</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-remove.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.6.</strong> cargo remove</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-tree.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.7.</strong> cargo tree</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-update.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.8.</strong> cargo update</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-vendor.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.9.</strong> cargo vendor</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-verify-project.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.3.10.</strong> cargo verify-project</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/package-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.</strong> Package Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-init.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.1.</strong> cargo init</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-install.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.2.</strong> cargo install</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-new.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.3.</strong> cargo new</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-search.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.4.</strong> cargo search</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-uninstall.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.4.5.</strong> cargo uninstall</a></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../commands/publishing-commands.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.</strong> Publishing Commands</a></li><li><ol class=\"section\"><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-login.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.1.</strong> cargo login</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-logout.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.2.</strong> cargo logout</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-owner.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.3.</strong> cargo owner</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-package.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.4.</strong> cargo package</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-publish.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.5.</strong> cargo publish</a></li><li class=\"chapter-item expanded \"><a href=\"../commands/cargo-yank.html\" tabindex=\"0\"><strong aria-hidden=\"true\">4.5.6.</strong> cargo yank</a></li></ol></li></ol></li><li class=\"chapter-item expanded \"><a href=\"../faq.html\" tabindex=\"0\"><strong aria-hidden=\"true\">5.</strong> FAQ</a></li><li class=\"chapter-item expanded \"><a href=\"../appendix/glossary.html\" tabindex=\"0\"><strong aria-hidden=\"true\">6.</strong> Appendix: Glossary</a></li><li class=\"chapter-item expanded \"><a href=\"../appendix/git-authentication.html\" tabindex=\"0\"><strong aria-hidden=\"true\">7.</strong> Appendix: Git Authentication</a></li></ol>\n            </div>\n            <div id=\"sidebar-resize-handle\" class=\"sidebar-resize-handle\">\n                <div class=\"sidebar-resize-indicator\"></div>\n            </div>\n        </nav>\n\n        <!-- Track and set sidebar scroll position -->\n        <script>\n            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');\n            sidebarScrollbox.addEventListener('click', function(e) {\n                if (e.target.tagName === 'A') {\n                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);\n                }\n            }, { passive: true });\n            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');\n            sessionStorage.removeItem('sidebar-scroll');\n            if (sidebarScrollTop) {\n                // preserve sidebar scroll position when navigating via links within sidebar\n                sidebarScrollbox.scrollTop = sidebarScrollTop;\n            } else {\n                // scroll sidebar to current active section when navigating via \"next/previous chapter\" buttons\n                var activeSection = document.querySelector('#sidebar .active');\n                if (activeSection) {\n                    activeSection.scrollIntoView({ block: 'center' });\n                }\n            }\n        </script>\n\n        <div id=\"page-wrapper\" class=\"page-wrapper\">\n\n            <div class=\"page\">\n                                <div id=\"menu-bar-hover-placeholder\"></div>\n                <div id=\"menu-bar\" class=\"menu-bar\" style=\"top: 0px;\">\n                    <div class=\"left-buttons\">\n                        <label id=\"sidebar-toggle\" class=\"icon-button\" for=\"sidebar-toggle-anchor\" title=\"Toggle Table of Contents\" aria-label=\"Toggle Table of Contents\" aria-controls=\"sidebar\" aria-expanded=\"true\">\n                            <i class=\"fa fa-bars\"></i>\n                        </label>\n                        <button id=\"theme-toggle\" class=\"icon-button\" type=\"button\" title=\"Change theme\" aria-label=\"Change theme\" aria-haspopup=\"true\" aria-expanded=\"false\" aria-controls=\"theme-list\">\n                            <i class=\"fa fa-paint-brush\"></i>\n                        </button>\n                        <ul id=\"theme-list\" class=\"theme-popup\" aria-label=\"Themes\" role=\"menu\">\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme theme-selected\" id=\"light\">Light</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"rust\">Rust</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"coal\">Coal</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"navy\">Navy</button></li>\n                            <li role=\"none\"><button role=\"menuitem\" class=\"theme\" id=\"ayu\">Ayu</button></li>\n                        </ul>\n                        <button id=\"search-toggle\" class=\"icon-button\" type=\"button\" title=\"Search. (Shortkey: s)\" aria-label=\"Toggle Searchbar\" aria-expanded=\"false\" aria-keyshortcuts=\"S\" aria-controls=\"searchbar\">\n                            <i class=\"fa fa-search\"></i>\n                        </button>\n                    </div>\n\n                    <h1 class=\"menu-title\">The Cargo Book</h1>\n\n                    <div class=\"right-buttons\">\n                        <a href=\"../print.html\" title=\"Print this book\" aria-label=\"Print this book\">\n                            <i id=\"print-button\" class=\"fa fa-print\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/cargo/tree/master/src/doc/src\" title=\"Git repository\" aria-label=\"Git repository\">\n                            <i id=\"git-repository-button\" class=\"fa fa-github\"></i>\n                        </a>\n                        <a href=\"https://github.com/rust-lang/cargo/edit/master/src/doc/src/reference/publishing.md\" title=\"Suggest an edit\" aria-label=\"Suggest an edit\">\n                            <i id=\"git-edit-button\" class=\"fa fa-edit\"></i>\n                        </a>\n\n                    </div>\n                </div>\n\n                <div id=\"search-wrapper\" class=\"hidden\">\n                    <form id=\"searchbar-outer\" class=\"searchbar-outer\">\n                        <input type=\"search\" id=\"searchbar\" name=\"searchbar\" placeholder=\"Search this book ...\" aria-controls=\"searchresults-outer\" aria-describedby=\"searchresults-header\">\n                    </form>\n                    <div id=\"searchresults-outer\" class=\"searchresults-outer hidden\">\n                        <div id=\"searchresults-header\" class=\"searchresults-header\"></div>\n                        <ul id=\"searchresults\">\n                        </ul>\n                    </div>\n                </div>\n\n                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->\n                <script>\n                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');\n                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');\n                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {\n                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);\n                    });\n                </script>\n\n                <div id=\"content\" class=\"content\">\n                    <main>\n                        <h1 id=\"publishing-on-cratesio\"><a class=\"header\" href=\"#publishing-on-cratesio\">Publishing on crates.io</a></h1>\n<p>Once you’ve got a library that you’d like to share with the world, it’s time to\npublish it on <a href=\"https://crates.io/\">crates.io</a>! Publishing a crate is when a specific\nversion is uploaded to be hosted on <a href=\"https://crates.io/\">crates.io</a>.</p>\n<p>Take care when publishing a crate, because a publish is <strong>permanent</strong>. The\nversion can never be overwritten, and the code cannot be deleted. There is no\nlimit to the number of versions which can be published, however.</p>\n<h2 id=\"before-your-first-publish\"><a class=\"header\" href=\"#before-your-first-publish\">Before your first publish</a></h2>\n<p>First things first, you’ll need an account on <a href=\"https://crates.io/\">crates.io</a> to acquire\nan API token. To do so, <a href=\"https://crates.io/\">visit the home page</a> and log in via a GitHub\naccount (required for now). You will also need to provide and verify your email\naddress on the <a href=\"https://crates.io/settings/profile\">Account Settings</a> page. Once\nthat is done <a href=\"https://crates.io/settings/tokens\">create an API token</a>, make sure\nyou copy it. Once you leave the page you will not be able to see it again.</p>\n<p>Then run the <a href=\"../commands/cargo-login.html\"><code class=\"hljs\">cargo login</code></a> command.</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-console hljs shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo login</span>\n</code></pre>\n<p>Then at the prompt put in the token specified.</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-console hljs shell\">please paste the API Token found on https://crates.io/me below\nabcdefghijklmnopqrstuvwxyz012345\n</code></pre>\n<p>This command will inform Cargo of your API token and store it locally in your\n<code class=\"hljs\">~/.cargo/credentials.toml</code>. Note that this token is a <strong>secret</strong> and should not be\nshared with anyone else. If it leaks for any reason, you should revoke it\nimmediately.</p>\n<blockquote>\n<p><strong>Note</strong>: The <a href=\"../commands/cargo-logout.html\"><code class=\"hljs\">cargo logout</code></a> command can be used to remove the token from\n<code class=\"hljs\">credentials.toml</code>. This can be useful if you no longer need it stored on\nthe local machine.</p>\n</blockquote>\n<h2 id=\"before-publishing-a-new-crate\"><a class=\"header\" href=\"#before-publishing-a-new-crate\">Before publishing a new crate</a></h2>\n<p>Keep in mind that crate names on <a href=\"https://crates.io/\">crates.io</a> are allocated on a first-come-first-serve\nbasis. Once a crate name is taken, it cannot be used for another crate.</p>\n<p>Check out the <a href=\"manifest.html\">metadata you can specify</a> in <code class=\"hljs\">Cargo.toml</code> to\nensure your crate can be discovered more easily! Before publishing, make sure\nyou have filled out the following fields:</p>\n<ul>\n<li><a href=\"manifest.html#the-license-and-license-file-fields\"><code class=\"hljs\">license</code> or <code class=\"hljs\">license-file</code></a></li>\n<li><a href=\"manifest.html#the-description-field\"><code class=\"hljs\">description</code></a></li>\n<li><a href=\"manifest.html#the-homepage-field\"><code class=\"hljs\">homepage</code></a></li>\n<li><a href=\"manifest.html#the-repository-field\"><code class=\"hljs\">repository</code></a></li>\n<li><a href=\"manifest.html#the-readme-field\"><code class=\"hljs\">readme</code></a></li>\n</ul>\n<p>It would also be a good idea to include some <a href=\"manifest.html#the-keywords-field\"><code class=\"hljs\">keywords</code></a> and <a href=\"manifest.html#the-categories-field\"><code class=\"hljs\">categories</code></a>,\nthough they are not required.</p>\n<p>If you are publishing a library, you may also want to consult the <a href=\"https://rust-lang.github.io/api-guidelines/\">Rust API\nGuidelines</a>.</p>\n<h3 id=\"packaging-a-crate\"><a class=\"header\" href=\"#packaging-a-crate\">Packaging a crate</a></h3>\n<p>The next step is to package up your crate and upload it to <a href=\"https://crates.io/\">crates.io</a>. For\nthis we’ll use the <a href=\"../commands/cargo-publish.html\"><code class=\"hljs\">cargo publish</code></a> subcommand. This command performs the following\nsteps:</p>\n<ol>\n<li>Perform some verification checks on your package.</li>\n<li>Compress your source code into a <code class=\"hljs\">.crate</code> file.</li>\n<li>Extract the <code class=\"hljs\">.crate</code> file into a temporary directory and verify that it\ncompiles.</li>\n<li>Upload the <code class=\"hljs\">.crate</code> file to <a href=\"https://crates.io/\">crates.io</a>.</li>\n<li>The registry will perform some additional checks on the uploaded package\nbefore adding it.</li>\n</ol>\n<p>It is recommended that you first run <code class=\"hljs\">cargo publish --dry-run</code> (or <a href=\"../commands/cargo-package.html\"><code class=\"hljs\">cargo package</code></a> which is equivalent) to ensure there aren’t any warnings or errors\nbefore publishing. This will perform the first three steps listed above.</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-console hljs shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo publish --dry-run</span>\n</code></pre>\n<p>You can inspect the generated <code class=\"hljs\">.crate</code> file in the <code class=\"hljs\">target/package</code> directory.\n<a href=\"https://crates.io/\">crates.io</a> currently has a 10MB size limit on the <code class=\"hljs\">.crate</code> file. You may want\nto check the size of the <code class=\"hljs\">.crate</code> file to ensure you didn’t accidentally\npackage up large assets that are not required to build your package, such as\ntest data, website documentation, or code generation. You can check which\nfiles are included with the following command:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-console hljs shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo package --list</span>\n</code></pre>\n<p>Cargo will automatically ignore files ignored by your version control system\nwhen packaging, but if you want to specify an extra set of files to ignore you\ncan use the <a href=\"manifest.html#the-exclude-and-include-fields\"><code class=\"hljs\">exclude</code> key</a> in the\nmanifest:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-toml hljs ini\"><span class=\"hljs-section\">[package]</span>\n<span class=\"hljs-comment\"># ...</span>\n<span class=\"hljs-attr\">exclude</span> = [\n    <span class=\"hljs-string\">\"public/assets/*\"</span>,\n    <span class=\"hljs-string\">\"videos/*\"</span>,\n]\n</code></pre>\n<p>If you’d rather explicitly list the files to include, Cargo also supports an\n<code class=\"hljs\">include</code> key, which if set, overrides the <code class=\"hljs\">exclude</code> key:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-toml hljs ini\"><span class=\"hljs-section\">[package]</span>\n<span class=\"hljs-comment\"># ...</span>\n<span class=\"hljs-attr\">include</span> = [\n    <span class=\"hljs-string\">\"**/*.rs\"</span>,\n    <span class=\"hljs-string\">\"Cargo.toml\"</span>,\n]\n</code></pre>\n<h2 id=\"uploading-the-crate\"><a class=\"header\" href=\"#uploading-the-crate\">Uploading the crate</a></h2>\n<p>When you are ready to publish, use the <a href=\"../commands/cargo-publish.html\"><code class=\"hljs\">cargo publish</code></a> command\nto upload to <a href=\"https://crates.io/\">crates.io</a>:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-console hljs shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo publish</span>\n</code></pre>\n<p>And that’s it, you’ve now published your first crate!</p>\n<h2 id=\"publishing-a-new-version-of-an-existing-crate\"><a class=\"header\" href=\"#publishing-a-new-version-of-an-existing-crate\">Publishing a new version of an existing crate</a></h2>\n<p>In order to release a new version, change <a href=\"manifest.html#the-version-field\">the <code class=\"hljs\">version</code> value</a> specified in your <code class=\"hljs\">Cargo.toml</code> manifest.\nKeep in mind <a href=\"semver.html\">the SemVer rules</a> which provide guidelines on what is a compatible change.\nThen run <a href=\"../commands/cargo-publish.html\"><code class=\"hljs\">cargo publish</code></a> as described above to upload the new version.</p>\n<blockquote>\n<p><strong>Recommendation:</strong> Consider the full release process and automate what you can.</p>\n<p>Each version should include:</p>\n<ul>\n<li>A changelog entry, preferably <a href=\"https://keepachangelog.com/en/1.0.0/\">manually curated</a> though a generated one is better than nothing</li>\n<li>A <a href=\"https://git-scm.com/book/en/v2/Git-Basics-Tagging\">git tag</a> pointing to the published commit</li>\n</ul>\n<p>Examples of third-party tools that are representative of different workflows include (in alphabetical order):</p>\n<ul>\n<li><a href=\"https://crates.io/crates/cargo-release\">cargo-release</a></li>\n<li><a href=\"https://crates.io/crates/cargo-smart-release\">cargo-smart-release</a></li>\n<li><a href=\"https://crates.io/crates/release-plz\">release-plz</a></li>\n</ul>\n<p>For more, see <a href=\"https://crates.io/search?q=cargo%20release\">crates.io</a>.</p>\n</blockquote>\n<h2 id=\"managing-a-cratesio-based-crate\"><a class=\"header\" href=\"#managing-a-cratesio-based-crate\">Managing a crates.io-based crate</a></h2>\n<p>Management of crates is primarily done through the command line <code class=\"hljs\">cargo</code> tool\nrather than the <a href=\"https://crates.io/\">crates.io</a> web interface. For this, there are a few subcommands\nto manage a crate.</p>\n<h3 id=\"cargo-yank\"><a class=\"header\" href=\"#cargo-yank\"><code>cargo yank</code></a></h3>\n<p>Occasions may arise where you publish a version of a crate that actually ends up\nbeing broken for one reason or another (syntax error, forgot to include a file,\netc.). For situations such as this, Cargo supports a “yank” of a version of a\ncrate.</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-console hljs shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo yank --version 1.0.1</span>\n<span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo yank --version 1.0.1 --undo</span>\n</code></pre>\n<p>A yank <strong>does not</strong> delete any code. This feature is not intended for deleting\naccidentally uploaded secrets, for example. If that happens, you must reset\nthose secrets immediately.</p>\n<p>The semantics of a yanked version are that no new dependencies can be created\nagainst that version, but all existing dependencies continue to work. One of the\nmajor goals of <a href=\"https://crates.io/\">crates.io</a> is to act as a permanent archive of crates that does\nnot change over time, and allowing deletion of a version would go against this\ngoal. Essentially a yank means that all packages with a <code class=\"hljs\">Cargo.lock</code> will not\nbreak, while any future <code class=\"hljs\">Cargo.lock</code> files generated will not list the yanked\nversion.</p>\n<h3 id=\"cargo-owner\"><a class=\"header\" href=\"#cargo-owner\"><code>cargo owner</code></a></h3>\n<p>A crate is often developed by more than one person, or the primary maintainer\nmay change over time! The owner of a crate is the only person allowed to publish\nnew versions of the crate, but an owner may designate additional owners.</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-console hljs shell\"><span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo owner --add github-handle</span>\n<span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo owner --remove github-handle</span>\n<span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo owner --add github:rust-lang:owners</span>\n<span class=\"hljs-meta\">$</span><span class=\"bash\"> cargo owner --remove github:rust-lang:owners</span>\n</code></pre>\n<p>The owner IDs given to these commands must be GitHub user names or GitHub teams.</p>\n<p>If a user name is given to <code class=\"hljs\">--add</code>, that user is invited as a “named” owner, with\nfull rights to the crate. In addition to being able to publish or yank versions\nof the crate, they have the ability to add or remove owners, <em>including</em> the\nowner that made <em>them</em> an owner. Needless to say, you shouldn’t make people you\ndon’t fully trust into a named owner. In order to become a named owner, a user\nmust have logged into <a href=\"https://crates.io/\">crates.io</a> previously.</p>\n<p>If a team name is given to <code class=\"hljs\">--add</code>, that team is invited as a “team” owner, with\nrestricted right to the crate. While they have permission to publish or yank\nversions of the crate, they <em>do not</em> have the ability to add or remove owners.\nIn addition to being more convenient for managing groups of owners, teams are\njust a bit more secure against owners becoming malicious.</p>\n<p>The syntax for teams is currently <code class=\"hljs\">github:org:team</code> (see examples above).\nIn order to invite a team as an owner one must be a member of that team. No\nsuch restriction applies to removing a team as an owner.</p>\n<h2 id=\"github-permissions\"><a class=\"header\" href=\"#github-permissions\">GitHub permissions</a></h2>\n<p>Team membership is not something GitHub provides simple public access to, and it\nis likely for you to encounter the following message when working with them:</p>\n<blockquote>\n<p>It looks like you don’t have permission to query a necessary property from\nGitHub to complete this request. You may need to re-authenticate on <a href=\"https://crates.io/\">crates.io</a>\nto grant permission to read GitHub org memberships.</p>\n</blockquote>\n<p>This is basically a catch-all for “you tried to query a team, and one of the\nfive levels of membership access control denied this”. That is not an\nexaggeration. GitHub’s support for team access control is Enterprise Grade.</p>\n<p>The most likely cause of this is simply that you last logged in before this\nfeature was added. We originally requested <em>no</em> permissions from GitHub when\nauthenticating users, because we didn’t actually ever use the user’s token for\nanything other than logging them in. However to query team membership on your\nbehalf, we now require <a href=\"https://developer.github.com/apps/building-oauth-apps/understanding-scopes-for-oauth-apps/\">the <code class=\"hljs\">read:org</code> scope</a>.</p>\n<p>You are free to deny us this scope, and everything that worked before teams\nwere introduced will keep working. However you will never be able to add a team\nas an owner, or publish a crate as a team owner. If you ever attempt to do this,\nyou will get the error above. You may also see this error if you ever try to\npublish a crate that you don’t own at all, but otherwise happens to have a team.</p>\n<p>If you ever change your mind, or just aren’t sure if <a href=\"https://crates.io/\">crates.io</a> has sufficient\npermission, you can always go to <a href=\"https://crates.io/\">https://crates.io/</a> and re-authenticate,\nwhich will prompt you for permission if <a href=\"https://crates.io/\">crates.io</a> doesn’t have all the scopes\nit would like to.</p>\n<p>An additional barrier to querying GitHub is that the organization may be\nactively denying third party access. To check this, you can go to:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-text hljs plaintext\">https://github.com/organizations/:org/settings/oauth_application_policy\n</code></pre>\n<p>where <code class=\"hljs\">:org</code> is the name of the organization (e.g., <code class=\"hljs\">rust-lang</code>). You may see\nsomething like:</p>\n<p><img src=\"../images/org-level-acl.png\" alt=\"Organization Access Control\"></p>\n<p>Where you may choose to explicitly remove <a href=\"https://crates.io/\">crates.io</a> from your organization’s\nblacklist, or simply press the “Remove Restrictions” button to allow all third\nparty applications to access this data.</p>\n<p>Alternatively, when <a href=\"https://crates.io/\">crates.io</a> requested the <code class=\"hljs\">read:org</code> scope, you could have\nexplicitly whitelisted <a href=\"https://crates.io/\">crates.io</a> querying the org in question by pressing\nthe “Grant Access” button next to its name:</p>\n<p><img src=\"../images/auth-level-acl.png\" alt=\"Authentication Access Control\"></p>\n<h3 id=\"troubleshooting-github-team-access-errors\"><a class=\"header\" href=\"#troubleshooting-github-team-access-errors\">Troubleshooting GitHub team access errors</a></h3>\n<p>When trying to add a GitHub team as crate owner, you may see an error like:</p>\n<pre><div class=\"buttons\"><button class=\"fa fa-copy clip-button\" title=\"Copy to clipboard\" aria-label=\"Copy to clipboard\"><i class=\"tooltiptext\"></i></button></div><code class=\"language-text hljs plaintext\">error: failed to invite owners to crate &lt;crate_name&gt;: api errors (status 200 OK): could not find the github team org/repo\n</code></pre>\n<p>In that case, you should go to <a href=\"https://github.com/settings/applications\">the GitHub Application settings page</a> and\ncheck if crates.io is listed in the <code class=\"hljs\">Authorized OAuth Apps</code> tab.\nIf it isn’t, you should go to <a href=\"https://crates.io/\">https://crates.io/</a> and authorize it.\nThen go back to the Application Settings page on GitHub, click on the\ncrates.io application in the list, and make sure you or your organization is\nlisted in the “Organization access” list with a green check mark. If there’s\na button labeled <code class=\"hljs\">Grant</code> or <code class=\"hljs\">Request</code>, you should grant the access or\nrequest the org owner to do so.</p>\n\n                    </main>\n\n                    <nav class=\"nav-wrapper\" aria-label=\"Page navigation\">\n                        <!-- Mobile navigation buttons -->\n                            <a rel=\"prev\" href=\"../reference/build-script-examples.html\" class=\"mobile-nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                                <i class=\"fa fa-angle-left\"></i>\n                            </a>\n\n                            <a rel=\"next prefetch\" href=\"../reference/pkgid-spec.html\" class=\"mobile-nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                                <i class=\"fa fa-angle-right\"></i>\n                            </a>\n\n                        <div style=\"clear: both\"></div>\n                    </nav>\n                </div>\n            </div>\n\n            <nav class=\"nav-wide-wrapper\" aria-label=\"Page navigation\">\n                    <a rel=\"prev\" href=\"../reference/build-script-examples.html\" class=\"nav-chapters previous\" title=\"Previous chapter\" aria-label=\"Previous chapter\" aria-keyshortcuts=\"Left\">\n                        <i class=\"fa fa-angle-left\"></i>\n                    </a>\n\n                    <a rel=\"next prefetch\" href=\"../reference/pkgid-spec.html\" class=\"nav-chapters next\" title=\"Next chapter\" aria-label=\"Next chapter\" aria-keyshortcuts=\"Right\">\n                        <i class=\"fa fa-angle-right\"></i>\n                    </a>\n            </nav>\n\n        </div>\n\n\n\n\n        <script>\n            window.playground_copyable = true;\n        </script>\n\n\n        <script src=\"../elasticlunr.min.js\"></script>\n        <script src=\"../mark.min.js\"></script>\n        <script src=\"../searcher.js\"></script>\n\n        <script src=\"../clipboard.min.js\"></script>\n        <script src=\"../highlight.js\"></script>\n        <script src=\"../book.js\"></script>\n\n        <!-- Custom JS scripts -->\n\n\n    </div>\n    \n\n</body></html>",
	"crawlDate": "2024-07-28T05:09:08.024Z"
}